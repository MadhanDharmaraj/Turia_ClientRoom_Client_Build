(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[51],{1424:function(e,t,n){"use strict";n.r(t);var s=n(8),c=n(3),a=n(5),r=n(9),i=n(11),l=n(0),d=n(136),o=n(708),u=n(111),j=n(705),b=n(709),m=n(186),f=n(273),O=n(225),h=n(235),x=n(261),g=n(7),p=n.n(g),v=n(6),N=n(56),y=n(702),I=n(703),w=n(371),C=n(183),S=n(13),E=n(17),B=n(21),k=n(24),z=n(16),P=n(42),q=n.n(P),T=n(52),G=n(2),L=function(e){var t=e.t,n=e.name;return Object(G.jsxs)("div",{className:"d-flex",children:[Object(G.jsx)("div",{className:"me-1",children:Object(G.jsx)(d.a,{size:"sm",color:"success",icon:Object(G.jsx)(f.a,{size:12})})}),Object(G.jsxs)("div",{className:"d-flex flex-column",children:[Object(G.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(G.jsx)("h6",{children:n}),Object(G.jsx)(O.a,{size:12,className:"cursor-pointer",onClick:function(){return C.b.dismiss(t.id)}})]}),Object(G.jsx)("span",{children:"You have successfully Created Organization in Turia. Now you can start to explore. Enjoy!"})]})]})},A=Object(z.c)(),R=function(e){var t;Object(i.a)(e);var n=Object(E.b)(),f=Object(B.f)({}),O=Object(l.useContext)(T.a),g=Object(l.useState)(null),z=Object(r.a)(g,2),P=z[0],R=z[1],Z=Object(l.useState)([]),F=Object(r.a)(Z,2),V=F[0],J=F[1],$=Object(l.useState)([]),D=Object(r.a)($,2),K=D[0],Y=D[1],W=Object(l.useState)(!0),H=Object(r.a)(W,2),M=H[0],Q=H[1],U=Object(l.useState)([]),X=Object(r.a)(U,2),_=X[0],ee=X[1],te=Object(l.useState)([]),ne=Object(r.a)(te,2),se=ne[0],ce=ne[1],ae=Object(l.useState)([]),re=Object(r.a)(ae,2),ie=re[0],le=re[1],de=Object(l.useState)(!1),oe=Object(r.a)(de,2),ue=oe[0],je=oe[1],be=function(){return Object(G.jsx)(l.Fragment,{children:Object(G.jsx)(I.a,{})})},me=o.d().shape({userId:o.f().default(A.id),name:o.f().required("Please Enter Business Name"),businessEmail:o.f().email().required("Please Enter Business Email"),contactNo:o.f().required("Please Enter Contact Number").matches(/^[0-9\- ]{10,10}$/,{message:"Phone number is not valid",excludeEmptyString:!0}),countryCode:o.f(),currencyId:o.f().required("Please Select Currency"),businessEntityId:o.f().when("countryCode",{is:function(e){return"IN"===e},then:o.f().required("Please Select Business Entity")}),businessTypeId:o.f().when("countryCode",{is:function(e){return"IN"===e},then:o.f().required("Please Select Business Type")}),isGstRegistered:o.b().default(!0),gstin:o.f().when("isGstRegistered",{is:function(e){return!0===e},then:o.f().required("GSTIN Required.").matches(/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/,{message:"GSTIN is not valid",excludeEmptyString:!0})}),addressLine1:o.f().required("Please Enter Address Line 1"),addressLine2:o.f().default("").when("countryCode",{is:function(e){return"IN"===e},then:o.f().required("Please Enter Area, Street, Sector, Village")}),countryId:o.f().required("Please Select CountryId"),stateId:o.f().when("countryCode",{is:function(e){return"IN"===e},then:o.f().required("Please Select State")}),stateOther:o.f().default("").nullable(),pinZipCode:o.f().default("").when("countryCode",{is:function(e){return"IN"===e},then:o.f().required("Please Enter Postal Code").matches(/^[0-9\- ]{6,6}$/,{message:"Postal Code is not valid",excludeEmptyString:!0})}),city:o.f().default("").when("countryCode",{is:function(e){return"IN"===e},then:o.f().required("Please Enter City")})}),fe=Object(j.f)({defaultValues:me.cast(),resolver:Object(b.a)(me)}),Oe=fe.control,he=fe.handleSubmit,xe=fe.formState.errors,ge=fe.setError,pe=fe.setValue,ve=Object(E.c)((function(e){return e.organizationmain})),Ne=function(){var e=Object(a.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.userId=A.id,e.next=3,n(Object(w.a)(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=Object(a.a)(Object(c.a)().mark((function e(t,s){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={userId:t.id,name:t.name,organizationId:s,email:t.email,userTypeId:t.usertypeid||1},je(!0),e.next=4,n(Object(w.c)(a));case 4:je(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(l.useEffect)(Object(a.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.a.post("/businessentities/list").then((function(e){var t=e.data;J(t.businessentities)})),v.a.post("/businesstypes/dropdown").then((function(e){var t=e.data;Y(t.businesstypes)})),v.a.post("/countries/dropdown").then((function(e){var t=e.data;le(t.countries)})),v.a.post("/states/list").then((function(e){var t=e.data;ee(t.states)})),v.a.post("/currencies/dropdown").then((function(e){var t=e.data;ce(t.currencies)}));case 5:case"end":return e.stop()}}),e)}))),[]);var Ie=function(){var e=Object(a.a)(Object(c.a)().mark((function e(t,n){var s,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/organizationusers/acl",{organizationId:t,userId:n});case 2:return s=e.sent,a=[],s.data.ability.forEach((function(e){var t={action:e.substring(e.lastIndexOf("-")+1),subject:e.replace(e.substring(e.lastIndexOf("-")),"")};a.push(t)})),localStorage.setItem("ability",JSON.stringify(a)),e.next=8,O.update(a);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(l.useEffect)(Object(a.a)(Object(c.a)().mark((function e(){var t,s;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ve.registerSuccess){e.next=10;break}return je(!0),t=ve.activeOrganization,s={organizationId:t.id,startdate:q()().valueOf(),enddate:q()().add(15,"days").valueOf()},e.next=6,n(Object(w.b)(s));case 6:return localStorage.setItem("activeOrganization",JSON.stringify(t)),e.next=9,Ie(t.id,A.id);case 9:f(Object(N.b)("admin"));case 10:case"end":return e.stop()}}),e)}))),[ve.registerSuccess]),Object(l.useEffect)((function(){if(null!==ve.activeOrganizationId){var e=A,t=ve.activeOrganizationId;ye(e,t),Object(C.b)((function(t){return Object(G.jsx)(L,{t:t,name:e.name})}))}}),[ve.activeOrganizationId]),Object(l.useEffect)(Object(a.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==ve.organizationCreateError&&Object.keys(ve.organizationCreateError).map((function(e){ge(e,{type:"custom",message:ve.organizationCreateError[e][0]})}));case 1:case"end":return e.stop()}}),e)}))),[ve.organizationCreateError]);var we=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(G.jsxs)(S.ib,{className:"mb-1",children:[Object(G.jsx)(S.N,{sm:"12",size:"lg",className:p()("form-label ".concat(n?"required":"")),for:t,children:e}),Object(G.jsxs)(S.B,{sm:"12",children:[Object(G.jsx)(j.a,{id:t,name:t,control:Oe,render:function(e){var n=e.field;return Object(G.jsx)(S.K,Object(s.a)({invalid:xe[t]&&!0},n))}}),xe[t]&&Object(G.jsx)(S.I,{children:xe[t].message})]})]})},Ce=function(e,t,n){var c,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(G.jsxs)(S.ib,{className:"mb-1",children:[Object(G.jsx)(S.N,{sm:"12",size:"lg",className:p()("form-label ".concat(a?"required":"")),for:t,children:e}),Object(G.jsxs)(S.B,{sm:"12",children:[Object(G.jsx)(j.a,{control:Oe,name:t,id:t,render:function(e){var c=e.field,a=e.ref;return Object(G.jsx)(m.a,Object(s.a)(Object(s.a)({inputRef:a,className:p()("react-select",{"is-invalid":xe[t]})},c),{},{classNamePrefix:"select",options:n,value:n.find((function(e){return e.id===c.value})),onChange:function(e){return"countryId"===t&&(console.log(e.shortname),R(e.shortname),pe("CountryCode",e.shortname),"IN"===e.shortname?(pe("isGstRegistered",!0),Q(!0)):(pe("isGstRegistered",!1),Q(!1))),c.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),xe[t]&&Object(G.jsx)(S.I,{className:"text-danger",children:null===(c=xe[t])||void 0===c?void 0:c.message})]})]})};return Object(G.jsx)(l.Fragment,{children:Object(G.jsxs)(y.a,{blocking:ue,loader:Object(G.jsx)(be,{}),children:[Object(G.jsxs)("div",{className:"content-header mb-2 d-flex",children:[Object(G.jsxs)(S.B,{children:[Object(G.jsx)("h2",{className:"fw-bolder mb-75",children:"Organization Information"}),Object(G.jsx)("span",{children:"Enter Your Organization Details."})]}),Object(G.jsx)(S.B,{children:Object(G.jsxs)(S.wb,{tag:"li",className:"dropdown-user nav-item",children:[Object(G.jsx)(S.G,{href:"/",tag:"a",className:"nav-link dropdown-user-link",onClick:function(e){return e.preventDefault()},children:Object(G.jsx)(d.a,{content:null===(t=A.name)||void 0===t?void 0:t.charAt(0),className:"me-50",color:"light-primary"})}),Object(G.jsx)(S.F,{end:!0,style:{minWidth:"26rem"},children:Object(G.jsxs)(S.E,{tag:k.b,to:"/login",onClick:function(){return n(Object(u.c)())},children:[Object(G.jsx)(h.a,{size:14,className:"me-75"}),Object(G.jsx)("span",{className:"align-middle",children:"Logout"})]})})]})})]}),Object(G.jsxs)("form",{onSubmit:he(Ne),children:[Object(G.jsxs)(S.ib,{children:[Object(G.jsx)(S.B,{md:"6",children:we("Business Name","name",!0)}),Object(G.jsx)(S.B,{md:"6",children:we("Business E-mail","businessEmail",!0)}),Object(G.jsx)(S.B,{md:"6",children:we("Conatct No","contactNo",!0)}),Object(G.jsx)(S.B,{md:"6",children:Ce("Country","countryId",ie,!0)}),Object(G.jsx)(S.B,{md:"6",children:Ce("Currency","currencyId",se,!0)}),Object(G.jsx)(S.B,{md:"6"}),(null===P||"IN"===P)&&Object(G.jsxs)(l.Fragment,{children:[Object(G.jsx)(S.B,{md:"6",children:Ce("Business Type","businessTypeId",K,!0)}),Object(G.jsx)(S.B,{md:"6",children:Ce("Business Entity","businessEntityId",V,!0)}),Object(G.jsxs)(S.B,{md:"6",className:"mt-1",children:[Object(G.jsx)(S.N,{className:"form-label",for:"pincode",children:"Is GST Registered?"}),Object(G.jsx)("div",{className:"form-switch form-check-success",children:Object(G.jsx)(S.K,{type:"switch",id:"switch-success",name:"isGstRegistered",defaultChecked:!0,onChange:function(e){Q(e.target.checked),pe("isGstRegistered",e.target.checked)}})})]}),Object(G.jsx)(S.B,{md:"6",children:we("GSTIN","gstin",!!M)})]}),Object(G.jsx)(S.B,{sm:"12",children:we("Address","addressLine1",!0)}),Object(G.jsx)(S.B,{sm:12,children:we("Area, Street, Sector, Village","addressLine2",null===P||"IN"===P)}),Object(G.jsx)(S.B,{md:"6",children:null===P||"IN"===P?Ce("State","stateId",_,!0):we("State","stateOther",!1)}),Object(G.jsx)(S.B,{md:"6",children:we("Postal Code","pinZipCode",null===P||"IN"===P)}),Object(G.jsx)(S.B,{md:"6",children:we("Town/City","city",null===P||"IN"===P)})]}),Object(G.jsx)("div",{className:"d-flex justify-content-between mt-2",children:Object(G.jsxs)(S.i,{type:"submit",color:"success",className:"btn-next",children:[Object(G.jsx)("span",{className:"align-middle d-sm-inline-block d-none",children:"Submit"}),Object(G.jsx)(x.a,{size:14,className:"align-middle ms-sm-25 ms-0"})]})})]})]})})},Z=n(22);n(715),t.default=function(){var e=n(783).default;return Object(G.jsx)("div",{className:"auth-wrapper auth-cover",children:Object(G.jsxs)(S.ib,{className:"auth-inner m-0",children:[Object(G.jsxs)(k.b,{className:"brand-logo",to:"/",children:[Object(G.jsx)("img",{src:Z.a.app.appLogoImage,alt:"Turia Logo",width:45,height:35}),Object(G.jsx)("h1",{className:"brand-text text-primary",children:"Turia"})]}),Object(G.jsx)(S.B,{lg:"3",className:"d-none d-lg-flex align-items-center p-0",children:Object(G.jsx)("div",{className:"w-100 d-lg-flex align-items-center justify-content-center",children:Object(G.jsx)("img",{className:"img-fluid w-100",src:e,alt:"Login Cover"})})}),Object(G.jsx)(S.B,{lg:"9",className:"d-flex align-items-center auth-bg px-2 px-sm-3 px-lg-5 pt-3",children:Object(G.jsx)("div",{className:"width-700 mx-auto",children:Object(G.jsx)(R,{})})})]})})}},702:function(e,t,n){"use strict";var s=n(8),c=n(23),a=n(0),r=n(7),i=n.n(r),l=n(13),d=(n(704),n(2)),o=function(e){var t,n=e.children,r=e.blocking,l=e.loader,o=e.className,u=e.tag,j=e.overlayColor,b=u;return Object(d.jsxs)(b,{className:i()("ui-loader",(t={},Object(c.a)(t,o,o),Object(c.a)(t,"show",r),t)),children:[n,r?Object(d.jsxs)(a.Fragment,{children:[Object(d.jsx)("div",Object(s.a)({className:"overlay"},r&&j?{style:{backgroundColor:j}}:{})),Object(d.jsx)("div",{className:"loader",children:l})]}):null]})};t.a=o,o.defaultProps={tag:"div",blocking:!1,loader:Object(d.jsx)(l.jb,{color:"primary"})}},703:function(e,t,n){"use strict";var s=n(2);t.a=function(){return Object(s.jsx)("div",{className:"fallback-spinner",children:Object(s.jsxs)("div",{className:"loading",children:[Object(s.jsx)("div",{className:"effect-1 effects"}),Object(s.jsx)("div",{className:"effect-2 effects"}),Object(s.jsx)("div",{className:"effect-3 effects"})]})})}},704:function(e,t,n){},715:function(e,t,n){},783:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/create-account.9a7744ba.svg"}}]);
//# sourceMappingURL=51.a436c713.chunk.js.map