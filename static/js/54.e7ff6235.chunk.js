(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[54],{1511:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(5),i=n(8),s=n(10),r=n(12),o=n(0),l=n(6),d=n(747),u=n.n(d),j=n(332),b=n(253),m=n(365),f=n(184),p=n(742),v=n(744),O=n(745),x=n(14),h=n(7),g=n.n(h),N=n(198),w=n(61),y=n(735),I=n(736),A=(n(746),n(481),n(737),n(743),n(13)),C=n(790),k=n(23),S=n(25),z=n(21),P=n(28),F=n.n(P),B=n(3),T=Object(A.b)(),V=Object(A.a)(),_=Object(A.d)(),q=function(){var e=Object(o.useState)(!1),t=Object(r.a)(e,2),n=t[0],d=t[1],h=function(){return Object(B.jsx)(o.Fragment,{children:Object(B.jsx)(I.a,{})})},A={multiValue:function(e,t){return Object(s.a)(t),Object(i.a)(Object(i.a)({},e),{},{backgroundColor:"#7367f0"})}},P=Object(o.useState)([]),q=Object(r.a)(P,2),D=q[0],L=q[1],R=Object(o.useState)([]),E=Object(r.a)(R,2),G=E[0],H=E[1],M=Object(o.useState)([]),J=Object(r.a)(M,2),K=J[0],Y=J[1],Z=Object(o.useState)([]),U=Object(r.a)(Z,2),$=U[0],Q=U[1],W=Object(o.useState)([]),X=Object(r.a)(W,2),ee=X[0],te=X[1],ne=Object(o.useState)(0),ae=Object(r.a)(ne,2),ce=ae[0],ie=ae[1],se=Object(o.useState)(0),re=Object(r.a)(se,2),oe=re[0],le=re[1],de=Object(o.useState)([]),ue=Object(r.a)(de,2),je=ue[0],be=ue[1],me=Object(o.useState)({}),fe=Object(r.a)(me,2),pe=fe[0],ve=fe[1],Oe=Object(o.useState)([]),xe=Object(r.a)(Oe,2),he=xe[0],ge=xe[1],Ne=Object(o.useState)([]),we=Object(r.a)(Ne,2),ye=we[0],Ie=we[1],Ae=Object(o.useState)([]),Ce=Object(r.a)(Ae,2),ke=Ce[0],Se=Ce[1],ze=Object(o.useState)([]),Pe=Object(r.a)(ze,2),Fe=Pe[0],Be=Pe[1],Te=Object(o.useState)([]),Ve=Object(r.a)(Te,2),_e=Ve[0],qe=Ve[1],De=Object(o.useState)([]),Le=Object(r.a)(De,2),Re=Le[0],Ee=Le[1],Ge=Object(k.f)(),He=Object(z.b)(),Me=Object(z.c)((function(e){return e.proposal})),Je=v.d().shape({createdBy:v.f().default(_),contactId:v.f().required("Please select a Client"),uniqueIdentity:v.f(),contactEmail:v.f(),contactName:v.f(),invoiceDate:v.f(),paymentDue:v.f(),placeOfSupplyId:v.f().required("Please select a Place Of Supply"),subTotalAmount:v.f(),totalAmount:v.f(),totalTaxAmount:v.f(),organizationId:v.f().default(T),isRcmApplicable:v.b().default(!1),isgstregistered:v.b().default(null===V||void 0===V?void 0:V.isgstregistered),dueAmount:v.f(),billingAddressLine1:v.f(),billingAddressLine2:v.f(),billingAddressState:v.f(),billingAddressCity:v.f(),billingAddressZipCode:v.f(),billingCurrencyId:v.f().default(V.currencyid),bankAccountBankName:v.f(),bankAccountBranchName:v.f(),bankAccountHolderName:v.f(),bankAccountId:v.f().required("Please Select Account"),bankAccountIfscCode:v.f(),bankAccountNumber:v.f(),organizationAddressLine1:v.f().default(V.addressline1),organizationAddressLine2:v.f().default(V.addressline2),organizationCity:v.f().default(V.organizationcity),organizationState:v.f().default(V.statename),organizationZipCode:v.f().default(V.pinzipcode),organizationName:v.f().default(V.name),organizationImageUrl:v.f().default(V.organizationimageid||""),organizationStateCode:v.f().default(V.stateshortname),organizationGstin:v.f().default(V.gstin),gstin:v.f(),note:v.f().default(""),status:v.c().default(4),calculateTaxes:v.f(),paymentStatus:v.c().default(5),rows:v.a().of(v.d().shape({serviceId:v.f().required("Please Select Service Item"),invoiceId:v.f(),sacCode:v.f(),price:v.f(),organizationId:v.f().default(T),exemptionReasonId:v.f().default(""),isTaxApplicable:v.b().default(!0),actualPrice:v.f().required(),taxGroupId:v.f().required("Pleace Select Tax"),subTotalAmount:v.f().required(),taxes:v.f()}))}),Ke=Object(p.f)({resolver:Object(O.a)(Je),defaultValues:Je.cast()}),Ye=Ke.handleSubmit,Ze=Ke.formState.errors,Ue=Ke.control,$e=Ke.setValue,Qe=Object(p.e)({control:Ue,name:"rows"}),We=Qe.fields,Xe=Qe.append,et=Qe.remove,tt=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.a.post("/organizationusers/dropdown").then((function(e){var t=e.data.organizationusers;Ie(t)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He(Object(N.h)(t));case 2:n=e.sent,ve(n.payload);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){l.a.post("/clients/dropdown",{status:1}).then((function(e){var t=e.data;L(t.clients)})),l.a.post("/services/dropdown",{status:1}).then((function(e){var t=e.data;H(t.services)})),l.a.post("/taxgroups/dropdown").then((function(e){var t=e.data;Y(t.taxgroups)})),l.a.post("/exemptionreasons/dropdown").then((function(e){var t=e.data;Ee(t.exemptionreasons)})),l.a.post("/transactionaccounts/dropdown").then((function(e){var t=e.data;te(t.transactionaccounts);var n=t.transactionaccounts.find((function(e){return e.isPrimary}));n||(n=t.transactionaccounts.find((function(e){return"Cash"===e.accountBusinessName}))),Be(n),$e("bankAccountBankName",n.bankName),$e("bankAccountBranchName",n.branchAddress),$e("bankAccountHolderName",n.accountHolderName),$e("bankAccountId",n.id),$e("bankAccountIfscCode",n.ifscCode),$e("bankAccountNumber",n.accountNumber)})),l.a.post("/states/list").then((function(e){var t=e.data;Q(t.states)})),tt(),l.a.post("/organizationprefernces/getinvoiceprops").then((function(e){$e("note",e.data.organizationprefernces.invoicenote.replace(/(\\n)/g,"\n"))}))}),[]);var at=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.invoiceDate=F()(t.invoiceDate).valueOf(),t.paymentDue=F()(t.paymentDue).valueOf(),d(!0),n=t.rows,be(n),delete t.rows,e.next=8,He(Object(N.a)(t));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ct=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return je.forEach((function(e,n){je[n].invoiceId=t})),e.next=3,He(Object(N.b)(je));case 3:if(!(ke.length>0)){e.next=7;break}return n={users:ke,organizationId:T,invoiceId:t},e.next=7,He(Object(N.c)(n));case 7:Ge("/proposal/view/".concat(Me.invoiceId));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),it=function(){Xe({invoiceId:0,organizationId:T,serviceId:"",exemptionReasonId:"",isTaxApplicable:!0,sacCode:"",actualPrice:0,taxGroupId:"",subTotalAmount:0,taxPrice:0,description:""})};Object(o.useEffect)((function(){it()}),[]),Object(o.useEffect)(Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==Me.invoiceId&&je.length>0)){e.next=3;break}return e.next=3,ct(Me.invoiceId);case 3:case"end":return e.stop()}}),e)}))),[Me.invoiceId]);var st=function(){var e=Ue._formValues.rows,t=0,n=0,a=0;e.forEach((function(e){t=parseFloat(e.subTotalAmount)+parseFloat(t),n=parseFloat(e.price)+parseFloat(n),a=parseFloat(a)+parseFloat(e.taxPrice)})),Ue._formValues.subTotalAmount=n,Ue._formValues.totalAmount=t,Ue._formValues.dueAmount=t,Ue._formValues.totalTaxAmount=a,ie(t),le(n),function(){var e;e=Ue._formValues.rows.map((function(e){return e.taxes?Object(C.b)(e.taxes):[]})).flat().reduce((function(e,t){if(void 0!==t){var n=e.find((function(e){return t.taxName===e.taxName}));n?n.taxAmount=parseFloat(n.taxAmount)+parseFloat(t.taxAmount):e.push(Object.assign({},t))}return e}),[]),qe(e),$e("calculateTaxes",JSON.stringify(e))}()},rt=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Ue._formValues.rows[e]||{};if(void 0===o.serviceId||""===o.serviceId)return!1;var l=G.find((function(e){return e.id===o.serviceId}));$e("rows[".concat(e,"].serviceId"),o.serviceId),r?($e("rows[".concat(e,"].sacCode"),l.saccode),t=l.sellingprice||0,n=l.taxgroupid,$e("rows[".concat(e,"].actualPrice"),t),$e("rows[".concat(e,"].price"),String(l.sellingprice)||0),$e("rows[".concat(e,"].taxGroupId"),n),$e("rows[".concat(e,"].description"),l.description),$e("rows[".concat(e,"].exemptionReasonId"),l.exemptionreasonid||"")):($e("rows[".concat(e,"].sacCode"),i?o.sacCode:l.saccode),t=c?o.price:l.sellingprice||0,n=s?o.taxGroupId:l.taxgroupid,$e("rows[".concat(e,"].price"),t),$e("rows[".concat(e,"].actualPrice"),String(l.sellingprice)||0),$e("rows[".concat(e,"].taxGroupId"),n),$e("rows[".concat(e,"].description"),a?o.description:l.description),$e("rows[".concat(e,"].exemptionReasonId"),l.exemptionreasonid||""));var d=0,u=[],j=K.find((function(e){return e.id===n})),b=void 0!==j?!j.nontaxableflag:l.istaxapplicable||!1;b=b&&(null===V||void 0===V?void 0:V.isgstregistered),$e("rows[".concat(e,"].isTaxApplicable"),b),b&&void 0!==j&&he.forEach((function(e){if(e.taxid===n){var a;a=Object(C.a)(t,e.percentage,2),d=parseFloat(d)+parseFloat(a);var c={};c.taxName="".concat(e.name," (").concat(e.percentage,"%)"),c.taxId=parseInt(e.id),c.taxNameValue=e.name,c.taxPercentage=String(e.percentage),c.taxAmount=String(a),u.push(c)}})),$e("rows[".concat(e,"].subTotalAmount"),parseFloat(parseFloat(d||0)+parseFloat(t||0)).toFixed(2)),$e("rows[".concat(e,"].taxPrice"),parseFloat(d).toFixed(2)),$e("rows[".concat(e,"].taxes"),JSON.stringify(u)),$e("rows[".concat(e,"].createdBy"),_),st()},ot=function(){var e=1;V.stateid===Ue._formValues.placeOfSupplyId&&(e=2),function(e){var t={type:e};l.a.post("/taxvalues/list",t).then((function(e){var t=e.data;ge(t.taxvalues)}))}(e)};Object(o.useEffect)((function(){he.length>0&&Ue._formValues.rows.forEach((function(e,t){rt(t,!1,!1,!1,!1,!1)}))}),[he]);var lt=function(e){var t=Array.isArray(e)?e.map((function(e){return e.id})):[];Se(t)};Object(o.useEffect)((function(){Object.keys(pe).length>0&&($e("billingAddressCity",pe.billingaddresscity||""),$e("billingAddressLine1",pe.billingaddressline1||""),$e("billingAddressLine2",pe.billingaddressline1||""),$e("billingAddressState",pe.billingaddressstatesname||""),$e("billingAddressZipCode",pe.billingaddresszip||""),$e("billingCurrencyId",pe.currencyid||V.currencyid),$e("billingCurrencySymbol",pe.currenciessymbol||""),$e("billingCurrencyShortName",pe.currenciescode||""),$e("billingCurrencyName",pe.currenciesname||""),$e("contactEmail",pe.email),$e("gstin",pe.gstin),$e("contactName",pe.name),$e("placeOfSupplyId",pe.placeofsupplyid),ot())}),[pe]);return Object(B.jsx)(y.a,{blocking:n,loader:Object(B.jsx)(h,{}),children:Object(B.jsx)("form",{onSubmit:Ye(at),children:Object(B.jsx)(x.ib,{className:"invoice-add",children:Object(B.jsxs)(o.Fragment,{children:[Object(B.jsx)(x.B,{xl:10,md:8,sm:12,children:Object(B.jsxs)(x.l,{className:"invoice-preview-card",children:[Object(B.jsxs)(x.m,{className:"invoice-padding pb-0",children:[function(){var e=Object.keys(Ze),t=[];return Array.isArray(e)&&e.forEach((function(e){var n;"rows"!==e&&t.push(Object(B.jsxs)(x.I,{children:["$",null===(n=Ze[e])||void 0===n?void 0:n.message]},e))})),t}(),Object(B.jsxs)("div",{className:"d-flex justify-content-between flex-md-row flex-column invoice-spacing mt-0",children:[Object(B.jsxs)("div",{children:[Object(B.jsx)("div",{className:"logo-wrapper",children:function(e){var t=["light-success","light-danger","light-warning","light-info","light-primary","light-secondary"][Math.floor(6*Math.random())];return Object(B.jsx)(w.a,{color:t,className:"me-50",content:null!==e?null===e||void 0===e?void 0:e.charAt(0):""})}(V.name)}),Object(B.jsx)("h3",{className:"text-primary invoice-logo",children:V.name}),Object(B.jsx)("p",{className:"card-text mb-25",children:V.addressline1}),Object(B.jsx)("p",{className:"card-text mb-25",children:V.addressline2}),Object(B.jsxs)("p",{className:"card-text mb-0",children:[V.organizationcity," - ",V.pinzipcode]}),Object(B.jsx)("p",{className:"card-text mb-0",children:V.statename})]}),Object(B.jsxs)("div",{className:"invoice-number-date mt-md-0 mt-2",children:[Object(B.jsxs)("div",{className:"d-flex align-items-center justify-content-md-end mb-1",children:[Object(B.jsx)("h4",{className:"invoice-title",children:"Profoma Invoice"}),Object(B.jsxs)(x.L,{className:"input-group-merge invoice-edit-input-group disabled",children:[Object(B.jsx)(x.M,{children:Object(B.jsx)(j.a,{size:15})}),Object(B.jsx)(x.K,{type:"number",className:"invoice-edit-input",value:3171,placeholder:"53634",disabled:!0})]})]}),Object(B.jsxs)("div",{className:"d-flex align-items-center justify-content-md-between mb-1",children:[Object(B.jsx)("span",{className:"title required",children:"Proposal Date"}),Object(B.jsx)(p.a,{control:Ue,name:"invoiceDate",id:"invoiceDate",render:function(e){var t=e.field;return Object(B.jsx)(u.a,{value:t.value,onChange:function(e,n){t.onChange(n)},options:{altInput:!0,altFormat:"M j, Y",dateFormat:"M j, Y"},className:"form-control invoice-edit-input date-picker"})}})]}),Object(B.jsxs)("div",{className:"d-flex align-items-center justify-content-md-between",children:[Object(B.jsx)("span",{className:"title required",children:"Due Date"}),Object(B.jsx)(p.a,{control:Ue,name:"paymentDue",id:"paymentDue",render:function(e){var t=e.field;return Object(B.jsx)(u.a,{value:t.value,onChange:function(e,n){t.onChange(n)},options:{altInput:!0,altFormat:"M j, Y",dateFormat:"M j, Y"},className:"form-control invoice-edit-input due-date-picker"})}})]})]})]})]}),Object(B.jsx)("hr",{className:"invoice-spacing"}),Object(B.jsxs)(x.m,{className:"invoice-padding pt-0",children:[Object(B.jsxs)(x.ib,{className:"row-bill-to invoice-spacing",children:[Object(B.jsxs)(x.B,{className:"col-bill-to ps-0",xl:"6",children:[Object(B.jsx)("h6",{className:"invoice-to-title required",children:"Proposal To"}),Object(B.jsx)("div",{className:"invoice-customer",children:Object(B.jsx)(p.a,{control:Ue,name:"contactId",id:"contactId",render:function(e){var t=e.field,n=e.ref;return Object(B.jsx)(f.a,Object(i.a)(Object(i.a)({inputRef:n,className:g()("react-select",{"is-invalid":Ze.contactId})},t),{},{classNamePrefix:"select",options:D,value:D.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),nt(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}})}),Object(B.jsx)(x.B,{className:"pe-0 mt-xl-2",xl:"4",children:Object(B.jsx)("table",{children:Object(B.jsxs)("tbody",{children:[Object(B.jsx)("tr",{children:Object(B.jsx)("td",{children:pe.billingaddressline1})}),Object(B.jsx)("tr",{children:Object(B.jsx)("td",{children:pe.billingaddressline2})}),Object(B.jsx)("tr",{children:Object(B.jsxs)("td",{children:[pe.billingaddresscity," ",pe.billingaddresszip&&"-","  ",pe.billingaddresszip]})}),Object(B.jsx)("tr",{children:Object(B.jsx)("td",{children:pe.billingaddressstatesname})})]})})})]}),Object(B.jsx)(x.B,{className:"col-bill-to ps-0",xl:"2"}),Object(B.jsxs)(x.B,{className:"pe-0 mt-xl-0 mt-2",xl:"4",children:[Object(B.jsx)("h6",{className:"mb-2",children:"Payment Details"}),Object(B.jsx)("table",{children:Object(B.jsxs)("tbody",{children:[Object(B.jsxs)("tr",{children:[Object(B.jsx)("td",{className:"pe-1",children:"Bank Name:"}),Object(B.jsx)("td",{children:(null===Fe||void 0===Fe?void 0:Fe.bankName)&&Object(B.jsx)("span",{className:"fw-bolder",children:null===Fe||void 0===Fe?void 0:Fe.bankName})})]}),Object(B.jsxs)("tr",{children:[Object(B.jsx)("td",{className:"pe-1",children:"Account name:"}),Object(B.jsx)("td",{children:(null===Fe||void 0===Fe?void 0:Fe.accountHolderName)&&Object(B.jsx)("span",{className:"fw-bolder",children:null===Fe||void 0===Fe?void 0:Fe.accountHolderName})})]}),Object(B.jsxs)("tr",{children:[Object(B.jsx)("td",{className:"pe-1",children:"Branch Name:"}),Object(B.jsxs)("td",{children:[" ",(null===Fe||void 0===Fe?void 0:Fe.branchAddress)&&Object(B.jsx)("span",{className:"fw-bolder",children:null===Fe||void 0===Fe?void 0:Fe.branchAddress})]})]}),Object(B.jsxs)("tr",{children:[Object(B.jsx)("td",{className:"pe-1",children:"IFSC Code:"}),Object(B.jsx)("td",{children:(null===Fe||void 0===Fe?void 0:Fe.ifscCode)&&Object(B.jsxs)("span",{className:"fw-bolder",children:[null===Fe||void 0===Fe?void 0:Fe.ifscCode," "]})})]}),pe.currenciescode&&Object(B.jsxs)("tr",{children:[Object(B.jsx)("td",{className:"pe-1",children:"Currency code:"}),Object(B.jsx)("td",{children:pe.currenciescode})]})]})})]})]}),(null===V||void 0===V?void 0:V.isgstregistered)&&Object(B.jsxs)(x.ib,{className:"row-bill-to invoice-spacing",children:[Object(B.jsxs)(x.B,{className:"col-bill-to ps-0",xl:"6",children:[Object(B.jsx)("h6",{className:"invoice-to-title mt-2 required",children:"Place Of Supply"}),Object(B.jsx)("div",{className:"invoice-customer",children:Object(B.jsx)(p.a,{control:Ue,name:"placeOfSupplyId",id:"placeOfSupplyId",render:function(e){var t=e.field,n=e.ref;return Object(B.jsx)(f.a,Object(i.a)(Object(i.a)({inputRef:n,className:g()("react-select",{"is-invalid":Ze.placeOfSupplyId})},t),{},{classNamePrefix:"select",options:$,value:$.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),ot()},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}})}),""!==pe.gstin&&void 0!==pe.gstin&&Object(B.jsxs)("div",{className:"mt-1",children:[" GSTIN : ",pe.gstin]})]}),Object(B.jsx)(x.B,{className:"col-bill-to ps-0",xl:"2"})]})]}),Object(B.jsxs)(x.m,{className:"invoice-padding invoice-product-details",children:[We.map((function(e,t){var n,a,c,s,r,o,l,d,u,j,m,v,O,h,N,w;return Object(B.jsx)("div",{className:"repeater-wrapper",children:Object(B.jsx)(x.ib,{children:Object(B.jsxs)(x.B,{className:"d-lg-flex product-details-border position-relative pe-0",sm:"12",children:[Object(B.jsxs)(x.ib,{className:"w-100 pe-lg-0 pe-1 py-2",children:[Object(B.jsxs)(x.B,{className:"mb-lg-0 mb-2 mt-lg-0 mt-2 col-lg-4 col-sm-12",children:[Object(B.jsx)(x.u,{className:"col-title mb-md-50 mb-0",children:"Item"}),Object(B.jsx)(p.a,{control:Ue,name:"rows[".concat(t,"].serviceId"),rules:{required:!0},render:function(e){var n,a,c=e.field,s=e.ref;return Object(B.jsx)(f.a,Object(i.a)(Object(i.a)({},c),{},{inputRef:s,className:g()("react-select",{"is-invalid":null===(n=Ze.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.serviceId}),classNamePrefix:"select",options:G,value:G.find((function(e){return e.id===c.value})),onChange:function(e){c.onChange(e.id),rt(t,!1,!1,!1,!1,!0)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),(null===(n=Ze.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.serviceId)&&Object(B.jsx)(x.I,{children:null===(c=Ze.rows)||void 0===c||null===(s=c[t])||void 0===s?void 0:s.serviceId.message}),Object(B.jsx)(p.a,{id:"rows_".concat(t,"_description"),name:"rows[".concat(t,"].description"),control:Ue,render:function(e){var n,a,c=e.field;return Object(B.jsx)(x.K,Object(i.a)({className:"mt-1",invalid:(null===(n=Ze.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.description)&&!0,onInput:function(e){c.onChange(e),rt(t,!0,!1,!1,!1,!1)}},c))}})]}),(null===V||void 0===V?void 0:V.isgstregistered)&&Object(B.jsxs)(x.B,{className:"my-lg-0 my-2 col-lg-2 col-sm-12",children:[Object(B.jsx)(x.u,{className:"col-title mb-md-2 mb-0",children:"SAC Code"}),Object(B.jsx)(p.a,{id:"rows_".concat(t,"_sacCode"),name:"rows[".concat(t,"].sacCode"),control:Ue,render:function(e){var n,a,c=e.field;return Object(B.jsx)(x.K,Object(i.a)({type:"text",invalid:(null===(n=Ze.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.sacCode)&&!0,onInput:function(e){c.onChange(e),rt(t,!1,!0,!1,!1,!1)}},c))}}),(null===(r=Ze.rows)||void 0===r||null===(o=r[t])||void 0===o?void 0:o.sacCode)&&Object(B.jsx)(x.I,{children:null===(l=Ze.rows)||void 0===l||null===(d=l[t])||void 0===d?void 0:d.sacCode.message})]}),Object(B.jsxs)(x.B,{className:"my-lg-0 my-2",lg:"2",sm:"12",children:[Object(B.jsx)(x.u,{className:"col-title mb-md-2 mb-0",children:"Price"}),Object(B.jsx)(p.a,{id:"rows_".concat(t,"_price"),name:"rows[".concat(t,"].price"),control:Ue,render:function(e){var n,a,c=e.field;return Object(B.jsx)(x.K,Object(i.a)(Object(i.a)({type:"number",id:"input_rows_".concat(t,"_price"),onInput:function(e){c.onChange(e),rt(t,!1,!0,!1,!1,!1)}},c),{},{invalid:(null===(n=Ze.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.price)&&!0}))}}),(null===(u=Ze.rows)||void 0===u||null===(j=u[t])||void 0===j?void 0:j.price)&&Object(B.jsx)(x.I,{children:null===(m=Ze.rows)||void 0===m||null===(v=m[t])||void 0===v?void 0:v.price.message})]}),(null===V||void 0===V?void 0:V.isgstregistered)&&Object(B.jsxs)(x.B,{className:"my-lg-0 mt-2",lg:"2",sm:"12",children:[Object(B.jsx)(x.u,{className:"col-title mb-md-50 mb-0",children:"Tax Rate"}),Object(B.jsx)(p.a,{control:Ue,name:"rows[".concat(t,"].taxGroupId"),rules:{required:!0},render:function(e){var n,a,c=e.field,s=e.ref;return Object(B.jsx)(f.a,Object(i.a)(Object(i.a)({},c),{},{inputRef:s,className:g()("react-select",{"is-invalid":null===(n=Ze.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.taxGroupId}),classNamePrefix:"select",options:K,value:K.find((function(e){return e.id===c.value})),onChange:function(e){c.onChange(e.id),rt(t,!1,!0,!1,!0,!1)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),(null===(O=Ze.rows)||void 0===O||null===(h=O[t])||void 0===h?void 0:h.taxGroupId)&&Object(B.jsx)(x.I,{children:null===(N=Ze.rows)||void 0===N||null===(w=N[t])||void 0===w?void 0:w.taxGroupId.message}),!e.isTaxApplicable&&Object(B.jsx)(p.a,{control:Ue,name:"rows[".concat(t,"].exemptionReasonId"),rules:{required:!0},render:function(e){var n,a,c=e.field,s=e.ref;return Object(B.jsx)(f.a,Object(i.a)(Object(i.a)({},c),{},{inputRef:s,className:g()("react-select mt-1",{"is-invalid":null===(n=Ze.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.taxGroupId}),classNamePrefix:"select",options:Re,value:Re.find((function(e){return e.id===c.value})),onChange:function(e){c.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}})]}),Object(B.jsxs)(x.B,{className:"my-lg-0 mt-2",lg:"1",sm:"12",children:[Object(B.jsx)(x.u,{className:"col-title mb-md-50 mb-0",children:"Amount"}),Ue._formValues.rows[t].subTotalAmount]})]}),Object(B.jsx)("div",{className:"d-lg-flex justify-content-center border-start invoice-product-actions py-50 px-25",children:Object(B.jsx)(b.a,{size:18,className:"cursor-pointer",onClick:function(){et(t),st()}})})]})})},e.id)})),Object(B.jsx)(x.ib,{className:"mt-1",children:Object(B.jsx)(x.B,{sm:"12",className:"px-0",children:Object(B.jsxs)(x.i,{color:"primary",size:"sm",className:"btn-add-new",onClick:function(){return it()},children:[Object(B.jsx)(m.a,{size:14,className:"me-25"})," ",Object(B.jsx)("span",{className:"align-middle",children:"Add Item"})]})})})]}),Object(B.jsx)(x.m,{className:"invoice-padding",children:Object(B.jsxs)(x.ib,{className:"invoice-sales-total-wrapper",children:[Object(B.jsx)(x.B,{className:"mt-md-0 mt-3",md:{size:"6",order:1},xs:{size:12,order:2}}),Object(B.jsx)(x.B,{className:"d-flex justify-content-end",md:{size:"6",order:2},xs:{size:12,order:1},children:Object(B.jsxs)("div",{className:"invoice-total-wrapper",children:[Object(B.jsxs)("div",{className:"invoice-total-item",children:[Object(B.jsxs)("p",{className:"invoice-total-title",children:[(null===V||void 0===V?void 0:V.isgstregistered)&&"Pre Tax","  Amount:"]}),Object(B.jsx)("p",{className:"invoice-total-amount",children:oe})]}),(null===V||void 0===V?void 0:V.isgstregistered)&&Object(B.jsx)("div",{children:_e.map((function(e,t){return Object(B.jsxs)("div",{className:"invoice-total-item",children:[Object(B.jsx)("p",{className:"invoice-total-title",children:null===e||void 0===e?void 0:e.taxName}),Object(B.jsx)("p",{className:"invoice-total-amount",children:null===e||void 0===e?void 0:e.taxAmount})]},t)}))}),Object(B.jsx)("hr",{className:"my-50"}),Object(B.jsxs)("div",{className:"invoice-total-item",children:[Object(B.jsx)("p",{className:"invoice-total-title",children:"Total Payable:"}),Object(B.jsx)("p",{className:"invoice-total-amount",children:ce})]})]})})]})}),Object(B.jsx)("hr",{className:"invoice-spacing mt-0"}),Object(B.jsx)(x.m,{className:"invoice-padding py-0",children:Object(B.jsx)(x.ib,{children:Object(B.jsx)(x.B,{children:Object(B.jsxs)("div",{className:"mb-2",children:[Object(B.jsx)(x.N,{for:"note",className:"form-label fw-bold",children:"Note:"}),Object(B.jsx)(p.a,{id:"note",name:"note",control:Ue,render:function(e){var t=e.field;return Object(B.jsx)(x.K,Object(i.a)({type:"textarea",value:t.value,invalid:Ze.note&&!0},t))}})]})})})})]})}),Object(B.jsxs)(x.B,{xl:2,md:4,sm:12,children:[Object(B.jsx)(x.l,{className:"invoice-action-wrapper",children:Object(B.jsxs)(x.m,{children:[Object(B.jsx)(x.i,{color:"primary",type:"submit",block:!0,outline:!0,className:"mb-75",children:"Save"}),Object(B.jsx)(x.i,{color:"warning",block:!0,outline:!0,tag:S.b,to:"/proposal/list",children:"Cancel"})]})}),Object(B.jsx)("div",{className:"mt-2",children:Object(B.jsxs)("div",{className:"invoice-payment-option",children:[Object(B.jsx)("p",{className:"mb-50 required",children:"Accept payments via"}),Object(B.jsx)(p.a,{control:Ue,name:"bankAccountId",rules:{required:!0},render:function(e){var t=e.field,n=e.ref;return Object(B.jsx)(f.a,Object(i.a)(Object(i.a)({},t),{},{inputRef:n,className:g()("react-select mt-1",{"is-invalid":Ze.bankAccountId}),classNamePrefix:"select",options:ee,value:ee.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),function(e){var t=ee.find((function(t){return t.id===e}));Be(t),$e("bankAccountBankName",t.bankName),$e("bankAccountBranchName",t.branchAddress),$e("bankAccountHolderName",t.accountHolderName),$e("bankAccountId",t.id),$e("bankAccountIfscCode",t.ifscCode),$e("bankAccountNumber",t.accountNumber)}(e.id)},getOptionLabel:function(e){return e.accountHolderName},getOptionValue:function(e){return e.id}}))}})]})}),Object(B.jsx)("div",{className:"mt-2",children:Object(B.jsxs)("div",{className:"invoice-payment-option",children:[Object(B.jsx)("p",{className:"mb-50",children:"Select Employee"}),Object(B.jsx)(p.a,{control:Ue,name:"reviewer",id:"reviewer",render:function(e){var t=e.field,n=e.value,a=e.ref;return Object(B.jsx)(f.a,Object(i.a)(Object(i.a)({inputRef:a,className:g()("react-select",{"is-invalid":Ze.reviewer})},t),{},{classNamePrefix:"select",options:ye,isMulti:!0,value:n,onChange:lt,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},styles:A}))}})]})})]})]})})})})};t.default=function(){return Object(B.jsx)("div",{className:"invoice-add-wrapper",children:Object(B.jsx)(q,{})})}},735:function(e,t,n){"use strict";var a=n(8),c=n(27),i=n(0),s=n(7),r=n.n(s),o=n(14),l=(n(738),n(3)),d=function(e){var t,n=e.children,s=e.blocking,o=e.loader,d=e.className,u=e.tag,j=e.overlayColor,b=u;return Object(l.jsxs)(b,{className:r()("ui-loader",(t={},Object(c.a)(t,d,d),Object(c.a)(t,"show",s),t)),children:[n,s?Object(l.jsxs)(i.Fragment,{children:[Object(l.jsx)("div",Object(a.a)({className:"overlay"},s&&j?{style:{backgroundColor:j}}:{})),Object(l.jsx)("div",{className:"loader",children:o})]}):null]})};t.a=d,d.defaultProps={tag:"div",blocking:!1,loader:Object(l.jsx)(o.jb,{color:"primary"})}},736:function(e,t,n){"use strict";var a=n(3);t.a=function(){return Object(a.jsx)("div",{className:"fallback-spinner",children:Object(a.jsxs)("div",{className:"loading",children:[Object(a.jsx)("div",{className:"effect-1 effects"}),Object(a.jsx)("div",{className:"effect-2 effects"}),Object(a.jsx)("div",{className:"effect-3 effects"})]})})}},737:function(e,t,n){},738:function(e,t,n){},743:function(e,t,n){},746:function(e,t,n){},790:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var a=function(e,t,n){var a=0;return 1===n?a=parseFloat(e)-parseFloat(e)*(100/(100+parseFloat(t))):2===n&&(a=parseFloat(e)*parseFloat(t)/100),parseFloat(a)},c=function(e){return JSON.parse(Array.isArray(e)?JSON.stringify(e).replace(/\\/g,""):e.replace(/\\/g,""))}}}]);
//# sourceMappingURL=54.e7ff6235.chunk.js.map