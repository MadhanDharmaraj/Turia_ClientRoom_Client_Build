(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[27],{1403:function(e,t,c){"use strict";c.r(t);var n=c(3),a=c(5),i=c(8),s=c(12),r=c(10),o=c(0),l=c(6),d=c(715),u=c.n(d),j=c(299),b=c(224),m=c(332),f=c(183),p=c(704),O=c(707),x=c(708),v=c(774),h=c(13),g=c(7),N=c.n(g),y=c(187),w=c(135),I=c(700),A=c(701),C=(c(723),c(446),c(709),c(719),c(20)),S=c(743),k=c(22),z=c(25),P=c(21),B=c(42),T=c.n(B),F=c(2),V=Object(C.b)(),_=Object(C.a)(),q=Object(C.d)(),D=function(){var e,t,c,d=Object(o.useState)(!1),g=Object(r.a)(d,2),C=g[0],B=g[1],D=function(){return Object(F.jsx)(o.Fragment,{children:Object(F.jsx)(A.a,{})})},L={multiValue:function(e,t){return Object(s.a)(t),Object(i.a)(Object(i.a)({},e),{},{backgroundColor:"#7367f0"})}},E=Object(k.e)().search,G=new URLSearchParams(E),R=Object(o.useState)([]),H=Object(r.a)(R,2),K=H[0],J=H[1],U=Object(o.useState)([]),Z=Object(r.a)(U,2),M=Z[0],$=Z[1],Q=Object(o.useState)([]),W=Object(r.a)(Q,2),X=W[0],Y=W[1],ee=Object(o.useState)([]),te=Object(r.a)(ee,2),ce=te[0],ne=te[1],ae=Object(o.useState)([]),ie=Object(r.a)(ae,2),se=ie[0],re=ie[1],oe=Object(o.useState)(0),le=Object(r.a)(oe,2),de=le[0],ue=le[1],je=Object(o.useState)(0),be=Object(r.a)(je,2),me=be[0],fe=be[1],pe=Object(o.useState)(0),Oe=Object(r.a)(pe,2),xe=Oe[0],ve=Oe[1],he=Object(o.useState)(0),ge=Object(r.a)(he,2),Ne=ge[0],ye=ge[1],we=Object(o.useState)([]),Ie=Object(r.a)(we,2),Ae=Ie[0],Ce=Ie[1],Se=Object(o.useState)({}),ke=Object(r.a)(Se,2),ze=ke[0],Pe=ke[1],Be=Object(o.useState)([]),Te=Object(r.a)(Be,2),Fe=Te[0],Ve=Te[1],_e=Object(o.useState)([]),qe=Object(r.a)(_e,2),De=qe[0],Le=qe[1],Ee=Object(o.useState)([]),Ge=Object(r.a)(Ee,2),Re=Ge[0],He=Ge[1],Ke=Object(o.useState)([]),Je=Object(r.a)(Ke,2),Ue=Je[0],Ze=Je[1],Me=Object(o.useState)([]),$e=Object(r.a)(Me,2),Qe=$e[0],We=$e[1],Xe=Object(o.useState)([]),Ye=Object(r.a)(Xe,2),et=Ye[0],tt=Ye[1],ct=Object(o.useState)(null),nt=Object(r.a)(ct,2),at=nt[0],it=nt[1],st=Object(k.f)(),rt=Object(P.b)(),ot=Object(P.c)((function(e){return e.invoice})),lt=O.d().shape({createdBy:O.f().default(q),contactId:O.f().required("Please select a Client"),uniqueIdentity:O.f(),contactEmail:O.f(),contactName:O.f(),invoiceDate:O.f(),paymentDue:O.f(),placeOfSupplyId:O.f().required("Please select a Place Of Supply"),subTotalAmount:O.f(),totalAmount:O.f(),placeOfSupplyOthers:O.f().default(""),totalTaxAmount:O.f(),organizationId:O.f().default(V),isRcmApplicable:O.b().default(!1),isgstregistered:O.b().default(!0),dueAmount:O.f(),billingAddressLine1:O.f(),billingAddressLine2:O.f(),billingAddressState:O.f(),billingAddressCity:O.f(),billingAddressZipCode:O.f(),billingCurrencyId:O.f().default(_.currencyid),bankAccountBankName:O.f(),bankAccountBranchName:O.f(),bankAccountHolderName:O.f(),bankAccountId:O.f().required("Please Select Account"),billingAddressStateOthers:O.f().default(""),bankAccountIfscCode:O.f(),bankAccountNumber:O.f(),organizationAddressLine1:O.f().default(_.addressline1),organizationAddressLine2:O.f().default(_.addressline2),organizationCity:O.f().default(_.organizationcity),organizationState:O.f().default(_.statename),organizationStateOthers:O.f().default(null!==(e=_.stateothers)&&void 0!==e?e:""),organizationZipCode:O.f().default(_.pinzipcode),convertionAmount:O.f().default(0),organizationName:O.f().default(_.name),organizationImageUrl:O.f().default(_.organizationimageid||""),organizationStateCode:O.f().default(_.stateshortname),organizationGstin:O.f().default(_.gstin),gstin:O.f(),note:O.f().default(""),status:O.c().default(4),calculateTaxes:O.f(),paymentStatus:O.c().default(5),rows:O.a().of(O.d().shape({serviceId:O.f().required("Please Select Service Item"),invoiceId:O.f(),sacCode:O.f(),price:O.f(),organizationId:O.f().default(V),exemptionReasonId:O.f().default(""),isTaxApplicable:O.b().default(!0),actualPrice:O.f().required(),taxGroupId:O.f().required("Pleace Select Tax"),subTotalAmount:O.f().required(1),taxes:O.f()}))}),dt=Object(p.f)({resolver:Object(x.a)(lt),defaultValues:lt.cast()}),ut=dt.handleSubmit,jt=dt.formState.errors,bt=dt.control,mt=dt.setValue,ft=Object(p.e)({control:bt,name:"rows"}),pt=ft.fields,Ot=ft.append,xt=ft.remove,vt=function(){var e=Object(a.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.a.post("/organizationusers/dropdown").then((function(e){var t=e.data.organizationusers;We(t)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ht=function(){Ot({invoiceId:0,organizationId:V,serviceId:"",exemptionReasonId:0,isTaxApplicable:(null===_||void 0===_?void 0:_.isgstregistered)&&"IN"===ze.billingaddresscountriesshorcode,sacCode:"",actualPrice:0,taxGroupId:"",subTotalAmount:0,taxPrice:0,description:""})},gt=function(){var e=Object(a.a)(Object(n.a)().mark((function e(t){var c;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt(Object(y.i)(t));case 2:c=e.sent,Pe(c.payload);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){if(G.get("clientId")){var e=G.get("clientId");it(e),mt("contactId",null!==at&&void 0!==at?at:e),at||gt(null!==at&&void 0!==at?at:e)}}),[G]);Object(o.useEffect)((function(){l.a.post("/clients/dropdown",{status:1}).then((function(e){var t=e.data;J(t.clients)})),l.a.post("/services/dropdown",{status:1}).then((function(e){var t=e.data;$(t.services)})),l.a.post("/taxgroups/dropdown").then((function(e){var t=e.data;Y(t.taxgroups)})),l.a.post("/exemptionreasons/dropdown").then((function(e){var t=e.data;Ze(t.exemptionreasons)})),l.a.post("/transactionaccounts/dropdown").then((function(e){var t=e.data;re(t.transactionaccounts);var c=t.transactionaccounts.find((function(e){return e.isPrimary}));c||(c=t.transactionaccounts.find((function(e){return"Cash"===e.accountBusinessName}))),Le(c),mt("bankAccountBankName",c.bankName),mt("bankAccountBranchName",c.branchAddress),mt("bankAccountHolderName",c.accountHolderName),mt("bankAccountId",c.id),mt("bankAccountIfscCode",c.ifscCode),mt("bankAccountNumber",c.accountNumber)})),l.a.post("/states/list").then((function(e){var t=e.data;ne(t.states)})),l.a.post("/organizationprefernces/getinvoiceprops").then((function(e){mt("note",e.data.organizationprefernces.invoicenote.replace(/(\\n)/g,"\n"))})),vt()}),[]);var Nt=function(){var e=Object(a.a)(Object(n.a)().mark((function e(t){var c;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),t.invoiceDate=T()(t.invoiceDate).valueOf(),t.paymentDue=T()(t.paymentDue).valueOf(),c=t.rows,Ce(c),delete t.rows,e.next=8,rt(Object(y.a)(t));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yt=function(){var e=Object(a.a)(Object(n.a)().mark((function e(t){var c;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ae.forEach((function(e,c){Ae[c].invoiceId=t})),e.next=3,rt(Object(y.b)(Ae));case 3:if(!(et.length>0)){e.next=7;break}return c={users:et,organizationId:V,invoiceId:t},e.next=7,rt(Object(y.c)(c));case 7:st("/proposal/view/".concat(ot.invoiceId));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){ht()}),[]),Object(o.useEffect)(Object(a.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==ot.invoiceId&&Ae.length>0)){e.next=3;break}return e.next=3,yt(ot.invoiceId);case 3:case"end":return e.stop()}}),e)}))),[ot.invoiceId]);var wt=function(){var e=bt._formValues.rows,t=0,c=0,n=0;e.forEach((function(e){t=parseFloat(e.subTotalAmount)+parseFloat(t),c=parseFloat(e.price)+parseFloat(c),n=parseFloat(n)+parseFloat(e.taxPrice)})),bt._formValues.subTotalAmount=c,bt._formValues.totalAmount=t,bt._formValues.dueAmount=t,bt._formValues.totalTaxAmount=n,ue(t),ye(parseFloat(xe*t).toFixed(2)),fe(c),function(){var e=[];e=bt._formValues.rows.map((function(e){return e.taxes?Object(S.b)(e.taxes):[]})).flat();var t=[];null!==_&&void 0!==_&&_.isgstregistered&&null!==_&&void 0!==_&&_.isgstregistered&&"IN"===ze.billingaddresscountriesshorcode&&(t=e.reduce((function(e,t){if(void 0!==t){var c=e.find((function(e){return t.taxName===e.taxName}));c?c.taxAmount=parseFloat(c.taxAmount)+parseFloat(t.taxAmount):e.push(Object.assign({},t))}return e}),[])),He(t),mt("calculateTaxes",JSON.stringify(t))}()},It=function(e){var t,c,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=bt._formValues.rows[e];if(void 0===o.serviceId||""===o.serviceId)return!1;var l=M.find((function(e){return e.id===o.serviceId}));mt("rows[".concat(e,"].serviceId"),o.serviceId),r?(mt("rows[".concat(e,"].sacCode"),l.saccode),t=l.sellingprice||0,c=l.taxgroupid,mt("rows[".concat(e,"].actualPrice"),t),mt("rows[".concat(e,"].price"),String(l.sellingprice)||0),mt("rows[".concat(e,"].taxGroupId"),c),mt("rows[".concat(e,"].description"),l.description),mt("rows[".concat(e,"].exemptionReasonId"),l.exemptionreasonid||"")):(mt("rows[".concat(e,"].sacCode"),i?o.sacCode:l.saccode),t=a?o.price:l.sellingprice||0,c=s?o.taxGroupId:l.taxgroupid,mt("rows[".concat(e,"].price"),t),mt("rows[".concat(e,"].actualPrice"),String(l.sellingprice)||0),mt("rows[".concat(e,"].taxGroupId"),c),mt("rows[".concat(e,"].description"),n?o.description:l.description),mt("rows[".concat(e,"].exemptionReasonId"),l.exemptionreasonid||""));var d=0,u=[],j=X.find((function(e){return e.id===c})),b=void 0!==j?!j.nontaxableflag:l.istaxapplicable||!1;b=b&&(null===_||void 0===_?void 0:_.isgstregistered)&&(null===_||void 0===_?void 0:_.isgstregistered)&&"IN"===ze.billingaddresscountriesshorcode,mt("rows[".concat(e,"].isTaxApplicable"),b),b&&void 0!==j&&Fe.forEach((function(e){if(e.taxid===c){var n;n=Object(S.a)(t,e.percentage,2),d=parseFloat(d)+parseFloat(n);var a={};a.taxName="".concat(e.name," (").concat(e.percentage,"%)"),a.taxId=parseInt(e.id),a.taxNameValue=e.name,a.taxPercentage=String(e.percentage),a.taxAmount=String(n),u.push(a)}})),mt("rows[".concat(e,"].subTotalAmount"),parseFloat(parseFloat(d||0)+parseFloat(t||0)).toFixed(2)),mt("rows[".concat(e,"].taxPrice"),parseFloat(d).toFixed(2)),mt("rows[".concat(e,"].taxes"),JSON.stringify(u)),mt("rows[".concat(e,"].createdBy"),q),wt()},At=function(){var e=1;_.stateid===bt._formValues.placeOfSupplyId&&(e=2),function(e){var t={type:e};l.a.post("/taxvalues/list",t).then((function(e){var t=e.data;Ve(t.taxvalues)}))}(e)};Object(o.useEffect)((function(){Fe.length>0&&bt._formValues.rows.forEach((function(e,t){It(t,!1,!1,!1,!1,!1)}))}),[Fe]);Object(o.useEffect)(Object(a.a)(Object(n.a)().mark((function e(){var t,c,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object.keys(ze).length>0)){e.next=26;break}if(mt("billingAddressCity",ze.billingaddresscity||""),mt("billingAddressLine1",ze.billingaddressline1||""),mt("billingAddressLine2",ze.billingaddressline2||""),mt("billingAddressState",ze.billingaddressstatesname||""),mt("billingAddressZipCode",ze.billingaddresszip||""),mt("billingCurrencyId",ze.currencyid||_.currencyid),mt("billingCurrencySymbol",ze.currenciessymbol||""),mt("billingCurrencyShortName",ze.currenciescode||""),mt("billingCurrencyName",ze.currenciesname||""),mt("billingCurrencyName",ze.currenciesname||""),mt("contactEmail",ze.email),mt("gstin",ze.gstin),mt("isgstregistered",(null===_||void 0===_?void 0:_.isgstregistered)&&"IN"===ze.billingaddresscountriesshorcode),mt("contactName",ze.name),mt("placeOfSupplyId",ze.placeofsupplyid),mt("convertionAmount","0"),xt(),ht(),null!==_&&void 0!==_&&_.isgstregistered&&"IN"===ze.billingaddresscountriesshorcode?At():(mt("billingAddressStateOthers",null!==(t=ze.billingaddressstateothers)&&void 0!==t?t:""),mt("placeOfSupplyOthers",null!==(c=ze.placeofsupplyothers)&&void 0!==c?c:"")),"IN"===ze.billingaddresscountriesshorcode){e.next=26;break}return e.next=23,Object(v.a)(ze.currenciescode.toUpperCase(),_.currencycode);case 23:a=e.sent,ve(a),mt("convertionAmount",a);case 26:case"end":return e.stop()}}),e)}))),[ze]);var Ct=function(e){var t=Array.isArray(e)?e.map((function(e){return e.id})):[];tt(t)};return Object(F.jsx)(I.a,{blocking:C,loader:Object(F.jsx)(D,{}),children:Object(F.jsx)("form",{onSubmit:ut(Nt),children:Object(F.jsx)(h.ib,{className:"invoice-add",children:Object(F.jsxs)(o.Fragment,{children:[Object(F.jsx)(h.B,{xl:10,md:8,sm:12,children:Object(F.jsxs)(h.l,{className:"invoice-preview-card",children:[Object(F.jsxs)(h.m,{className:"invoice-padding pb-0",children:[function(){var e=Object.keys(jt),t=[];return Array.isArray(e)&&e.forEach((function(e){var c;"rows"!==e&&t.push(Object(F.jsxs)(h.I,{children:["$",null===(c=jt[e])||void 0===c?void 0:c.message]},e))})),t}(),Object(F.jsxs)("div",{className:"d-flex justify-content-between flex-md-row flex-column invoice-spacing mt-0",children:[Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{className:"logo-wrapper",children:null===_.imageid?Object(F.jsx)(w.a,{color:"primary",className:"me-50",content:null!==_.name?null===(t=_.name)||void 0===t?void 0:t.charAt(0):""}):Object(F.jsx)("img",{referrerPolicy:"no-referrer",className:"rounded me-50",height:75,width:75,src:"https://drive.google.com/thumbnail?id=".concat(_.imageid,"&authuser=0"),alt:"Organisation Logo"})}),Object(F.jsx)("h3",{className:"text-primary invoice-logo",children:_.name}),Object(F.jsx)("p",{className:"card-text mb-25",children:_.addressline1}),Object(F.jsx)("p",{className:"card-text mb-25",children:_.addressline2}),Object(F.jsxs)("p",{className:"card-text mb-0",children:[_.organizationcity," - ",_.pinzipcode]}),Object(F.jsx)("p",{className:"card-text mb-0",children:_.statename})]}),Object(F.jsxs)("div",{className:"invoice-number-date mt-md-0 mt-2",children:[Object(F.jsxs)("div",{className:"d-flex align-items-center justify-content-md-end mb-1",children:[Object(F.jsx)("h4",{className:"invoice-title",children:"Profoma Invoice"}),Object(F.jsxs)(h.L,{className:"input-group-merge invoice-edit-input-group disabled",children:[Object(F.jsx)(h.M,{children:Object(F.jsx)(j.a,{size:15})}),Object(F.jsx)(h.K,{type:"number",className:"invoice-edit-input",value:3171,placeholder:"53634",disabled:!0})]})]}),Object(F.jsxs)("div",{className:"d-flex align-items-center justify-content-md-between mb-1",children:[Object(F.jsx)("span",{className:"title required",children:"Profoma Invoice Date"}),Object(F.jsx)(p.a,{control:bt,name:"invoiceDate",id:"invoiceDate",render:function(e){var t=e.field;return Object(F.jsx)(u.a,{value:t.value,onChange:function(e,c){t.onChange(c)},options:{altInput:!0},className:"form-control invoice-edit-input date-picker"})}})]}),Object(F.jsxs)("div",{className:"d-flex align-items-center justify-content-md-between",children:[Object(F.jsx)("span",{className:"title required",children:"Due Date"}),Object(F.jsx)(p.a,{control:bt,name:"paymentDue",id:"paymentDue",render:function(e){var t=e.field;return Object(F.jsx)(u.a,{value:t.value,onChange:function(e,c){t.onChange(c)},options:{altInput:!0},className:"form-control invoice-edit-input due-date-picker"})}})]})]})]})]}),Object(F.jsx)("hr",{className:"invoice-spacing"}),Object(F.jsxs)(h.m,{className:"invoice-padding pt-0",children:[Object(F.jsxs)(h.ib,{className:"row-bill-to invoice-spacing",children:[Object(F.jsxs)(h.B,{className:"col-bill-to ps-0",xl:"6",children:[Object(F.jsx)("h6",{className:"invoice-to-title required",children:"Profoma Invoice To"}),Object(F.jsx)("div",{className:"invoice-customer",children:Object(F.jsx)(p.a,{control:bt,name:"contactId",id:"contactId",render:function(e){var t=e.field,c=e.ref;return Object(F.jsx)(f.a,Object(i.a)(Object(i.a)({inputRef:c,className:N()("react-select",{"is-invalid":jt.contactId})},t),{},{classNamePrefix:"select",options:K,value:K.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),gt(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}})}),Object(F.jsx)(h.B,{className:"pe-0 mt-xl-2",xl:"4",children:Object(F.jsx)("table",{children:Object(F.jsxs)("tbody",{children:[Object(F.jsx)("tr",{children:Object(F.jsx)("td",{children:ze.billingaddressline1})}),Object(F.jsx)("tr",{children:Object(F.jsx)("td",{children:ze.billingaddressline2})}),Object(F.jsx)("tr",{children:Object(F.jsxs)("td",{children:[ze.billingaddresscity," ",ze.billingaddresszip&&"-","  ",ze.billingaddresszip]})}),Object(F.jsx)("tr",{children:Object(F.jsx)("td",{children:null!==(c=ze.billingaddressstatesname)&&void 0!==c?c:ze.billingaddressstateothers})})]})})})]}),Object(F.jsx)(h.B,{className:"col-bill-to ps-0",xl:"2"}),Object(F.jsxs)(h.B,{className:"pe-0 mt-xl-0 mt-2",xl:"4",children:[Object(F.jsx)("h6",{className:"mb-2",children:"Payment Details:"}),Object(F.jsx)("table",{children:Object(F.jsxs)("tbody",{children:[Object(F.jsxs)("tr",{children:[Object(F.jsx)("td",{className:"pe-1",children:"Bank Name:"}),Object(F.jsx)("td",{children:De.bankName&&Object(F.jsx)("span",{className:"fw-bolder",children:De.bankName})})]}),Object(F.jsxs)("tr",{children:[Object(F.jsx)("td",{className:"pe-1",children:"Account name:"}),Object(F.jsx)("td",{children:De.accountHolderName&&Object(F.jsx)("span",{className:"fw-bolder",children:De.accountHolderName})})]}),Object(F.jsxs)("tr",{children:[Object(F.jsx)("td",{className:"pe-1",children:"Branch Name:"}),Object(F.jsxs)("td",{children:[" ",De.branchAddress&&Object(F.jsx)("span",{className:"fw-bolder",children:De.branchAddress})]})]}),Object(F.jsxs)("tr",{children:[Object(F.jsx)("td",{className:"pe-1",children:"IFSC Code:"}),Object(F.jsx)("td",{children:De.ifscCode&&Object(F.jsxs)("span",{className:"fw-bolder",children:[De.ifscCode," "]})})]}),Object(F.jsxs)("tr",{children:[Object(F.jsx)("td",{className:"pe-1",children:"Account Type:"}),Object(F.jsx)("td",{children:De.accountType&&Object(F.jsxs)("span",{className:"fw-bolder",children:[["","Saving","Current"][De.accountType]," "]})})]})]})})]})]}),(null===_||void 0===_?void 0:_.isgstregistered)&&Object(F.jsxs)(h.ib,{className:"row-bill-to invoice-spacing",children:[Object(F.jsxs)(h.B,{className:"col-bill-to ps-0",xl:"6",children:[Object(F.jsx)("h6",{className:"invoice-to-title mt-2 required",children:"Place Of Supply"}),Object(F.jsxs)("div",{className:"invoice-customer",children:[(null===_||void 0===_?void 0:_.isgstregistered)&&"IN"===ze.billingaddresscountriesshorcode&&Object(F.jsx)(p.a,{control:bt,name:"placeOfSupplyId",id:"placeOfSupplyId",render:function(e){var t=e.field,c=e.ref;return Object(F.jsx)(f.a,Object(i.a)(Object(i.a)({inputRef:c,className:N()("react-select",{"is-invalid":jt.placeOfSupplyId})},t),{},{classNamePrefix:"select",options:ce,value:ce.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),At()},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),(null===_||void 0===_?void 0:_.isgstregistered)&&"IN"!==ze.billingaddresscountriesshorcode&&(null===ze||void 0===ze?void 0:ze.placeofsupplyothers)]}),(null===_||void 0===_?void 0:_.isgstregistered)&&"IN"===ze.billingaddresscountriesshorcode&&Object(F.jsxs)("div",{className:"mt-1",children:[" GSTIN : ",ze.gstin]})]}),Object(F.jsx)(h.B,{className:"col-bill-to ps-0",xl:"2"}),Object(F.jsx)(h.B,{className:"pe-0 mt-xl-0 mt-2",xl:"4",children:Object(F.jsx)("table",{children:Object(F.jsx)("tbody",{children:Object(F.jsxs)("tr",{children:[Object(F.jsx)("td",{className:"invoice-to-title mt-2 ",children:"Currency Code:"}),Object(F.jsx)("td",{children:ze.currenciescode})]})})})})]})]}),Object(F.jsxs)(h.m,{className:"invoice-padding invoice-product-details",children:[pt.map((function(e,t){var c,n,a,s,r,o,l,d,u,j,m,O,x,v,g,y;return Object(F.jsx)("div",{className:"repeater-wrapper",children:Object(F.jsx)(h.ib,{children:Object(F.jsxs)(h.B,{className:"d-lg-flex product-details-border position-relative pe-0",sm:"12",children:[Object(F.jsxs)(h.ib,{className:"w-100 pe-lg-0 pe-1 py-2",children:[Object(F.jsxs)(h.B,{className:"mb-lg-0 mb-2 mt-lg-0 mt-2 col-lg-4 col-sm-12",children:[Object(F.jsx)(h.u,{className:"col-title mb-md-50 mb-0",children:"Item"}),Object(F.jsx)(p.a,{control:bt,name:"rows[".concat(t,"].serviceId"),rules:{required:!0},render:function(e){var c,n,a=e.field,s=e.ref;return Object(F.jsx)(f.a,Object(i.a)(Object(i.a)({},a),{},{inputRef:s,className:N()("react-select",{"is-invalid":null===(c=jt.rows)||void 0===c||null===(n=c[t])||void 0===n?void 0:n.serviceId}),classNamePrefix:"select",options:M,value:M.find((function(e){return e.id===a.value})),onChange:function(e){a.onChange(e.id),It(t,!1,!1,!1,!1,!0)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),(null===(c=jt.rows)||void 0===c||null===(n=c[t])||void 0===n?void 0:n.serviceId)&&Object(F.jsx)(h.I,{children:null===(a=jt.rows)||void 0===a||null===(s=a[t])||void 0===s?void 0:s.serviceId.message}),Object(F.jsx)(p.a,{id:"rows_".concat(t,"_description"),name:"rows[".concat(t,"].description"),control:bt,render:function(e){var c,n,a=e.field;return Object(F.jsx)(h.K,Object(i.a)({className:"mt-1",invalid:(null===(c=jt.rows)||void 0===c||null===(n=c[t])||void 0===n?void 0:n.description)&&!0,onInput:function(e){a.onChange(e),It(t,!0,!1,!1,!1,!1)}},a))}})]}),e.isTaxApplicable&&Object(F.jsxs)(h.B,{className:"my-lg-0 my-2 col-lg-2 col-sm-12",children:[Object(F.jsx)(h.u,{className:"col-title mb-md-2 mb-0",children:"SAC Code"}),Object(F.jsx)(p.a,{id:"rows_".concat(t,"_sacCode"),name:"rows[".concat(t,"].sacCode"),control:bt,render:function(e){var c,n,a=e.field;return Object(F.jsx)(h.K,Object(i.a)({type:"text",invalid:(null===(c=jt.rows)||void 0===c||null===(n=c[t])||void 0===n?void 0:n.sacCode)&&!0,onInput:function(e){a.onChange(e),It(t,!1,!0,!0,!1,!1)}},a))}}),(null===(r=jt.rows)||void 0===r||null===(o=r[t])||void 0===o?void 0:o.sacCode)&&Object(F.jsx)(h.I,{children:null===(l=jt.rows)||void 0===l||null===(d=l[t])||void 0===d?void 0:d.sacCode.message})]}),Object(F.jsxs)(h.B,{className:"my-lg-0 my-2",lg:"2",sm:"12",children:[Object(F.jsx)(h.u,{className:"col-title mb-md-2 mb-0",children:"Price"}),Object(F.jsx)(p.a,{id:"rows_".concat(t,"_price"),name:"rows[".concat(t,"].price"),control:bt,render:function(e){var c,n,a=e.field;return Object(F.jsx)(h.K,Object(i.a)(Object(i.a)({type:"number",id:"input_rows_".concat(t,"_price"),onInput:function(e){a.onChange(e),It(t,!1,!0,!1,!1,!1)}},a),{},{invalid:(null===(c=jt.rows)||void 0===c||null===(n=c[t])||void 0===n?void 0:n.price)&&!0}))}}),(null===(u=jt.rows)||void 0===u||null===(j=u[t])||void 0===j?void 0:j.price)&&Object(F.jsx)(h.I,{children:null===(m=jt.rows)||void 0===m||null===(O=m[t])||void 0===O?void 0:O.price.message})]}),e.isTaxApplicable&&Object(F.jsxs)(h.B,{className:"my-lg-0 mt-2",lg:"2",sm:"12",children:[Object(F.jsx)(h.u,{className:"col-title mb-md-50 mb-0",children:"Tax Rate"}),Object(F.jsx)(p.a,{control:bt,name:"rows[".concat(t,"].taxGroupId"),rules:{required:!0},render:function(e){var c,n,a=e.field,s=e.ref;return Object(F.jsx)(f.a,Object(i.a)(Object(i.a)({},a),{},{inputRef:s,className:N()("react-select",{"is-invalid":null===(c=jt.rows)||void 0===c||null===(n=c[t])||void 0===n?void 0:n.taxGroupId}),classNamePrefix:"select",options:X,value:X.find((function(e){return e.id===a.value})),onChange:function(e){a.onChange(e.id),It(t,!1,!0,!1,!0,!1)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),(null===(x=jt.rows)||void 0===x||null===(v=x[t])||void 0===v?void 0:v.taxGroupId)&&Object(F.jsx)(h.I,{children:null===(g=jt.rows)||void 0===g||null===(y=g[t])||void 0===y?void 0:y.taxGroupId.message}),!e.isTaxApplicable&&Object(F.jsx)(p.a,{control:bt,name:"rows[".concat(t,"].exemptionReasonId"),rules:{required:!0},render:function(e){var c,n,a=e.field,s=e.ref;return Object(F.jsx)(f.a,Object(i.a)(Object(i.a)({},a),{},{inputRef:s,className:N()("react-select mt-1",{"is-invalid":null===(c=jt.rows)||void 0===c||null===(n=c[t])||void 0===n?void 0:n.taxGroupId}),classNamePrefix:"select",options:Ue,value:Ue.find((function(e){return e.id===a.value})),onChange:function(e){a.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}})]}),Object(F.jsxs)(h.B,{className:"my-lg-0 mt-2",lg:"1",sm:"12",children:[Object(F.jsx)(h.u,{className:"col-title mb-md-50 mb-0",children:"Amount"}),bt._formValues.rows[t].subTotalAmount," ",null===ze||void 0===ze?void 0:ze.currenciessymbol]})]}),Object(F.jsx)("div",{className:"d-lg-flex justify-content-center border-start invoice-product-actions py-50 px-25",children:Object(F.jsx)(b.a,{size:18,className:"cursor-pointer",onClick:function(){xt(t),wt()}})})]})})},e.id)})),Object(F.jsx)(h.ib,{className:"mt-1",children:Object(F.jsx)(h.B,{sm:"12",className:"px-0",children:Object(F.jsxs)(h.i,{color:"primary",size:"sm",className:"btn-add-new",onClick:function(){return ht()},children:[Object(F.jsx)(m.a,{size:14,className:"me-25"})," ",Object(F.jsx)("span",{className:"align-middle",children:"Add Item"})]})})})]}),Object(F.jsx)(h.m,{className:"invoice-padding",children:Object(F.jsxs)(h.ib,{className:"invoice-sales-total-wrapper",children:[Object(F.jsx)(h.B,{className:"mt-md-0 mt-3",md:{size:"6",order:1},xs:{size:12,order:2},children:"IN"!==ze.billingaddresscountriesname&&Object(F.jsxs)("p",{children:["Amount in ",_.currencycode," : ",Ne," "]})}),Object(F.jsx)(h.B,{className:"d-flex justify-content-end",md:{size:"6",order:2},xs:{size:12,order:1},children:Object(F.jsxs)("div",{className:"invoice-total-wrapper",children:[Object(F.jsxs)("div",{className:"invoice-total-item",children:[Object(F.jsxs)("p",{className:"invoice-total-title",children:[(null===_||void 0===_?void 0:_.isgstregistered)&&(null===_||void 0===_?void 0:_.isgstregistered)&&"IN"===ze.billingaddresscountriesshorcode&&"Pre Tax","  Amount:"]}),Object(F.jsxs)("p",{className:"invoice-total-amount",children:[me," ",null===ze||void 0===ze?void 0:ze.currenciessymbol]})]}),(null===_||void 0===_?void 0:_.isgstregistered)&&(null===_||void 0===_?void 0:_.isgstregistered)&&"IN"===ze.billingaddresscountriesshorcode&&Object(F.jsx)("div",{children:Re.map((function(e,t){return Object(F.jsxs)("div",{className:"invoice-total-item",children:[Object(F.jsx)("p",{className:"invoice-total-title",children:null===e||void 0===e?void 0:e.taxName}),Object(F.jsxs)("p",{className:"invoice-total-amount",children:[null===e||void 0===e?void 0:e.taxAmount," ",null===ze||void 0===ze?void 0:ze.currenciessymbol]})]},t)}))}),Object(F.jsx)("hr",{className:"my-50"}),Object(F.jsxs)("div",{className:"invoice-total-item",children:[Object(F.jsx)("p",{className:"invoice-total-title",children:"Total Payable:"}),Object(F.jsxs)("p",{className:"invoice-total-amount",children:[de," ",null===ze||void 0===ze?void 0:ze.currenciessymbol]})]})]})})]})}),Object(F.jsx)("hr",{className:"invoice-spacing mt-0"}),Object(F.jsx)(h.m,{className:"invoice-padding py-0",children:Object(F.jsx)(h.ib,{children:Object(F.jsx)(h.B,{children:Object(F.jsxs)("div",{className:"mb-2",children:[Object(F.jsx)(h.N,{for:"note",className:"form-label fw-bold",children:"Note:"}),Object(F.jsx)(p.a,{id:"note",name:"note",control:bt,render:function(e){var t=e.field;return Object(F.jsx)(h.K,Object(i.a)({type:"textarea",value:t.value,invalid:jt.note&&!0},t))}})]})})})})]})}),Object(F.jsxs)(h.B,{xl:2,md:4,sm:12,children:[Object(F.jsx)(h.l,{className:"invoice-action-wrapper",children:Object(F.jsxs)(h.m,{children:[Object(F.jsx)(h.i,{color:"primary",type:"submit",block:!0,outline:!0,className:"mb-75",children:"Save"}),Object(F.jsx)(h.i,{color:"warning",block:!0,outline:!0,tag:z.b,to:"/invoice/list",children:"Cancel"})]})}),Object(F.jsx)("div",{className:"mt-2",children:Object(F.jsxs)("div",{className:"invoice-payment-option",children:[Object(F.jsx)("p",{className:"mb-50 required",children:"Accept payments via"}),Object(F.jsx)(p.a,{control:bt,name:"bankAccountId",rules:{required:!0},render:function(e){var t=e.field,c=e.ref;return Object(F.jsx)(f.a,Object(i.a)(Object(i.a)({},t),{},{inputRef:c,className:N()("react-select mt-1",{"is-invalid":jt.bankAccountId}),classNamePrefix:"select",options:se,value:se.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),function(e){var t=se.find((function(t){return t.id===e}));Le(t),mt("bankAccountBankName",t.bankName),mt("bankAccountBranchName",t.branchAddress),mt("bankAccountHolderName",t.accountHolderName),mt("bankAccountId",t.id),mt("bankAccountIfscCode",t.ifscCode),mt("bankAccountNumber",t.accountNumber)}(e.id)},getOptionLabel:function(e){return e.accountHolderName},getOptionValue:function(e){return e.id}}))}})]})}),Object(F.jsx)("div",{className:"mt-2",children:Object(F.jsxs)("div",{className:"invoice-payment-option",children:[Object(F.jsx)("p",{className:"mb-50",children:"Select Employee"}),Object(F.jsx)(p.a,{control:bt,name:"reviewer",id:"reviewer",render:function(e){var t=e.field,c=e.value,n=e.ref;return Object(F.jsx)(f.a,Object(i.a)(Object(i.a)({inputRef:n,className:N()("react-select",{"is-invalid":jt.reviewer})},t),{},{classNamePrefix:"select",options:Qe,isMulti:!0,value:c,onChange:Ct,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},styles:L}))}})]})})]})]})})})})},L=c(331),E=c(353),G=Object(C.b)(),R=Object(C.a)(),H=Object(C.d)(),K=function(e){var t=e.mainInd,c=e.refreshTax,n=e.taxGroupOptions,a=e.itemAmount,s=e.parentaxCallback,r=e.control,l=Object(p.e)({control:r,name:"rows[".concat(t,"].taxes")}),d=l.fields,u=l.append,j=l.remove,b=function(){u({taxGroupId:"",taxAmount:0,taxName:""})};Object(o.useEffect)((function(){var e;0===(null===(e=r._formValues.rows[t])||void 0===e?void 0:e.taxes.length)&&b()}),[]);var m=function(e,c){var i=n.find((function(t){return t.id===e})),r=Object(S.a)(a,i.percentage,2);s({taxAmount:r,taxName:i.name,taxGroupId:i.id},t,c)};return Object(o.useEffect)((function(){c&&r._formValues.rows[t].taxes.forEach((function(e,t){""!==e.taxGroupId&&m(e.taxGroupId,t)}))}),[c]),d.map((function(e,c){return Object(F.jsxs)(h.ib,{className:"d-flex align-items-center justify-content-between pe-lg-0 pe-1 py-50",md:12,children:[Object(F.jsx)(h.B,{md:6}),Object(F.jsx)(h.B,{md:1,className:"d-flex justify-content-end",children:c===d.length-1&&Object(F.jsx)(L.a,{size:"16",className:"text-primary",onClick:function(){return b()}})}),Object(F.jsx)(h.B,{className:"my-lg-0 mt-2",lg:"3",sm:"12",children:Object(F.jsx)(p.a,{control:r,name:"taxes[".concat(c,"].taxGroupId"),rules:{required:!0},render:function(e){var t=e.field,a=e.ref;return Object(F.jsx)(f.a,Object(i.a)(Object(i.a)({},t),{},{inputRef:a,className:N()("react-select"),classNamePrefix:"select",options:n,placeholder:"Select Tax Rate",value:n.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),m(e.id,c)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}})}),Object(F.jsx)(h.B,{className:"my-lg-0 mt-2",lg:"1",sm:"12",children:r._formValues.rows[t].taxes[c].taxAmount}),Object(F.jsx)(h.B,{className:"my-lg-0 mt-2",lg:"1",sm:"12",children:r._formValues.rows[t].taxes.length>1&&Object(F.jsx)("div",{className:"d-lg-flex justify-content-center border-start invoice-product-actions py-50 px-25",children:Object(F.jsx)(E.a,{size:16,onClick:function(){j(c)}})})})]},e.id)}))},J=function(){var e,t=Object(o.useState)(!1),c=Object(r.a)(t,2),d=c[0],b=c[1],v=function(){return Object(F.jsx)(o.Fragment,{children:Object(F.jsx)(A.a,{})})},g={multiValue:function(e,t){return Object(s.a)(t),Object(i.a)(Object(i.a)({},e),{},{backgroundColor:"#7367f0"})}},C=Object(o.useState)([]),S=Object(r.a)(C,2),B=S[0],V=S[1],_=Object(o.useState)([]),q=Object(r.a)(_,2),D=q[0],L=q[1],J=Object(o.useState)([]),U=Object(r.a)(J,2),Z=U[0],M=U[1],$=Object(o.useState)([]),Q=Object(r.a)($,2),W=Q[0],X=Q[1],Y=Object(o.useState)(0),ee=Object(r.a)(Y,2),te=ee[0],ce=ee[1],ne=Object(o.useState)(0),ae=Object(r.a)(ne,2),ie=ae[0],se=ae[1],re=Object(o.useState)(!1),oe=Object(r.a)(re,2),le=oe[0],de=oe[1],ue=Object(o.useState)([]),je=Object(r.a)(ue,2),be=je[0],me=je[1],fe=Object(o.useState)({}),pe=Object(r.a)(fe,2),Oe=pe[0],xe=pe[1],ve=Object(o.useState)([]),he=Object(r.a)(ve,2),ge=he[0],Ne=he[1],ye=Object(o.useState)([]),we=Object(r.a)(ye,2),Ie=we[0],Ae=we[1],Ce=Object(o.useState)([]),Se=Object(r.a)(Ce,2),ke=Se[0],ze=Se[1],Pe=Object(o.useState)([]),Be=Object(r.a)(Pe,2),Te=Be[0],Fe=Be[1],Ve=Object(k.f)(),_e=Object(P.b)(),qe=Object(P.c)((function(e){return e.invoice})),De=function(){var e=Object(a.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.a.post("/organizationusers/dropdown").then((function(e){var t=e.data.organizationusers;ze(t)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=Object(a.a)(Object(n.a)().mark((function e(t){var c;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(Object(y.i)(t));case 2:c=e.sent,xe(c.payload);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=O.d().shape({createdBy:O.f().default(H),contactId:O.f().required("Please select a Client"),uniqueIdentity:O.f(),contactEmail:O.f(),contactName:O.f(),invoiceDate:O.f(),paymentDue:O.f(),placeOfSupplyOthers:O.f().default(R.stateothers).required("Please select a Place Of Supply"),subTotalAmount:O.f(),totalAmount:O.f(),totalTaxAmount:O.f(),organizationId:O.f().default(G),isRcmApplicable:O.b().default(!1),dueAmount:O.f(),billingAddressLine1:O.f(),billingAddressLine2:O.f(),billingAddressState:O.f(),billingAddressCity:O.f(),billingAddressZipCode:O.f(),billingCurrencyId:O.f().default(R.currencyid),bankAccountBankName:O.f(),bankAccountType:O.f(),bankAccountHolderName:O.f(),bankAccountId:O.f().required("Please Select Account"),bankAccountNumber:O.f(),organizationAddressLine1:O.f().default(R.addressline1),organizationAddressLine2:O.f().default(R.addressline2),organizationCity:O.f().default(R.organizationcity),organizationStateOther:O.f().default(R.stateothers||""),organizationZipCode:O.f().default(R.pinzipcode),organizationName:O.f().default(R.name),organizationImageUrl:O.f().default(R.organizationimageid||""),organizationStateCode:O.f().default(R.stateothers),organizationGstin:O.f().default(R.gstin),gstin:O.f(),note:O.f().default(""),status:O.c().default(4),calculateTaxes:O.f(),paymentStatus:O.c().default(5),rows:O.a().of(O.d().shape({serviceId:O.f().required("Please Select Service Item"),invoiceId:O.f(),price:O.f(),organizationId:O.f().default(G),isTaxApplicable:O.b().default(!0),actualPrice:O.f().required(),subTotalAmount:O.f().required(1),taxes:O.a().of(O.d().shape({taxGroupId:O.f().required("Pleace Select Tax"),taxAmount:O.f().required(1),taxName:O.f()}))}))}),Ge=Object(p.f)({resolver:Object(x.a)(Ee),defaultValues:Ee.cast()}),Re=Ge.handleSubmit,He=Ge.formState.errors,Ke=Ge.control,Je=Ge.setValue,Ue=Object(p.e)({control:Ke,name:"rows"}),Ze=Ue.fields,Me=Ue.append,$e=Ue.remove;Object(o.useEffect)((function(){l.a.post("/clients/dropdown",{status:1}).then((function(e){var t=e.data;V(t.clients)})),l.a.post("/services/dropdown",{status:1}).then((function(e){var t=e.data;L(t.services)})),l.a.post("/taxgroups/dropdown",{country:R.countryshortname}).then((function(e){var t=e.data;M(t.taxgroups)})),l.a.post("/transactionaccounts/dropdown").then((function(e){var t=e.data;X(t.transactionaccounts)})),l.a.post("/organizationprefernces/getinvoiceprops").then((function(e){var t;Je("note",null===(t=e.data.organizationprefernces)||void 0===t?void 0:t.invoicenote.replace(/(\\n)/g,"\n"))})),De()}),[]);var Qe=function(){var e=Object(a.a)(Object(n.a)().mark((function e(t){var c;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),t.invoiceDate=T()(t.invoiceDate).valueOf(),t.paymentDue=T()(t.paymentDue).valueOf(),c=t.rows,me(c),delete t.rows,e.next=8,_e(Object(y.a)(t));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=Object(a.a)(Object(n.a)().mark((function e(t){var c;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return be.forEach((function(e,c){be[c].invoiceId=t})),e.next=3,_e(Object(y.b)(be));case 3:if(!(Te.length>0)){e.next=7;break}return c={users:Te,organizationId:G,invoiceId:t},e.next=7,_e(Object(y.c)(c));case 7:Ve("/proposal/view/".concat(qe.invoiceId));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xe=function(){Me({invoiceId:0,organizationId:G,serviceId:"",exemptionReasonId:"",isTaxApplicable:!0,sacCode:"",actualPrice:0,taxGroupId:"",subTotalAmount:0,taxPrice:0,description:"",taxes:[{taxGroupId:"",taxAmount:0,taxName:""}]})};Object(o.useEffect)((function(){Xe()}),[]),Object(o.useEffect)(Object(a.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==qe.invoiceId&&be.length>0)){e.next=3;break}return e.next=3,We(qe.invoiceId);case 3:case"end":return e.stop()}}),e)}))),[qe.invoiceId]);var Ye=function(){var e=Ke._formValues.rows,t=0,c=0,n=0;e.forEach((function(e){t=parseFloat(e.subTotalAmount)+parseFloat(t),c=parseFloat(e.price)+parseFloat(c),n=parseFloat(n)+parseFloat(e.taxPrice)})),Ke._formValues.subTotalAmount=c,Ke._formValues.totalAmount=t,Ke._formValues.dueAmount=t,Ke._formValues.totalTaxAmount=n,ce(t),se(c),function(){var e;e=Ke._formValues.rows.map((function(e){return e.taxes?e.taxes:[]})).flat().reduce((function(e,t){if(void 0!==t){var c=e.find((function(e){return t.taxName===e.taxName}));c?c.taxAmount=parseFloat(c.taxAmount)+parseFloat(t.taxAmount):e.push(Object.assign({},t))}return e}),[]),Ae(e),Je("calculateTaxes",JSON.stringify(e))}()},et=function(e){var t,c,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,d=Ke._formValues.rows[e];if(void 0===d.serviceId||""===d.serviceId)return!1;var u=D.find((function(e){return e.id===d.serviceId}));Je("rows[".concat(e,"].serviceId"),d.serviceId),r?(Je("rows[".concat(e,"].sacCode"),u.saccode),t=u.sellingprice||0,c=u.taxgroupid,Je("rows[".concat(e,"].actualPrice"),t),Je("rows[".concat(e,"].price"),String(u.sellingprice)||0),Je("rows[".concat(e,"].taxGroupId"),c),Je("rows[".concat(e,"].description"),u.description)):(Je("rows[".concat(e,"].sacCode"),i?d.sacCode:u.saccode),t=a?d.price:u.sellingprice||0,c=s?d.taxGroupId:u.taxgroupid,Je("rows[".concat(e,"].price"),t),Je("rows[".concat(e,"].actualPrice"),String(u.sellingprice)||0),Je("rows[".concat(e,"].taxGroupId"),c),Je("rows[".concat(e,"].description"),n?d.description:u.description));var j=0;if(Object.keys(o).length>0&&s){Ke._formValues.rows[e].taxes[l]=o;var b=Ke._formValues.rows[e].taxes;Je("rows[".concat(e,"].taxes"),b)}Ke._formValues.rows[e].taxes.forEach((function(e){j+=e.taxAmount})),Je("rows[".concat(e,"].isTaxApplicable"),!0),Je("rows[".concat(e,"].subTotalAmount"),parseFloat(parseFloat(j||0)+parseFloat(t||0)).toFixed(2)),Je("rows[".concat(e,"].taxPrice"),parseFloat(j).toFixed(2)),Je("rows[".concat(e,"].createdBy"),H),Ye()},tt=function(e,t,c){e&&(de(!1),et(t,!0,!0,!0,!0,!1,e,c))};Object(o.useEffect)((function(){Object.keys(Oe).length>0&&(Je("billingAddressCity",Oe.billingaddresscity||""),Je("billingAddressLine1",Oe.billingaddressline1||""),Je("billingAddressLine2",Oe.billingaddressline2||""),Je("billingAddressState",Oe.billingaddressstateothers||""),Je("billingAddressZipCode",Oe.billingaddresszip||""),Je("billingCurrencyId",Oe.currencyid||R.currencyid),Je("billingCurrencySymbol",Oe.currenciessymbol||""),Je("billingCurrencyShortName",Oe.currenciescode||""),Je("billingCurrencyName",Oe.currenciesname||""),Je("contactEmail",Oe.email),Je("gstin",Oe.gstin),Je("contactName",Oe.name),Je("placeOfSupplyOthers",Oe.placeofsupplyothers))}),[Oe]);var ct=function(e){var t=Array.isArray(e)?e.map((function(e){return e.id})):[];Fe(t)};return Object(F.jsx)(I.a,{blocking:d,loader:Object(F.jsx)(v,{}),children:Object(F.jsx)("form",{onSubmit:Re(Qe),children:Object(F.jsx)(h.ib,{className:"invoice-add",children:Object(F.jsxs)(o.Fragment,{children:[Object(F.jsx)(h.B,{xl:10,md:8,sm:12,children:Object(F.jsxs)(h.l,{className:"invoice-preview-card",children:[Object(F.jsxs)(h.m,{className:"invoice-padding pb-0",children:[function(){var e=Object.keys(He),t=[];return Array.isArray(e)&&e.forEach((function(e){var c;"rows"!==e&&t.push(Object(F.jsxs)(h.I,{children:["$",null===(c=He[e])||void 0===c?void 0:c.message]},e))})),t}(),Object(F.jsxs)("div",{className:"d-flex justify-content-between flex-md-row flex-column invoice-spacing mt-0",children:[Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{className:"logo-wrapper",children:null===R.imageid?Object(F.jsx)(w.a,{color:"primary",className:"me-50",content:null!==R.name?null===(e=R.name)||void 0===e?void 0:e.charAt(0):""}):Object(F.jsx)("img",{referrerPolicy:"no-referrer",className:"rounded me-50",height:75,width:75,src:"https://drive.google.com/thumbnail?id=".concat(R.imageid,"&authuser=0"),alt:"Organisation Logo"})}),Object(F.jsx)("h3",{className:"text-primary invoice-logo",children:R.name}),Object(F.jsx)("p",{className:"card-text mb-25",children:R.addressline1}),Object(F.jsx)("p",{className:"card-text mb-25",children:R.addressline2}),Object(F.jsxs)("p",{className:"card-text mb-0",children:[R.organizationcity," - ",R.pinzipcode]}),Object(F.jsx)("p",{className:"card-text mb-0",children:R.statename})]}),Object(F.jsxs)("div",{className:"invoice-number-date mt-md-0 mt-2",children:[Object(F.jsxs)("div",{className:"d-flex align-items-center justify-content-md-end mb-1",children:[Object(F.jsx)("h4",{className:"invoice-title",children:"Profoma Invoice"}),Object(F.jsxs)(h.L,{className:"input-group-merge invoice-edit-input-group disabled",children:[Object(F.jsx)(h.M,{children:Object(F.jsx)(j.a,{size:15})}),Object(F.jsx)(h.K,{type:"number",className:"invoice-edit-input",value:3171,placeholder:"53634",disabled:!0})]})]}),Object(F.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[Object(F.jsx)("span",{className:"title required",children:"Profoma Invoice Date"}),Object(F.jsx)(p.a,{control:Ke,name:"invoiceDate",id:"invoiceDate",render:function(e){var t=e.field;return Object(F.jsx)(u.a,{value:t.value,onChange:function(e,c){t.onChange(c)},options:{altInput:!0},className:"form-control invoice-edit-input date-picker"})}})]}),Object(F.jsxs)("div",{className:"d-flex align-items-center",children:[Object(F.jsx)("span",{className:"title required",children:"Due Date"}),Object(F.jsx)(p.a,{control:Ke,name:"paymentDue",id:"paymentDue",render:function(e){var t=e.field;return Object(F.jsx)(u.a,{value:t.value,onChange:function(e,c){t.onChange(c)},options:{altInput:!0},className:"form-control invoice-edit-input due-date-picker"})}})]})]})]})]}),Object(F.jsx)("hr",{className:"invoice-spacing"}),Object(F.jsxs)(h.m,{className:"invoice-padding pt-0",children:[Object(F.jsxs)(h.ib,{className:"row-bill-to invoice-spacing",children:[Object(F.jsxs)(h.B,{className:"col-bill-to ps-0",xl:"6",children:[Object(F.jsx)("h6",{className:"invoice-to-title required",children:"Profoma Invoice To"}),Object(F.jsx)("div",{className:"invoice-customer",children:Object(F.jsx)(p.a,{control:Ke,name:"contactId",id:"contactId",render:function(e){var t=e.field,c=e.ref;return Object(F.jsx)(f.a,Object(i.a)(Object(i.a)({inputRef:c,className:N()("react-select",{"is-invalid":He.contactId})},t),{},{classNamePrefix:"select",options:B,value:B.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),Le(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}})}),Object(F.jsx)(h.B,{className:"pe-0 mt-xl-2",xl:"4",children:Object(F.jsx)("table",{children:Object(F.jsxs)("tbody",{children:[Object(F.jsx)("tr",{children:Object(F.jsx)("td",{children:Oe.billingaddressline1})}),Object(F.jsx)("tr",{children:Object(F.jsx)("td",{children:Oe.billingaddressline2})}),Object(F.jsx)("tr",{children:Object(F.jsxs)("td",{children:[Oe.billingaddresscity," ",Oe.billingaddresszip&&"-","  ",Oe.billingaddresszip]})}),Object(F.jsx)("tr",{children:Object(F.jsx)("td",{children:Oe.billingaddressstateothers})})]})})})]}),Object(F.jsx)(h.B,{className:"col-bill-to ps-0",xl:"2"}),Object(F.jsxs)(h.B,{className:"pe-0 mt-xl-0 mt-2",xl:"4",children:[Object(F.jsx)("h6",{className:"mb-2",children:"Payment Details:"}),Object(F.jsx)("table",{children:Object(F.jsxs)("tbody",{children:[Object(F.jsxs)("tr",{children:[Object(F.jsx)("td",{className:"pe-1",children:"Bank Name:"}),Object(F.jsx)("td",{children:ge.bankName&&Object(F.jsx)("span",{className:"fw-bolder",children:ge.bankName})})]}),Object(F.jsxs)("tr",{children:[Object(F.jsx)("td",{className:"pe-1",children:"Account name:"}),Object(F.jsx)("td",{children:ge.accountHolderName&&Object(F.jsx)("span",{className:"fw-bolder",children:ge.accountHolderName})})]}),Object(F.jsxs)("tr",{children:[Object(F.jsx)("td",{className:"pe-1",children:"Branch Name:"}),Object(F.jsxs)("td",{children:[" ",ge.branchAddress&&Object(F.jsx)("span",{className:"fw-bolder",children:ge.branchAddress})]})]}),Object(F.jsxs)("tr",{children:[Object(F.jsx)("td",{className:"pe-1",children:"Account Type:"}),Object(F.jsx)("td",{children:ge.accountType&&Object(F.jsxs)("span",{className:"fw-bolder",children:[["","Saving","Checking"][ge.accountType]," "]})})]}),Oe.currenciescode&&Object(F.jsxs)("tr",{children:[Object(F.jsx)("td",{className:"pe-1",children:"Currency code:"}),Object(F.jsx)("td",{children:Oe.currenciescode})]})]})})]})]}),Object(F.jsxs)(h.ib,{className:"row-bill-to invoice-spacing",children:[Object(F.jsxs)(h.B,{className:"col-bill-to ps-0",xl:"6",children:[Object(F.jsx)("h6",{className:"invoice-to-title mt-2 required",children:"Place Of Supply"}),Object(F.jsx)(h.B,{className:"invoice-customer",lg:12,children:Object(F.jsx)(p.a,{control:Ke,name:"placeOfSupplyOthers",id:"placeOfSupplyOthers",render:function(e){var t=e.field;return Object(F.jsx)(h.K,Object(i.a)({className:"form-control col-12"},t))}})}),""!==Oe.gstin&&void 0!==Oe.gstin&&Object(F.jsxs)("div",{className:"mt-1",children:[" GSTIN : ",Oe.gstin]})]}),Object(F.jsx)(h.B,{className:"col-bill-to ps-0",xl:"2"})]})]}),Object(F.jsxs)(h.m,{className:"invoice-padding invoice-product-details",children:[Ze.map((function(e,t){var c,n,a,s,r,o,l,d;return Object(F.jsx)("div",{className:"repeater-wrapper",children:Object(F.jsxs)(h.ib,{className:"product-details-border",children:[Object(F.jsxs)(h.ib,{className:"d-lg-flex position-relative w-100 pe-lg-0 pe-1 py-50",md:12,children:[Object(F.jsxs)(h.B,{className:"mb-lg-0 mb-2 mt-lg-0 mt-2",md:3,sm:12,children:[Object(F.jsx)(h.u,{className:"col-title mb-md-50 mb-0",children:"Item"}),Object(F.jsx)(p.a,{control:Ke,name:"rows[".concat(t,"].serviceId"),rules:{required:!0},render:function(e){var c,n,a=e.field,s=e.ref;return Object(F.jsx)(f.a,Object(i.a)(Object(i.a)({},a),{},{inputRef:s,className:N()("react-select",{"is-invalid":null===(c=He.rows)||void 0===c||null===(n=c[t])||void 0===n?void 0:n.serviceId}),classNamePrefix:"select",options:D,value:D.find((function(e){return e.id===a.value})),onChange:function(e){a.onChange(e.id),de(!0),et(t,!1,!1,!1,!1,!0)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),(null===(c=He.rows)||void 0===c||null===(n=c[t])||void 0===n?void 0:n.serviceId)&&Object(F.jsx)(h.I,{children:null===(a=He.rows)||void 0===a||null===(s=a[t])||void 0===s?void 0:s.serviceId.message})]}),Object(F.jsx)(h.B,{lg:4,children:Object(F.jsx)(p.a,{id:"rows_".concat(t,"_description"),name:"rows[".concat(t,"].description"),control:Ke,render:function(e){var c,n,a=e.field;return Object(F.jsx)(h.K,Object(i.a)({placeholder:"Description",invalid:(null===(c=He.rows)||void 0===c||null===(n=c[t])||void 0===n?void 0:n.description)&&!0,onInput:function(e){a.onChange(e),et(t,!0,!1,!1,!1,!1)}},a))}})}),Object(F.jsxs)(h.B,{className:"my-lg-0 my-2",lg:"3",sm:"12",children:[Object(F.jsx)(h.u,{className:"col-title mb-md-2 mb-0",children:"Price"}),Object(F.jsx)(p.a,{id:"rows_".concat(t,"_price"),name:"rows[".concat(t,"].price"),control:Ke,render:function(e){var c,n,a=e.field;return Object(F.jsx)(h.K,Object(i.a)(Object(i.a)({type:"number",id:"input_rows_".concat(t,"_price"),onInput:function(e){a.onChange(e),et(t,!1,!0,!1,!1,!1),de(!0)}},a),{},{invalid:(null===(c=He.rows)||void 0===c||null===(n=c[t])||void 0===n?void 0:n.price)&&!0}))}}),(null===(r=He.rows)||void 0===r||null===(o=r[t])||void 0===o?void 0:o.price)&&Object(F.jsx)(h.I,{children:null===(l=He.rows)||void 0===l||null===(d=l[t])||void 0===d?void 0:d.price.message})]}),Object(F.jsxs)(h.B,{className:"my-lg-0 mt-2",lg:"1",sm:"12",children:[Object(F.jsx)(h.u,{className:"col-title mb-md-50 mb-0",children:"Amount"}),Ke._formValues.rows[t].subTotalAmount]}),Object(F.jsx)(h.B,{md:1,children:Object(F.jsx)("div",{className:"d-lg-flex justify-content-center border-start invoice-product-actions py-50 px-25",children:Object(F.jsx)(E.a,{size:18,className:"cursor-pointer",onClick:function(){$e(t),Ye()}})})})]}),Object(F.jsx)(K,{parentaxCallback:tt,refreshTax:le,taxGroupOptions:Z,mainInd:t,itemAmount:Ke._formValues.rows[t].price,errors:He,control:Ke})]})},e.id)})),Object(F.jsx)(h.ib,{className:"mt-1",children:Object(F.jsx)(h.B,{sm:"12",className:"px-0",children:Object(F.jsxs)(h.i,{color:"primary",size:"sm",className:"btn-add-new",onClick:function(){return Xe()},children:[Object(F.jsx)(m.a,{size:14,className:"me-25"})," ",Object(F.jsx)("span",{className:"align-middle",children:"Add Item"})]})})})]}),Object(F.jsx)(h.m,{className:"invoice-padding",children:Object(F.jsxs)(h.ib,{className:"invoice-sales-total-wrapper",children:[Object(F.jsx)(h.B,{className:"mt-md-0 mt-3",md:{size:"6",order:1},xs:{size:12,order:2}}),Object(F.jsx)(h.B,{className:"d-flex justify-content-end",md:{size:"6",order:2},xs:{size:12,order:1},children:Object(F.jsxs)("div",{className:"invoice-total-wrapper",children:[Object(F.jsxs)("div",{className:"invoice-total-item",children:[Object(F.jsx)("p",{className:"invoice-total-title",children:"Pre Tax Amount:"}),Object(F.jsx)("p",{className:"invoice-total-amount",children:ie})]}),Object(F.jsx)("div",{children:Ie.map((function(e,t){return Object(F.jsxs)("div",{className:"invoice-total-item",children:[Object(F.jsx)("p",{className:"invoice-total-title",children:null===e||void 0===e?void 0:e.taxName}),Object(F.jsx)("p",{className:"invoice-total-amount",children:null===e||void 0===e?void 0:e.taxAmount})]},t)}))}),Object(F.jsx)("hr",{className:"my-50"}),Object(F.jsxs)("div",{className:"invoice-total-item",children:[Object(F.jsx)("p",{className:"invoice-total-title",children:"Total Payable:"}),Object(F.jsx)("p",{className:"invoice-total-amount",children:te})]})]})})]})}),Object(F.jsx)("hr",{className:"invoice-spacing mt-0"}),Object(F.jsx)(h.m,{className:"invoice-padding py-0",children:Object(F.jsx)(h.ib,{children:Object(F.jsx)(h.B,{children:Object(F.jsxs)("div",{className:"mb-2",children:[Object(F.jsx)(h.N,{for:"note",className:"form-label fw-bold",children:"Note:"}),Object(F.jsx)(p.a,{id:"note",name:"note",control:Ke,render:function(e){var t=e.field;return Object(F.jsx)(h.K,Object(i.a)({type:"textarea",value:t.value,invalid:He.note&&!0},t))}})]})})})})]})}),Object(F.jsxs)(h.B,{xl:2,md:4,sm:12,children:[Object(F.jsx)(h.l,{className:"invoice-action-wrapper",children:Object(F.jsxs)(h.m,{children:[Object(F.jsx)(h.i,{color:"primary",type:"submit",block:!0,outline:!0,className:"mb-75",children:"Save"}),Object(F.jsx)(h.i,{color:"warning",block:!0,outline:!0,tag:z.b,to:"/invoice/list",children:"Cancel"})]})}),Object(F.jsx)("div",{className:"mt-2",children:Object(F.jsxs)("div",{className:"invoice-payment-option",children:[Object(F.jsx)("p",{className:"mb-50 required",children:"Accept payments via"}),Object(F.jsx)(p.a,{control:Ke,name:"bankAccountId",rules:{required:!0},render:function(e){var t=e.field,c=e.ref;return Object(F.jsx)(f.a,Object(i.a)(Object(i.a)({},t),{},{inputRef:c,className:N()("react-select mt-1",{"is-invalid":He.bankAccountId}),classNamePrefix:"select",options:W,value:W.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),function(e){var t=W.find((function(t){return t.id===e}));Ne(t),Je("bankAccountBankName",t.bankName),Je("bankAccountType",t.accountType),Je("bankAccountHolderName",t.accountHolderName),Je("bankAccountId",t.id),Je("bankAccountNumber",t.accountNumber)}(e.id)},getOptionLabel:function(e){return e.accountHolderName},getOptionValue:function(e){return e.id}}))}})]})}),Object(F.jsx)("div",{className:"mt-2",children:Object(F.jsxs)("div",{className:"invoice-payment-option",children:[Object(F.jsx)("p",{className:"mb-50",children:"Select Employee"}),Object(F.jsx)(p.a,{control:Ke,name:"reviewer",id:"reviewer",render:function(e){var t=e.field,c=e.value,n=e.ref;return Object(F.jsx)(f.a,Object(i.a)(Object(i.a)({inputRef:n,className:N()("react-select",{"is-invalid":He.reviewer})},t),{},{classNamePrefix:"select",options:ke,isMulti:!0,value:c,onChange:ct,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},styles:g}))}})]})})]})]})})})})},U=Object(C.a)();t.default=function(){return Object(F.jsx)("div",{className:"invoice-add-wrapper",children:"IN"===U.countryshortname?Object(F.jsx)(D,{}):Object(F.jsx)(J,{})})}},700:function(e,t,c){"use strict";var n=c(8),a=c(24),i=c(0),s=c(7),r=c.n(s),o=c(13),l=(c(702),c(2)),d=function(e){var t,c=e.children,s=e.blocking,o=e.loader,d=e.className,u=e.tag,j=e.overlayColor,b=u;return Object(l.jsxs)(b,{className:r()("ui-loader",(t={},Object(a.a)(t,d,d),Object(a.a)(t,"show",s),t)),children:[c,s?Object(l.jsxs)(i.Fragment,{children:[Object(l.jsx)("div",Object(n.a)({className:"overlay"},s&&j?{style:{backgroundColor:j}}:{})),Object(l.jsx)("div",{className:"loader",children:o})]}):null]})};t.a=d,d.defaultProps={tag:"div",blocking:!1,loader:Object(l.jsx)(o.jb,{color:"primary"})}},701:function(e,t,c){"use strict";var n=c(2);t.a=function(){return Object(n.jsx)("div",{className:"fallback-spinner",children:Object(n.jsxs)("div",{className:"loading",children:[Object(n.jsx)("div",{className:"effect-1 effects"}),Object(n.jsx)("div",{className:"effect-2 effects"}),Object(n.jsx)("div",{className:"effect-3 effects"})]})})}},702:function(e,t,c){},709:function(e,t,c){},719:function(e,t,c){},723:function(e,t,c){},743:function(e,t,c){"use strict";c.d(t,"a",(function(){return n})),c.d(t,"b",(function(){return a}));var n=function(e,t,c){var n=0;return 1===c?n=parseFloat(e)-parseFloat(e)*(100/(100+parseFloat(t))):2===c&&(n=parseFloat(e)*parseFloat(t)/100),parseFloat(n)},a=function(e){return JSON.parse(Array.isArray(e)?JSON.stringify(e).replace(/\\/g,""):e.replace(/\\/g,""))}},774:function(e,t,c){"use strict";c.d(t,"a",(function(){return s}));var n=c(3),a=c(5),i=c(6),s=function(){var e=Object(a.a)(Object(n.a)().mark((function e(t,c){var a,s;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("https://api.freecurrencyapi.com/v1/latest?apikey=fca_live_C8lWFFJJ2Q2soCa9lcN99U1dc8yl7A4gUoXNyjhj&base_currency=".concat(t,"&currencies=").concat(c));case 2:return s=e.sent,e.abrupt("return",null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.data[c]);case 4:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=27.f840d4a0.chunk.js.map