{"version":3,"sources":["views/pages/account-settings/BillingHistory.js","views/pages/account-settings/PaymentMethods.js","views/pages/account-settings/BillingCurrentPlan.js","views/pages/account-settings/BillingTabContent.js","@core/components/ui-loader/index.js","@core/components/spinner/Loading-spinner.js"],"names":["statusObj","Sent","color","icon","size","Paid","Draft","Downloaded","BillingHistory","refreshHistory","useState","data","setData","block","setBlock","Loader","downloadPdf","row","axios","post","id","then","res","downloadLink","document","createElement","fileName","uniqueno","href","pdf","download","click","removeChild","catch","err","console","log","getData","invoices","useEffect","className","blocking","loader","tag","responsive","map","k","status","placement","target","balance","dueDate","currencysymbol","totalamount","moment","billingstart","format","add","onClick","userId","orgUserId","PaymentMethods","planpackage","refreshFlag","ability","useContext","AbilityContext","dispatch","useDispatch","externalScript","setAttribute","head","appendChild","getOrganizationUserImage","user","organizationuser","abilitytemp","forEach","obj","opt","action","substring","lastIndexOf","subject","replace","push","localStorage","setItem","JSON","stringify","update","paynowfn","options","key","process","currency","amount","order_id","name","description","image","handler","paymentStaus","successPayment","theme","window","Razorpay","open","paymentFlag","outline","order","disabled","lg","BillingCurrentPlan","withReactContent","Swal","refreshBilling","plans","setPlans","totalUsers","setTotaUsers","setPlanPackage","noofdays","setNoOfDays","getPlans","getSubscription","usercount","endDate","endOf","today","days","diff","md","price","length","plan","type","value","defaultChecked","planid","daysInMonth","trialflag","enddate","val","BillingTabContent","setRefreshHistory","UILoader","props","children","overlayColor","Tag","classnames","style","backgroundColor","defaultProps","ComponentSpinner"],"mappings":"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","file":"static/js/30.4071cb74.chunk.js","sourcesContent":["// ** React Imports\nimport { Fragment, useEffect, useState } from 'react'\n\nimport Avatar from '@components/avatar'\n\nimport UILoader from '@components/ui-loader'\nimport Spinner from '@components/spinner/Loading-spinner'\nimport {\n  Send,\n  Edit,\n  Info,\n  Save,\n  PieChart,\n  Download,\n  TrendingUp,\n  CheckCircle,\n  ChevronDown,\n  ArrowDownCircle\n} from 'react-feather'\n\n// ** Reactstrap Imports\nimport {\n  Card,\n  Col,\n  CardTitle,\n  CardHeader,\n  UncontrolledTooltip,\n  Table\n} from 'reactstrap'\n\n// ** Styles\nimport '@styles/react/apps/app-invoice.scss'\nimport '@styles/react/libs/tables/react-dataTable-component.scss'\nimport axios from '@src/configs/axios/axiosConfig'\nimport moment from 'moment'\n\n// ** Vars\nconst statusObj = {\n  Sent: { color: 'light-secondary', icon: <Send size={14} /> },\n  Paid: { color: 'light-success', icon: <CheckCircle size={14} /> },\n  Draft: { color: 'light-primary', icon: <Save size={14} /> },\n  Downloaded: { color: 'light-info', icon: <ArrowDownCircle size={14} /> },\n  'Past Due': { color: 'light-danger', icon: <Info size={14} /> },\n  'Partial Payment': { color: 'light-warning', icon: <PieChart size={14} /> }\n}\n\nconst BillingHistory = ({ refreshHistory }) => {\n\n  const [data, setData] = useState([])\n  const [block, setBlock] = useState(false)\n  const Loader = () => {\n    return (\n      <Fragment>\n        <Spinner />\n      </Fragment>\n    )\n  }\n\n  const downloadPdf = async (row) => {\n\n    setBlock(true)\n    axios.post('/billings/exportpdf', { id: row.id })\n      .then((res) => {\n        const downloadLink = document.createElement(\"a\")\n        const fileName = `${row.uniqueno}.pdf`\n        downloadLink.href = res.data.pdf\n        downloadLink.download = fileName\n        downloadLink.click()\n        document.removeChild(downloadLink)\n        setBlock(false)\n      })\n      .catch((err) => {\n        setBlock(false)\n        console.log(err)\n      })\n  }\n\n  const getData = () => {\n\n    axios.post('/billings/billinghistory')\n      .then((res) => {\n        setData(res.data.invoices)\n      })\n      .catch(() => {\n      })\n  }\n\n  useEffect(() => {\n    getData()\n  }, [])\n\n  useEffect(() => {\n    if (refreshHistory) {\n      getData()\n    }\n  }, [refreshHistory])\n\n  const Icon = (status) => {\n    return statusObj[status] ? statusObj[status].icon : <CheckCircle size={14} />\n  }\n\n  return (\n    < div className='invoice-list-wrapper' >\n      <Card>\n        <UILoader blocking={block} loader={<Loader />}>\n          <CardHeader className='py-1'>\n            <CardTitle tag='h4'>Billing History</CardTitle>\n          </CardHeader>\n          <div className='invoice-list-dataTable react-dataTable'>\n            <Table responsive className='table table-hover'>\n              <thead>\n                <tr>\n                  <th>#</th>\n                  <th>\n                    <TrendingUp size={14} />\n                  </th>\n                  <th>Total</th>\n                  <th>Issued Date</th>\n                  <th>Due Date</th>\n                  <th>Action</th>\n                </tr>\n              </thead>\n              <tbody>\n                {data.map((row, k) => {\n                  return (<tr key={k}>\n                    <td>\n                      {row.uniqueno}\n                    </td>\n                    <td>\n                      <Fragment>\n                        <Avatar color={statusObj[row.status] ? statusObj[row.status].color : 'success'} icon={Icon(row.status)} id={`av-tooltip-${row.id}`} />\n                        <UncontrolledTooltip placement='top' target={`av-tooltip-${row.id}`}>\n                          <span className='fw-bold'>{row.status}</span>\n                          <br />\n                          <span className='fw-bold'>Balance:</span> {row.balance}\n                          <br />\n                          <span className='fw-bold'>Due Date:</span> {row.dueDate}\n                        </UncontrolledTooltip>\n                      </Fragment>\n                    </td>\n                    <td>\n                      {row.currencysymbol} {row.totalamount || 0}\n                    </td>\n                    <td>\n                      {moment(row.billingstart, 'x').format('MMM DD, Y')}\n                    </td>\n                    <td>\n                      {moment(row.billingstart, 'x').add(5, 'd').format('MMM DD, Y')}\n                    </td>\n                    <td>\n                      <Col className='cursor-pointer' onClick={() => { downloadPdf(row) }}>\n                        <Download size={17} className='mx-1' />\n                      </Col>\n                    </td>\n                  </tr>)\n                })\n                }\n              </tbody>\n            </Table>\n          </div>\n        </UILoader>\n      </Card>\n    </div >\n  )\n}\n\nexport default BillingHistory\n","// ** React Imports\nimport { Fragment, useContext, useEffect, useState } from 'react'\nimport { AbilityContext } from '@src/utility/context/Can'\n// ** Reactstrap Imports\nimport {\n  Row,\n  Col,\n  Card,\n  Button,\n  CardBody,\n  CardTitle,\n  CardHeader\n} from 'reactstrap'\n\n// ** Third Party Components\nimport axios from '@src/configs/axios/axiosConfig'\nimport UILoader from '@components/ui-loader'\nimport Spinner from '@components/spinner/Loading-spinner'\nimport { paymentStaus } from '@src/views/pages/account-settings/store/index.js'\nimport { orgUserId } from '@src/helper/sassHelper'\nimport { useDispatch } from 'react-redux'\nconst userId = orgUserId()\n\nconst PaymentMethods = ({ planpackage, refreshFlag }) => {\n  // ** States\n  const [block, setBlock] = useState(false)\n  const ability = useContext(AbilityContext)\n  const dispatch = useDispatch()\n  const Loader = () => {\n    return (\n      <Fragment>\n        <Spinner />\n      </Fragment>\n    )\n  }\n  useEffect(() => {\n    const externalScript = document.createElement('script')\n    externalScript.setAttribute('src', 'https://checkout.razorpay.com/v1/checkout.js')\n    document.head.appendChild(externalScript)\n  }, [])\n\n  const getOrganizationUserImage = async () => {\n    const user = { id: userId }\n    const res = await axios.post('organizationusers/get', user)\n    const data = res.data.organizationuser\n\n    const abilitytemp = []\n    data.ability.forEach(obj => {\n      const action = obj.substring(obj.lastIndexOf(\"-\") + 1)\n      const resource = obj.replace(obj.substring(obj.lastIndexOf(\"-\")), '')\n      const opt = { action, subject: resource }\n      abilitytemp.push(opt)\n    })\n    localStorage.setItem('ability', JSON.stringify(abilitytemp))\n    await ability.update(abilitytemp)    \n  }\n\n  const successPayment = (data) => {\n\n    setBlock(true)\n    axios.post('/billings/successpayment', data)\n      .then(() => {\n        setBlock(false)\n        refreshFlag(true)\n        dispatch(paymentStaus(false))\n        getOrganizationUserImage()\n      })\n      .catch(() => {\n      })\n  }\n\n  const paynowfn = (data) => {\n\n    const options = {\n      key: process.env.REACT_APP_RAZORPAY_ID,\n      currency: \"INR\",\n      amount: data.amount,\n      order_id: data.id,\n      name: 'Turia Books',\n      description: '',\n      image: \"./logo_full.png\",\n      handler: ((res) => {\n        successPayment(res)\n      }),\n      theme: {\n        color: \"#0072CE\"\n      }\n    }\n    const rzp1 = new window.Razorpay(options)\n    rzp1.open()\n  }\n\n  const createOrder = () => {\n\n    setBlock(true)\n    axios.post('/billings/createorder')\n      .then((res) => {\n        setBlock(false)\n        paynowfn(res.data.order)\n      })\n      .catch(() => {\n\n      })\n  }\n\n  return (\n    <Fragment>\n      <UILoader blocking={block} loader={<Loader />}>\n        <Card>\n          <CardHeader className='border-bottom'>\n            <CardTitle tag='h4'>Payment Methods</CardTitle>\n          </CardHeader>\n          <CardBody className='my-1 py-25'>\n            <Row className='gx-4'>\n              <Col>\n                {(planpackage !== null && !planpackage?.paymentFlag) &&\n                  <p className='text-primary'>Total Amount - {planpackage.amount}</p>\n                }\n                {!planpackage?.paymentFlag &&\n                  <Button color='primary' className='me-1' outline onClick={() => { createOrder() }}>Pay Now</Button>\n                }\n                <Button color='secondary' outline disabled>Auto Renewal</Button>\n              </Col>\n              <Col lg='6'>\n                {/* <h6 className='fw-bolder'>UPI</h6>\n              <div className='added-cards'>\n                <div\n                  className={classnames('cardMaster')}\n                >\n                  <div className='d-flex justify-content-between flex-sm-row flex-column'>\n                    <div className='card-information'>\n                      <span className='card-number '>\n                        {card.cardNumber}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div> */}\n              </Col>\n            </Row>\n          </CardBody>\n        </Card>\n      </UILoader>\n    </Fragment>\n  )\n}\n\nexport default PaymentMethods\n","// ** React Imports\nimport { Fragment, useState, useEffect } from 'react'\n// ** Reactstrap Imports\nimport {\n  Row,\n  Col,\n  Card,\n  Input,\n  CardBody,\n  Progress,\n  CardTitle,\n  CardHeader,\n  Table\n} from 'reactstrap'\nimport PaymentMethods from './PaymentMethods'\n\n// ** Third Party Components\nimport axios from '@src/configs/axios/axiosConfig'\nimport Swal from 'sweetalert2'\nimport withReactContent from 'sweetalert2-react-content'\n\n// ** Styles\nimport '@styles/base/pages/page-pricing.scss'\nimport '@styles/base/plugins/extensions/ext-component-sweet-alerts.scss'\nimport moment from 'moment'\n\nconst MySwal = withReactContent(Swal)\n\nconst BillingCurrentPlan = ({refreshBilling}) => {\n  // ** States\n  const [plans, setPlans] = useState([])\n  const [totalUsers, setTotaUsers] = useState(0)\n  const [planpackage, setPlanPackage] = useState(null)\n  const [noofdays, setNoOfDays] = useState(0)\n\n  const getPlans = async () => {\n    axios.post('/billings/planslist').then(res => {\n      setPlans(res.data.plans)\n    }).catch((err) => { console.log(err) })\n  }\n\n  const getSubscription = async () => {\n    axios.post('/billings/getbillingdetails').then(async res => {\n      setTotaUsers(res.data.planpackage.usercount || 0)\n      setPlanPackage(res.data.planpackage)\n      const endDate = moment().endOf('M')\n      const today = moment()\n      const days = endDate.diff(today, 'days')\n      setNoOfDays(days)\n\n      await getPlans()\n\n    }).catch((err) => { console.log(err) })\n  }\n\n  useEffect(async () => {\n    await getSubscription()\n  }, [])\n\n  const renderTable = () => {\n    return (plans.map((plan, k) => {\n      return (\n        <tr key={k}>\n          <td><Input type='radio' value={plan.id} name='plan' defaultChecked={planpackage?.planid === plan.id} /></td>\n          <td>{plan.name}</td>\n          <td>{plan.price}</td>\n          <td>{plan.description}</td>\n        </tr>\n      )\n    })\n    )\n  } \n\n  const refreshFlag = (val) => {\n    refreshBilling(val)\n    getSubscription()\n  }\n\n  return (\n    <Fragment>\n      <Card>\n        <CardHeader className='border-bottom'>\n          <CardTitle tag='h4'>Current plan</CardTitle>\n        </CardHeader>\n        <CardBody className='my-2 py-25'>\n          <Row>\n            <Col md='8'>\n              <Col md={12}>\n                <h5 className='mb-2'>Total users : {totalUsers}\n                  {planpackage !== null &&\n                    <p className='text-primary'>Total Amount - {planpackage.usercount * planpackage.price} + GST 18%</p>\n                  }\n                </h5>\n                <Table className='table-bordered'>\n                  <thead>\n                    <tr>\n                      <th>Select</th>\n                      <th>Name</th>\n                      <th>price</th>\n                      <th>description</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {plans.length > 0 && renderTable()}\n                  </tbody>\n                </Table>\n              </Col>\n            </Col>\n            {planpackage !== null &&\n              <Col md='4'>\n                <div className='plan-statistics pt-1'>\n                  <div className='d-flex justify-content-between'>\n                    <h5 className='fw-bolder'>Days</h5>\n                    <h5 className='fw-bolder'>{moment().format('DD')} of {moment().daysInMonth()} Days</h5>\n                  </div>\n                  <Progress className='mb-50' value={100 - (noofdays / (moment().daysInMonth()) * 100)} />\n                  {(planpackage.paymentFlag && !planpackage.trialflag) &&\n                    <p className='mt-50'> {noofdays} days remaining to next billing cycle.</p>\n                  }\n                  {\n                    (!planpackage?.paymentFlag && !planpackage.trialflag) && <p>Please pay now to use all features. </p>\n                  }\n                  {planpackage.trialflag &&\n                    <p className='mt-50'>You are on Trial Period, Trial will Expire {moment(planpackage.enddate, 'x').format('MMM DD, Y')}</p>\n                  }\n                </div>\n              </Col>\n            }\n          </Row>\n        </CardBody>\n      </Card>\n      <PaymentMethods planpackage={planpackage} refreshFlag={refreshFlag}/>\n    </Fragment>\n  )\n}\n\nexport default BillingCurrentPlan\n","// ** React Imports\nimport { Fragment, useState } from 'react'\n\n// ** Demo Components\nimport BillingHistory from './BillingHistory'\nimport BillingCurrentPlan from './BillingCurrentPlan'\n\nconst BillingTabContent = () => {\n\n  const [refreshHistory, setRefreshHistory] = useState(false)\n\n  const refreshBilling = (val) => {\n    return setRefreshHistory(val)\n  }\n  return (\n    <Fragment>\n      <BillingCurrentPlan refreshBilling={refreshBilling} />\n      <BillingHistory refreshHistory={refreshHistory} />\n    </Fragment>\n  )\n}\n\nexport default BillingTabContent\n","// ** React Imports\nimport { Fragment } from 'react'\n\n// ** Third Party Components\nimport Proptypes from 'prop-types'\nimport classnames from 'classnames'\n\n// ** Reactstrap Imports\nimport { Spinner } from 'reactstrap'\n\n// ** Styles\nimport './ui-loader.scss'\n\nconst UILoader = props => {\n  const { children, blocking, loader, className, tag, overlayColor } = props\n\n  const Tag = tag\n\n  return (\n    <Tag className={classnames('ui-loader', { [className]: className, show: blocking })}>\n      {children}\n      {blocking ? (\n        <Fragment>\n          <div\n            className='overlay' /*eslint-disable */\n            {...(blocking && overlayColor ? { style: { backgroundColor: overlayColor } } : {})}\n            /*eslint-enable */\n          ></div>\n          <div className='loader'>{loader}</div>\n        </Fragment>\n      ) : null}\n    </Tag>\n  )\n}\n\nexport default UILoader\n\nUILoader.defaultProps = {\n  tag: 'div',\n  blocking: false,\n  loader: <Spinner color='primary' />\n}\n\nUILoader.propTypes = {\n  tag: Proptypes.string,\n  loader: Proptypes.any,\n  className: Proptypes.string,\n  overlayColor: Proptypes.string,\n  blocking: Proptypes.bool.isRequired\n}\n","const ComponentSpinner = () => {\n  return (\n    <div className='fallback-spinner'>\n      <div className='loading'>\n        <div className='effect-1 effects'></div>\n        <div className='effect-2 effects'></div>\n        <div className='effect-3 effects'></div>\n      </div>\n    </div>\n  )\n}\n\nexport default ComponentSpinner\n"],"sourceRoot":""}