(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[44],{1423:function(e,t,n){"use strict";n.r(t);var c=n(8),a=n(3),s=n(5),r=n(25),i=n(9),o=n(11),l=n(0),u=n(716),d=n.n(u),j=n(13),m=n(705),b=n(708),f=n(709),O=n(16),x=(n(710),n(184)),h=n.n(x),p=n(185),v=n.n(p),g=n(6),N=n(7),k=n.n(N),y=n(42),D=n.n(y),w=n(183),I=n(225),S=n(334),P=n(286),C=n(354),B=n(748),M=n(702),Y=n(703),z=n(2),A=Object(O.b)(),E=Object(O.d)(),F=function(e){var t;Object(o.a)(e);var n=v()(h.a),u=Object(l.useState)([]),O=Object(i.a)(u,2),x=O[0],p=O[1],N=localStorage.getItem("clientId"),y=Object(l.useState)(!1),F=Object(i.a)(y,2),q=F[0],R=F[1],T=Object(l.useState)(null),J=Object(i.a)(T,2),K=J[0],U=J[1],V=Object(l.useState)(""),H=Object(i.a)(V,2),Q=H[0],X=H[1],$=Object(l.useState)([]),_=Object(i.a)($,2),G=_[0],L=_[1],W=Object(l.useState)([]),Z=Object(i.a)(W,2),ee=Z[0],te=Z[1],ne=Object(l.useState)(0),ce=Object(i.a)(ne,2),ae=ce[0],se=ce[1],re=Object(l.useState)(!1),ie=Object(i.a)(re,2),oe=ie[0],le=ie[1],ue=function(){return Object(z.jsx)(l.Fragment,{children:Object(z.jsx)(Y.a,{})})},de=b.d().shape({name:b.f().required("Please Enter Name"),nameOfPerson:b.f().required("Please Enter Name of Person"),id:b.f(),contactid:b.f().default(N),createdby:b.f().default(E),updatedby:b.f().default(E),organizationId:b.f().default(A),remarks:b.f().nullable(),issuedDate:b.f().default("").required("Please Enter Issued Date")}),je={image:"ui-attachment--image",pdf:"ui-attachment--pdf",xlsx:"ui-attachment--excel",xls:"ui-attachment--excel",docx:"ui-attachment--docx",doc:"ui-attachment--docx"},me=Object(m.f)({resolver:Object(f.a)(de),defaultValues:de.cast()}),be=me.handleSubmit,fe=me.formState.errors,Oe=me.control,xe=me.setValue,he={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){se(Math.round(100*e.loaded/e.total))}},pe=function(e){var t=new FormData;e.forEach((function(e,n){t.append("files[".concat(n,"]"),e)})),t.append("organizationId",A),t.append("clientId",N);var n=[localStorage.getItem("clientName"),"Documents"];t.append("folderPath",n),le(!0),g.a.post("/files/upload",t,he).then((function(e){te([].concat(Object(r.a)(ee),Object(r.a)(e.data.attachment_ids))),le(!1)})).catch((function(e){console.log(e),le(!1)}))},ve=Object(B.a)({multiple:!0,onDrop:function(){var e=Object(s.a)(Object(a.a)().mark((function e(t,n){var c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=[],t.forEach((function(e){e.extension=e.name.split(".").pop(),c.push(e)})),!n.length){e.next=6;break}w.b.error("You can only upload image Files!."),e.next=9;break;case 6:return e.next=8,pe(c);case 8:L([].concat(Object(r.a)(G),c));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),ge=ve.getRootProps,Ne=ve.getInputProps,ke=G.map((function(e,t){return Object(z.jsxs)(j.B,{md:6,className:"d-flex align-items-center justify-content-between ui-attachment ".concat(je[e.extension]||je.image),children:[Object(z.jsx)("div",{className:"file-details d-flex align-items-center",children:Object(z.jsx)("div",{children:Object(z.jsx)("p",{className:"file-name mb-0 text-overflow-ellipsis",children:e.name.split(".")[0].length>15?"".concat(e.name.split(".")[0].substr(0,15)):e.name})})}),Object(z.jsx)(I.a,{size:14,className:"cursor-pointer",onClick:function(){return function(e,t){var n=G.filter((function(t){return t.name!==e.name}));te(Object(r.a)(ee.splice(t,1))),L(n)}(e,t)}})]},"".concat(e.name,"-").concat(t))})),ye=function(){xe("name",""),xe("nameOfPerson",""),xe("remarks",""),xe("issuedDate",""),xe("contactid",N),xe("id",""),xe("organizationId",A),xe("createdby",E),xe("updatedby",E),X("")},De=function(){R(!1),ye()},we=function(){g.a.post("/documentsinout/list",{clientId:N}).then((function(e){p(e.data.documentsinout)})).catch((function(e){console.log(e)}))},Ie=function(){var e=Object(s.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.issuedDate=D()(t.issuedDate,"MMM DD, Y").valueOf(),t.attachmentIds=ee,null!==K?(g.a.post("/documentsinout/update",t).then(Object(s.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:we(),R(!1),L([]),te([]),w.b.success("Documents Place Updated Successfully",{position:"bottom-right"});case 5:case"end":return e.stop()}}),e)})))).catch((function(e){console.log(e)})),U(null)):g.a.post("/documentsinout/create",t).then(Object(s.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:we(),R(!1),L([]),te([]),w.b.success("Document Place Added Successfully",{position:"bottom-right"});case 5:case"end":return e.stop()}}),e)})))).catch((function(e){console.log(e)})),De();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){we()}),[]);var Se=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(z.jsxs)(j.B,{md:12,children:[Object(z.jsx)(j.N,{sm:"12",className:k()("form-label ".concat(n?"required":"")),for:t,children:e}),Object(z.jsxs)(j.B,{children:[Object(z.jsx)(m.a,{id:t,name:t,control:Oe,render:function(e){var n=e.field;return Object(z.jsx)(j.K,Object(c.a)({invalid:fe[t]&&!0},n))}}),fe[t]&&Object(z.jsx)(j.I,{children:fe[t].message})]})]})};return Object(z.jsxs)(j.l,{children:[Object(z.jsx)(j.m,{children:Object(z.jsxs)(j.v,{className:"align-items-end card-title d-flex justify-content-between mb-0",tag:"h5",children:["Document In - Out",Object(z.jsxs)(j.i,{size:"sm",className:"me-1",color:"primary",onClick:function(){R(!0),ye()},children:[Object(z.jsx)(S.a,{size:14}),"Add New"]})]})}),Object(z.jsxs)(j.mb,{className:"text-nowrap text-center border-bottom",responsive:!0,children:[Object(z.jsx)("thead",{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{className:"text-start",children:"Name"}),Object(z.jsx)("th",{children:"Name of the Person"}),Object(z.jsx)("th",{children:"Date"}),Object(z.jsx)("th",{children:"Remarks"}),Object(z.jsx)("th",{children:"Action"})]})}),Object(z.jsx)("tbody",{children:x.map((function(e,t){return Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{className:"text-start",children:e.name}),Object(z.jsx)("td",{children:e.nameofperson}),Object(z.jsx)("td",{children:void 0!==e.date?(c=e.date,null===c||void 0===c?"":13===c.length?D()(c,"x").format("MMM DD, YYYY"):D.a.unix(c).format("MMM DD, YYYY")):""}),Object(z.jsx)("td",{className:"text-start",children:Object(z.jsxs)("span",{className:"text-start",children:[" ",e.remarks," "]})}),Object(z.jsx)("td",{children:Object(z.jsxs)("div",{className:"column-action d-flex align-items-center",children:[Object(z.jsx)(j.B,{onClick:function(){!function(e){U(e),R(!0);var t=D()(e.date,"x").format("MMM DD, Y");xe("name",e.name),xe("issuedDate",t),xe("nameOfPerson",e.nameofperson),xe("remarks",e.remarks),xe("contactid",N),xe("id",e.id),xe("organizationId",A),xe("createdby",E),xe("updatedby",E),X(e.remarks)}(e)},children:Object(z.jsx)(P.a,{className:"cursor-pointer mt-0",size:16})}),Object(z.jsx)(j.B,{lg:4,onClick:function(){!function(e){n.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ms-1"},buttonsStyling:!1}).then(function(){var t=Object(s.a)(Object(a.a)().mark((function t(c){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c.value){t.next=8;break}return t.next=3,g.a.post("/documentsinout/delete",{id:e,updatedBy:E});case 3:return we(),n.fire({icon:"success",title:"Deleted!",text:"Document Status has been deleted.",customClass:{confirmButton:"btn btn-success"}}),t.abrupt("return",!0);case 8:if(c.dismiss!==n.DismissReason.cancel){t.next=10;break}return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(e.id)},children:Object(z.jsx)(C.a,{className:"cursor-pointer ms-1 mt-0",size:16})})]})})]},t);var c}))})]}),Object(z.jsxs)(j.Q,{isOpen:q,toggle:function(){return R(!q)},className:"modal-dialog-centered",children:[Object(z.jsx)(j.T,{toggle:function(){return De()},children:"Document In - Out"}),Object(z.jsx)(M.a,{blocking:oe,loader:Object(z.jsx)(ue,{}),children:Object(z.jsxs)(j.R,{children:[Object.keys(fe).map((function(e){var t;return Object(z.jsxs)(j.I,{children:["$",null===(t=fe[e])||void 0===t?void 0:t.message]},e)})),Object(z.jsxs)(j.ib,{tag:j.H,className:"gx-2 gy-1",onSubmit:be(Ie),children:[Se("Name Of Document","name",!0),Se("Name Of Person","nameOfPerson",!0),Object(z.jsxs)(j.B,{md:12,children:[Object(z.jsx)(j.N,{className:"form-label required",for:"comments",children:"Date"}),Object(z.jsx)(m.a,{control:Oe,name:"issuedDate",id:"issuedDate",render:function(e){var t=e.field;return Object(z.jsx)(d.a,{value:t.value,onChange:function(e,n){t.onChange(n)},options:{altInput:!0,altFormat:"M j, Y",dateFormat:"M j, Y"},className:"form-control invoice-edit-input date-picker"})}}),fe.issuedDate&&Object(z.jsx)("p",{className:"text-danger",children:fe.issuedDate.message})]}),Object(z.jsxs)(j.B,{md:12,children:[Object(z.jsx)(j.N,{className:"form-label",for:"comments",children:"Remarks"}),Object(z.jsx)(m.a,{control:Oe,name:"remarks",id:"remarks",render:function(e){return Object(o.a)(e),Object(z.jsx)(j.K,{type:"textarea",value:Q,onChange:function(e){xe("remarks",e.target.value),X(e.target.value)}})}}),fe.remarks&&Object(z.jsx)(j.I,{children:fe.remarks.message})]}),Object(z.jsxs)(j.B,{children:[Object(z.jsx)("input",Object(c.a)({},Ne())),Object(z.jsx)(j.i,Object(c.a)(Object(c.a)({color:"primary"},ge({})),{},{children:"Add Attachments"}))]}),ae>0&&Object(z.jsx)(j.hb,{color:ae<100?"primary":"success",value:ae}),Object(z.jsx)(j.ib,{className:"d-flex p-1",children:ke}),Object(z.jsx)(j.ib,{className:"d-flex col-12",children:null===K||void 0===K||null===(t=K.files)||void 0===t?void 0:t.map((function(e,t){return Object(z.jsxs)(j.f,{color:"primary",className:"me-1 mt-1 col-4",onClick:function(){return function(e){var t,n=Object(r.a)(ee);n.splice(n.indexOf(e),1),te(n);var a=Object(r.a)(K.files).filter((function(t){return t.id!==e})),s=Object(c.a)({},K);s.files=a,U(s),xe("attachmentIds",null!==(t=a.map((function(e){return e.id})))&&void 0!==t?t:[])}(e.id)},children:[e.originalfilename.split(".")[0].length>15?"".concat(e.originalfilename.split(".")[0].substr(0,15)):e.originalfilename," X"]},t)}))}),Object(z.jsxs)(j.B,{className:"mt-2 pt-1",xs:12,children:[Object(z.jsx)(j.i,{type:"submit",className:"me-1",color:"primary",children:"Submit"}),Object(z.jsx)(j.i,{className:"me-1",color:"warning",onClick:function(){return De()},children:"Cancel"})]})]})]})})]})]})};n(721),t.default=function(){return Object(z.jsx)("div",{className:"app-user-list",children:Object(z.jsx)(F,{})})}},702:function(e,t,n){"use strict";var c=n(8),a=n(23),s=n(0),r=n(7),i=n.n(r),o=n(13),l=(n(704),n(2)),u=function(e){var t,n=e.children,r=e.blocking,o=e.loader,u=e.className,d=e.tag,j=e.overlayColor,m=d;return Object(l.jsxs)(m,{className:i()("ui-loader",(t={},Object(a.a)(t,u,u),Object(a.a)(t,"show",r),t)),children:[n,r?Object(l.jsxs)(s.Fragment,{children:[Object(l.jsx)("div",Object(c.a)({className:"overlay"},r&&j?{style:{backgroundColor:j}}:{})),Object(l.jsx)("div",{className:"loader",children:o})]}):null]})};t.a=u,u.defaultProps={tag:"div",blocking:!1,loader:Object(l.jsx)(o.jb,{color:"primary"})}},703:function(e,t,n){"use strict";var c=n(2);t.a=function(){return Object(c.jsx)("div",{className:"fallback-spinner",children:Object(c.jsxs)("div",{className:"loading",children:[Object(c.jsx)("div",{className:"effect-1 effects"}),Object(c.jsx)("div",{className:"effect-2 effects"}),Object(c.jsx)("div",{className:"effect-3 effects"})]})})}},704:function(e,t,n){},710:function(e,t,n){},721:function(e,t,n){}}]);
//# sourceMappingURL=44.07cb32b8.chunk.js.map