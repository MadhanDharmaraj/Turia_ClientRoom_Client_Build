(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[81],{1492:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(5),s=n(8),i=n(12),l=n(0),r=n(223),o=n(21),d=n(365),u=n(356),j=n(313),b=n(257),O=n(293),f=n(316),m=n(387),h=n(6),x=n(7),p=n.n(x),v=n(55),g=n(184),N=n(14),k=n(747),y=n.n(k),S=(n(737),n(755),n(741),n(28)),C=n.n(S),w=n(13),T=(n(481),n(3)),B=Object(w.d)(),I=function(e){var t=e.addTimeSheetModal,n=e.refreshList,c=e.selectedTimesheet,a=Object(l.useState)(!1),s=Object(i.a)(a,2),r=s[0],o=s[1],d=Object(l.useState)(),u=Object(i.a)(d,2),j=u[0],b=u[1],O=Object(l.useState)(),f=Object(i.a)(O,2),m=f[0],x=f[1],v=Object(l.useState)(C()().startOf("day").valueOf()),k=Object(i.a)(v,2),S=k[0],w=k[1],I=Object(l.useState)(0),z=Object(i.a)(I,2),E=z[0],F=z[1],L=Object(l.useState)(null),M=Object(i.a)(L,2),D=M[0],G=M[1],q=Object(l.useState)(""),A=Object(i.a)(q,2),_=A[0],H=A[1],K=Object(l.useState)([]),U=Object(i.a)(K,2),Y=U[0],P=U[1],V=Object(l.useState)([]),R=Object(i.a)(V,2),J=R[0],Q=R[1],W=Object(l.useState)(null),X=Object(i.a)(W,2),Z=X[0],$=X[1],ee=Object(l.useState)(null),te=Object(i.a)(ee,2),ne=te[0],ce=te[1],ae=Object(l.useState)(1),se=Object(i.a)(ae,2),ie=se[0],le=se[1],re=Object(l.useState)(""),oe=Object(i.a)(re,2),de=oe[0],ue=oe[1],je=function(){o(!1),H(""),$(""),ce(""),le(1),b(""),x(""),n(!1)},be=function(){o(!1),n(!1),je()};Object(l.useEffect)((function(){o(t)}),[t]),Object(l.useEffect)((function(){if(c){o(!0);var e=c;o(!0),G(e),H(e.taskname),$(e.clientid),ce(e.taskid),le(e.taskid&&"00000000-0000-0000-0000-000000000000"!==e.taskid?1:2),ue(C()(e.createdon,"x").unix()),b(C()(e.starttime,"x").format("HH:mm")),x(C()(e.endtime,"x").format("HH:mm"))}}),[c]);return Object(l.useEffect)((function(){}),[Z]),Object(l.useEffect)((function(){h.a.post("/organizationusers/getjobinfo",{id:B}).then((function(e){F(e.data.organizationusers.hourlyrate||0)})).catch((function(e){console.log(e)})),h.a.post("/clients/dropdown",{status:1}).then((function(e){var t=e.data;P(t.clients)}))}),[]),Object(T.jsx)("div",{className:"invoice-list-wrapper",children:Object(T.jsx)(N.l,{children:Object(T.jsx)("div",{className:"invoice-list-dataTable react-dataTable",children:Object(T.jsxs)(N.Q,{isOpen:r,toggle:function(){return be()},className:"modal-dialog-centered",children:[Object(T.jsx)(N.T,{toggle:function(){return be()},children:"Timesheet Log"}),Object(T.jsxs)(N.R,{children:[Object(T.jsxs)(N.ib,{children:[Object(T.jsxs)(N.B,{className:"d-flex align-items-center",children:[Object(T.jsx)(N.K,{defaultChecked:1===ie,type:"radio",name:"timesheetType",id:"task_time",onChange:function(){ce(null),$(null),le(1)}}),Object(T.jsx)(N.N,{size:"lg",className:"form-labels mt-50 ms-50",for:"task_time",children:"Task Linked Time"})]}),Object(T.jsxs)(N.B,{className:"d-flex  align-items-center",children:[Object(T.jsx)(N.K,{defaultChecked:2===ie,type:"radio",name:"timesheetType",id:"non_task_time",onChange:function(){ce(null),$(null),le(2)}}),Object(T.jsx)(N.N,{size:"lg",className:"form-label mt-50 ms-50",for:"non_task_time",children:"Non Task Linked Time"})]})]}),2===ie&&Object(T.jsxs)(N.ib,{children:[Object(T.jsx)(N.N,{size:"lg",className:"form-label required",children:"No Task Timesheet Log"}),Object(T.jsx)(N.B,{children:Object(T.jsx)(N.K,{type:"text",value:_,onChange:function(e){H(e.target.value)}})})]}),1===ie&&Object(T.jsxs)(l.Fragment,{children:[Object(T.jsxs)(N.ib,{children:[Object(T.jsx)(N.N,{size:"lg",className:"form-label required",children:"Client"}),Object(T.jsx)(N.B,{children:Object(T.jsx)(g.a,{className:p()("react-select"),classNamePrefix:"select",options:Y,value:Y.find((function(e){return e.id===Z})),onChange:function(e){var t;$(e.id),t=e.id,h.a.post("/tasks/dropdown",{clientId:t}).then((function(e){var t=e.data;Q(t.tasks)}))},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}})})]}),Object(T.jsxs)(N.ib,{children:[Object(T.jsx)(N.N,{size:"lg",className:"form-label required",children:"Task"}),Object(T.jsx)(N.B,{children:Object(T.jsx)(g.a,{className:p()("react-select"),classNamePrefix:"select",options:J,value:J.find((function(e){return e.id===ne})),onChange:function(e){ce(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}})})]})]}),Object(T.jsxs)(N.ib,{children:[Object(T.jsx)(N.N,{size:"lg",className:"form-label required",children:"Date"}),Object(T.jsx)(N.B,{children:Object(T.jsx)(y.a,{value:String(de),onChange:function(e,t){w(C.a.unix(t).startOf("day").valueOf())},options:{altInput:!0,altFormat:"F j, Y",dateFormat:"U"},className:p()("due-date-picker")})})]}),Object(T.jsxs)(N.ib,{children:[Object(T.jsx)(N.N,{size:"lg",className:"form-label required",children:"Star Time"}),Object(T.jsx)(N.B,{children:Object(T.jsx)(N.K,{type:"time",value:j,onChange:function(e){b(e.target.value)}})})]}),Object(T.jsxs)(N.ib,{children:[Object(T.jsx)(N.N,{size:"lg",className:"form-label required",children:"End Time"}),Object(T.jsx)(N.B,{children:Object(T.jsx)(N.K,{type:"time",value:m,onChange:function(e){x(e.target.value)}})})]})]}),Object(T.jsxs)(N.S,{children:[Object(T.jsx)(N.i,{color:"warning",onClick:function(){return be()},children:"Cancel"}),Object(T.jsx)(N.i,{color:"primary",onClick:function(){!function(){var e=C()(S,"x").set("hour",null===j||void 0===j?void 0:j.split(":")[0]).set("minutes",null===j||void 0===j?void 0:j.split(":")[1]).valueOf(),t=C()(S,"x").set("hour",null===m||void 0===m?void 0:m.split(":")[0]).set("minutes",null===m||void 0===m?void 0:m.split(":")[1]).valueOf(),c=B,a=C()(S,"x").set("hour",null===j||void 0===j?void 0:j.split(":")[0]).set("minutes",null===j||void 0===j?void 0:j.split(":")[1]),s=C()(S,"x").set("hour",null===m||void 0===m?void 0:m.split(":")[0]).set("minutes",null===m||void 0===m?void 0:m.split(":")[1]),i=C.a.duration(s.diff(a)).asHours(),l=E*i;h.a.post("/tasktimesheets/manualentry",{timeSheetDate:S,taskId:ne,type:!0,name:_,id:null===D||void 0===D?void 0:D.id,createdBy:B,starttime:e,endtime:t,userid:c,amount:l,hourlyRate:E,totalhours:i}).then((function(){je(),n(!0)})).catch((function(){}))}()},children:"Submit"})]})]})})})})},z=n(185),E=n.n(z),F=n(186),L=n.n(F)()(E.a),M=Object(w.d)(),D=Object(w.a)(),G=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.timesheet})),n=Object(l.useState)([]),x=Object(i.a)(n,2),k=x[0],S=x[1],w=Object(l.useState)(!1),B=Object(i.a)(w,2),z=B[0],E=B[1],F=Object(l.useState)(null),G=Object(i.a)(F,2),q=G[0],A=G[1],_=Object(l.useState)(C()().startOf("day").unix()),H=Object(i.a)(_,2),K=H[0],U=H[1],Y=Object(l.useState)(1),P=Object(i.a)(Y,2),V=P[0],R=P[1],J=Object(l.useState)(1),Q=Object(i.a)(J,2),W=Q[0],X=Q[1],Z=Object(l.useState)([]),$=Object(i.a)(Z,2),ee=$[0],te=$[1],ne=Object(l.useState)([]),ce=Object(i.a)(ne,2),ae=ce[0],se=ce[1],ie=Object(l.useState)({id:"",name:"Select Client"}),le=Object(i.a)(ie,2),re=le[0],oe=le[1],de=Object(l.useState)({id:"",name:"Select Service"}),ue=Object(i.a)(de,2),je=ue[0],be=ue[1];Object(l.useEffect)((function(){h.a.post("/services/dropdown",{status:1}).then((function(e){var t=e.data.services;t.unshift({id:"",name:"Select All"}),se(t)})),h.a.post("/clients/dropdown",{status:1}).then((function(e){var t=e.data.clients;t.unshift({id:"",name:"Select All"}),te(t)}))}),[]),Object(l.useEffect)((function(){e(Object(r.d)({date:C.a.unix(K).startOf("day").valueOf(),enddate:C.a.unix(K).endOf("day").valueOf(),option:V,userId:1===parseInt(D.rolelevel)?"":M,client:re.id,service:je.id,taskfilter:W}))}),[e,t.timesheetList.length]),Object(l.useEffect)((function(){S(t.timesheetList)}),[t.timesheetList]);var Oe=function(e){return C()(e,"x").format("h:m A")},fe=function(e){var t=e.totalhours,n=parseFloat(t);n=60*n*60;var c=Math.floor(n/3600);n-=60*c*60;var a=Math.floor(n/60);return c<10&&(c="0".concat(c)),a<10&&(a="0".concat(a)),"".concat(isNaN(c)?"00":c,": ").concat(isNaN(a)?"00":a)},me=function(e,t){var n=parseFloat(e);n=60*n*60;var c=Math.floor(n/3600);n-=60*c*60;var a=Math.floor(n/60);return c<10&&(c="0".concat(c)),a<10&&(a="0".concat(a)),t?isNaN(c)?0:c:isNaN(a)?0:a},he=function(){var t=Object(a.a)(Object(c.a)().mark((function t(n){return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.post("/tasktimesheets/delete",{id:n,updatedBy:M}).then((function(){e(Object(r.d)({date:C.a.unix(K).startOf("day").valueOf(),enddate:C.a.unix(K).endOf("day").valueOf(),option:V,userId:1===parseInt(D.rolelevel)?"":M,client:re.id,service:je.id,taskfilter:W}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),xe=function(t){R(t),e(Object(r.d)({date:C.a.unix(K).startOf("day").valueOf(),enddate:C.a.unix(K).endOf("day").valueOf(),client:re.id,service:je.id,option:t,export:!1,taskfilter:W}))},pe=function(t){X(t),e(Object(r.d)({date:C.a.unix(K).startOf("day").valueOf(),enddate:C.a.unix(K).endOf("day").valueOf(),client:re.id,service:je.id,option:V,export:!1,taskfilter:t}))};return Object(T.jsxs)(l.Fragment,{children:[Object(T.jsx)(N.l,{className:"p-1 mb-0",children:Object(T.jsxs)(N.ib,{className:"d-flex align-items-sm-center justify-content-start flex-xl-nowrap flex-wrap flex-sm-row flex-column",children:[Object(T.jsxs)(N.B,{className:"col-12 col-md-5 col-lg-5 d-flex",children:[Object(T.jsx)(N.B,{className:"col-6 col-lg-4",children:Object(T.jsxs)(N.tb,{className:"col-12",children:[Object(T.jsx)(N.G,{outline:!0,color:"secondary",caret:!0,children:["","Group By User","Group By Task"][V]}),Object(T.jsxs)(N.F,{children:[Object(T.jsx)(N.E,{onClick:function(){xe(1)},children:"Group By User"}),Object(T.jsx)(N.E,{onClick:function(){xe(2)},children:"Group By Task"})]})]})}),2===V&&Object(T.jsx)(N.B,{className:"col-6 col-lg-4",children:Object(T.jsxs)(N.tb,{className:"col-12 ps-1",children:[Object(T.jsx)(N.G,{outline:!0,color:"secondary",caret:!0,children:["","Current Task","Completed Task"][W]}),Object(T.jsxs)(N.F,{children:[Object(T.jsx)(N.E,{onClick:function(){pe(1)},children:"Current Task"}),Object(T.jsx)(N.E,{onClick:function(){pe(2)},children:"Completed Task"})]})]})})]}),Object(T.jsxs)(N.B,{className:"col-12 col-md-7 col-lg-7 d-flex align-items-sm-center justify-content-end flex-xl-nowrap flex-wrap flex-sm-row flex-column",children:[2===V&&Object(T.jsx)(N.B,{className:"ms-0 ms-lg-1 mt-50 mt-lg-0 col-12 col-lg-3 col-md-3",children:Object(T.jsx)(g.a,{label:"name",isClearable:!1,value:re,options:ee,className:"react-select",classNamePrefix:"select",theme:v.g,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},onChange:function(){var t=Object(a.a)(Object(c.a)().mark((function t(n){return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return oe(n),t.next=3,e(Object(r.d)({date:C.a.unix(K).startOf("day").valueOf(),enddate:C.a.unix(K).endOf("day").valueOf(),option:V,userId:1===parseInt(D.rolelevel)?"":M,client:n.id,service:je.id,taskfilter:W}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})}),2===V&&Object(T.jsx)(N.B,{className:"ms-0 ms-lg-1 col-12 col-lg-4 col-md-4 mt-50 mt-lg-0",children:Object(T.jsx)(g.a,{theme:v.g,isClearable:!1,className:"react-select",classNamePrefix:"select",options:ae,value:je,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},onChange:function(){var t=Object(a.a)(Object(c.a)().mark((function t(n){return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return be(n),t.next=3,e(Object(r.d)({date:C.a.unix(K).startOf("day").valueOf(),enddate:C.a.unix(K).endOf("day").valueOf(),option:V,userId:1===parseInt(D.rolelevel)?"":M,client:re.id,service:n.id,taskfilter:W}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})}),1===V&&Object(T.jsx)(N.B,{className:"me-1 ms-0 ms-lg-1 col-12 col-md-3 col-lg-3 mt-50 mt-lg-0",children:Object(T.jsx)(y.a,{value:String(K),placeholder:"Select Date",onChange:function(t,n){!function(t){U(C()(t).startOf("day").unix()),e(Object(r.d)({date:C.a.unix(t).startOf("day").valueOf(),enddate:C.a.unix(t).endOf("day").valueOf(),option:V,userId:1===parseInt(D.rolelevel)?"":M,client:re.id,service:je.id,taskfilter:W}))}(n)},options:{altInput:!0,altFormat:"F j, Y",dateFormat:"U"},className:p()("due-date-picker")})}),Object(T.jsxs)(N.B,{className:"d-flex flex-wrap flex-md-nowrap alin-items-center mt-50 mt-lg-0 col-12 col-md-4 col-lg-4",children:[Object(T.jsxs)(N.i,{className:"ms-0",color:"primary",onClick:function(){return E(!0)},children:[" ",Object(T.jsx)(d.a,{size:15})," Add"]}),Object(T.jsxs)(N.wb,{className:"ms-1",children:[Object(T.jsx)(N.G,{color:"secondary",caret:!0,outline:!0,children:Object(T.jsx)(u.a,{className:"font-small-4 me-50"})}),Object(T.jsx)(N.F,{children:Object(T.jsxs)(N.E,{onClick:function(){e(Object(r.b)({date:C.a.unix(K).startOf("day").valueOf(),enddate:C.a.unix(K).endOf("day").valueOf(),export:!0}))},children:[Object(T.jsx)(j.a,{size:14,className:"me-50"}),"Export"]})})]})]})]})]})}),Object(T.jsx)(I,{addTimeSheetModal:z,refreshList:function(t){t?e(Object(r.d)({date:C.a.unix(K).startOf("day").valueOf(),enddate:C.a.unix(K).endOf("day").valueOf(),option:V,userId:1===parseInt(D.rolelevel)?"":M,client:re.id,service:je.id,taskfilter:W})):E(!1)},selectedTimesheet:q}),Object(T.jsx)(N.l,{children:Object(T.jsx)(N.m,{children:Object(T.jsxs)(N.mb,{className:"mb-0",responsive:!0,children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Date"}),Object(T.jsx)("th",{children:"Client"}),Object(T.jsx)("th",{children:1===V?"Task":"User"}),Object(T.jsx)("th",{children:"Start"}),Object(T.jsx)("th",{children:"End"}),Object(T.jsx)("th",{children:"Total"}),Object(T.jsx)("th",{children:"Actions"})]})}),null===k||void 0===k?void 0:k.map((function(e,t){var n,i;return Object(T.jsx)(l.Fragment,{children:Object(T.jsxs)("thead",{children:[Object(T.jsxs)("tr",{className:"my-50",onClick:function(){return function(e){var t=k.map((function(t){var n=Object(s.a)({},t);return e.id===t.id?n.openflg=!t.openflg:n.openflg=!1,n}));S(t)}(e)},children:[Object(T.jsx)("th",{className:"border-white-3 border border-5 ".concat(e.openflg?"bg-light-primary":"bg-light-ocean"," text-white"),colSpan:"5",children:e.name}),Object(T.jsx)("th",{className:"border-white-3 border border-5 ".concat(e.openflg?"bg-light-primary":"bg-light-ocean"," text-white"),children:(i=null===e||void 0===e?void 0:e.timesheets,i?null===i||void 0===i?void 0:i.reduce((function(e,t){var n=me(t.totalhours,!0),c=me(t.totalhours,!1);return e[0]+=parseInt(n,10),e[1]+=parseInt(c,10),e[1]>=60&&(e[0]+=~~(e[1]/60),e[1]=e[1]%60),e}),[0,0]).map((function(e){return e<10?"0".concat(e):e})).join(" : "):"00:00")}),Object(T.jsx)("th",{className:"border-white-3 border border-5 ".concat(e.openflg?"bg-light-primary":"bg-light-ocean"," text-white"),children:!0===e.openflg?Object(T.jsx)(b.a,{size:16}):Object(T.jsx)(O.a,{size:16})})]}),(null===e||void 0===e?void 0:e.timesheets)&&!0===e.openflg&&(null===e||void 0===e||null===(n=e.timesheets)||void 0===n?void 0:n.map((function(e,t){var n,s,i,l;return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:C()(e.createdon).format("MMM DD, Y")}),Object(T.jsx)("td",{className:"p-75",children:e.clientname?(null===(n=e.clientname)||void 0===n?void 0:n.length)<21?e.clientname:"".concat(null===(s=e.clientname)||void 0===s?void 0:s.substr(0,20),"..."):"Non-Task Linked Time"}),Object(T.jsx)("td",{className:"p-75",children:null!==e&&void 0!==e&&e.taskname?(null===(i=e.taskname)||void 0===i?void 0:i.length)<21?e.taskname:"".concat(null===(l=e.taskname)||void 0===l?void 0:l.substr(0,20),"..."):""}),Object(T.jsx)("td",{className:"p-75",children:Oe(e.starttime)}),Object(T.jsx)("td",{className:"p-75",children:null!==e.endtime?Oe(e.endtime):"-"}),Object(T.jsx)("td",{className:"p-75 text-center",children:fe(e||"0")}),Object(T.jsxs)("td",{children:[Object(T.jsx)(f.a,{size:15,className:"cursor-pointer",onClick:function(){return function(e){A(e),E(!0)}(e)}}),Object(T.jsx)(m.a,{size:15,className:"ms-50 cursor-pointer",onClick:function(){return t=e.id,L.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ms-1"},buttonsStyling:!1}).then(function(){var e=Object(a.a)(Object(c.a)().mark((function e(n){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.value){e.next=4;break}return e.next=3,he(t);case 3:L.fire({icon:"success",title:"Deleted!",text:"TImesheet has been deleted.",customClass:{confirmButton:"btn btn-success"}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var t}})]})]},t)}))),!(null!==e&&void 0!==e&&e.timesheets)&&!0===e.openflg&&Object(T.jsx)("td",{colSpan:7,children:Object(T.jsx)("h5",{className:"text-center",children:"No Records"})})]},t)})}))]})})})]})};n(792),n(752),t.default=function(){return Object(T.jsx)("div",{className:"app-user-list",children:Object(T.jsx)(G,{})})}},737:function(e,t,n){},741:function(e,t,n){},752:function(e,t,n){},755:function(e,t,n){},792:function(e,t,n){"use strict";var c=n(27),a=n(7),s=n.n(a),i=n(14),l=n(3);t.a=function(e){var t=e.icon,n=e.color,a=e.stats,r=e.renderStats,o=e.statTitle,d=e.className,u=e.statsMargin;return Object(l.jsx)(i.l,{children:Object(l.jsx)(i.m,{className:d,children:Object(l.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(l.jsxs)("div",{children:[r||Object(l.jsx)("h2",{className:s()("fw-bolder",Object(c.a)({"mb-0":!u},u,u)),children:a}),Object(l.jsx)("p",{className:"card-text",children:o})]}),Object(l.jsx)("div",{className:"avatar avatar-stats p-50 m-0 ".concat(n?"bg-light-".concat(n):"bg-light-primary"),children:Object(l.jsx)("div",{className:"avatar-content",children:t})})]})})})}}}]);
//# sourceMappingURL=81.70ccb33d.chunk.js.map