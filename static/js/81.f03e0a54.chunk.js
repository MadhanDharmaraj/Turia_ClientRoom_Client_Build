(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[81],{1426:function(e,t,c){"use strict";c.r(t);var n=c(8),a=c(3),r=c(5),s=c(9),i=c(0),o=c(13),u=c(186),d=c(705),l=c(708),b=c(709),j=c(4),m=c(6),f=c(16),O=Object(f.d)(),p=Object(j.b)("appInvoiceSetting/getInvoiceAccount",function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){var c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/transactionaccounts/list",t);case 2:return c=e.sent,e.abrupt("return",{params:t,data:c.data.transactionaccounts});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h=Object(j.b)("appInvoiceSetting/addAccount",function(){var e=Object(r.a)(Object(a.a)().mark((function e(t,c){var n,r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.dispatch,r=c.getState,e.next=3,m.a.post("/transactionaccounts/create",t);case 3:return e.next=5,n(p(r().invoiceaccount.params));case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()),x=Object(j.b)("appInvoiceSetting/updateAccount",function(){var e=Object(r.a)(Object(a.a)().mark((function e(t,c){var n,r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.dispatch,r=c.getState,e.next=3,m.a.post("/transactionaccounts/update",t);case 3:return e.next=5,n(p(r().invoiceaccount.params||{}));case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()),v=Object(j.b)("appInvoiceSetting/updateAccount",function(){var e=Object(r.a)(Object(a.a)().mark((function e(t,c){var n,r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.dispatch,r=c.getState,e.next=3,m.a.post("/transactionaccounts/delete",{id:t,updatedBy:O});case 3:return e.next=5,n(p(r().invoiceaccount.params||{}));case 5:return e.abrupt("return","");case 6:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()),N=Object(j.b)("appInvoiceSetting/updatePrimary",function(){var e=Object(r.a)(Object(a.a)().mark((function e(t,c){var n,r,s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.dispatch,s=c.getState,e.next=3,m.a.post("/transactionaccounts/updateprimary",{id:t,updatedBy:O});case 3:return e.next=5,r(p((null===(n=s().invoiceaccount)||void 0===n?void 0:n.params)||{}));case 5:return e.abrupt("return","");case 6:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()),y=(Object(j.c)({name:"appInvoiceSetting",initialState:{data:[],total:1,params:{},allData:[],accounts:[]},reducers:{},extraReducers:function(e){e.addCase(p.fulfilled,(function(e,t){e.accounts=t.payload.data,e.params=t.payload.params||{}}))}}).reducer,c(184)),g=c.n(y),k=c(185),C=c.n(k),B=c(702),A=c(703),w=c(7),S=c.n(w),I=c(17),P=c(183),z=c(334),H=c(286),T=c(355),q=c(325),E=c(259),F=c(2),V=Object(f.a)(),D=Object(f.b)(),R=Object(f.d)();t.default=function(){var e=C()(g.a),t=Object(i.useState)([]),c=Object(s.a)(t,2),j=c[0],m=c[1],f=Object(i.useState)(null),O=Object(s.a)(f,2),y=O[0],k=O[1],w=Object(i.useState)(!1),X=Object(s.a)(w,2),J=X[0],K=X[1],Y=function(){return Object(F.jsx)(i.Fragment,{children:Object(F.jsx)(A.a,{})})},_=Object(i.useState)(!1),G=Object(s.a)(_,2),L=G[0],M=G[1],Q=Object(I.c)((function(e){return e.invoiceaccount})),U=Object(I.b)(),$=l.d().shape({organizationId:l.f().default(D),bankName:l.f().required("Please Enter Bank Name"),accountBusinessName:l.f().required("Please Enter Account Name"),countryCode:l.f().default(V.countryshortname),ifscCode:l.f().default("").when("countryCode",{is:function(e){return"IN"===e},then:l.f().required("Please IFSC Code")}),accountNumber:l.f().required("Please Enter Account Number"),branchAddress:l.f().default("").when("countryCode",{is:function(e){return"IN"===e},then:l.f().required("Please Enter Branch Name")}),accountType:l.f().required("Please Select Account Type"),description:l.f(),isPrimary:l.b().default(!1),bankCode:l.f().default("1"),accountHolderName:l.f(),updatedBy:l.f().default(R),createdBy:l.f().default(R)}),W=Object(d.f)({resolver:Object(b.a)($),defaultValues:$.cast()}),Z=W.handleSubmit,ee=W.formState.errors,te=W.control,ce=W.reset,ne=W.setValue,ae=function(){M(!1),ce({organizationId:D,bankName:"",id:null,accountBusinessName:"",ifscCode:"",accountNumber:"",branchAddress:"",accountType:1,description:"",isPrimary:"",bankCode:"",accountHolderName:""})},re=function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){var c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(K(!0),c="",null===y){e.next=9;break}return e.next=5,U(x(t));case 5:k(null),c="Added",e.next=12;break;case 9:return e.next=11,U(h(t));case 11:c="Updated";case 12:return K(!1),ae(),P.b.success("Bank Account ".concat(c," Succesfully"),{position:"bottom-right"}),e.next=17,U(p({}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)(Object(r.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(p({}));case 2:case"end":return e.stop()}}),e)}))),[]),Object(i.useEffect)((function(){var e,t=null!==(e=Q.accounts.find((function(e){return e.isPrimary})))&&void 0!==e?e:{};ne("isPrimary",0===Object.keys(t).length),m(Q.accounts)}),[Q.accounts]);var se=function(){var e=te._formValues.bankName,t=te._formValues.accountNumber;if(t){var c="".concat(e," - XXXX").concat(t.substr(-4,4));ne("accountHolderName",c)}},ie=[{id:1,name:"Savings"},{id:2,name:"".concat("IN"===V.countryshortname?"Current":"Checking")}],oe=function(e,t){var c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(F.jsxs)(o.B,{md:6,children:[Object(F.jsx)(o.N,{sm:"12",className:S()("form-label ".concat(c?"required":"")),for:t,children:e}),Object(F.jsxs)(o.B,{children:[Object(F.jsx)(d.a,{id:t,name:t,control:te,render:function(e){var c=e.field;return Object(F.jsx)(o.K,Object(n.a)(Object(n.a)({invalid:ee[t]&&!0},c),{},{onInput:function(){"bankName"!==t&&"accountNumber"!==t||se()}}))}}),ee[t]&&Object(F.jsx)(o.I,{children:ee[t].message})]})]})};return Object(F.jsx)(i.Fragment,{children:Object(F.jsx)(B.a,{blocking:J,loader:Object(F.jsx)(Y,{}),children:Object(F.jsx)(o.l,{children:Object(F.jsx)(o.m,{className:"py-25",children:Object(F.jsxs)(o.ib,{className:"gx-4",children:[Object(F.jsxs)(o.B,{lg:"12",className:"mt-2 mt-lg-0",children:[Object(F.jsx)(o.ib,{className:"mb-50",children:Object(F.jsx)(o.B,{children:Object(F.jsxs)(o.i,{color:"primary",size:"sm",onClick:function(){M(!0)},children:[" ",Object(F.jsx)(z.a,{size:15}),"Add Account"]})})}),Object(F.jsxs)(o.mb,{className:"table table-hover table-bordered",children:[Object(F.jsx)("thead",{children:Object(F.jsxs)("tr",{children:[Object(F.jsx)("th",{children:"Bank Name"}),Object(F.jsx)("th",{children:"Account Holder Name"}),Object(F.jsx)("th",{children:"Status"}),Object(F.jsx)("th",{children:"Account Name "}),Object(F.jsx)("th",{children:"Actions"})]})}),Object(F.jsx)("tbody",{children:Array.isArray(j)&&j.map((function(t,c){return Object(F.jsxs)("tr",{children:[Object(F.jsx)("td",{className:"text-primary",children:t.bankName}),Object(F.jsx)("td",{children:t.accountBusinessName}),Object(F.jsx)("td",{children:t.isPrimary&&Object(F.jsx)(o.f,{color:"light-primary",className:"ms-50",children:"Primary"})}),Object(F.jsx)("td",{className:"card-number ",children:t.accountHolderName}),Object(F.jsx)("td",{className:"text-start text-lg-end",children:Object(F.jsxs)("div",{className:"d-flex align-items-center order-sm-0 order-1 mt-1 mt-sm-0",children:["Cash"!==t.accountHolderName&&Object(F.jsxs)("div",{className:"d-flex order-sm-0 order-1 mt-1 mt-sm-0",children:[Object(F.jsx)(H.a,{onClick:function(){return function(e){k(e),M(!0),ce({organizationId:D,bankName:e.bankName,id:e.id,accountBusinessName:e.accountBusinessName,ifscCode:e.ifscCode,accountNumber:e.accountNumber,branchAddress:e.branchAddress,accountType:parseInt(e.accountType),description:e.description,isPrimary:e.isPrimary,bankCode:e.bankCode,accountHolderName:e.accountHolderName})}(t)},size:14}),!t.isPrimary&&Object(F.jsx)("div",{className:"d-flex",children:Object(F.jsx)(T.a,{className:"ms-1 me-1",onClick:function(){var c;c=t.id,e.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ms-1"},buttonsStyling:!1}).then(function(){var t=Object(r.a)(Object(a.a)().mark((function t(n){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.value){t.next=9;break}return t.next=3,U(v(c));case 3:return e.fire({icon:"success",title:"Deleted!",text:"Account has been deleted.",customClass:{confirmButton:"btn btn-success"}}),t.next=6,U(p({}));case 6:return t.abrupt("return",!0);case 9:if(n.dismiss!==e.DismissReason.cancel){t.next=11;break}return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},size:14})})]}),!t.isPrimary&&Object(F.jsxs)(o.wb,{children:[Object(F.jsx)(o.G,{tag:"div",className:"btn btn-sm p-0",children:Object(F.jsx)(q.a,{size:14,className:"cursor-pointer"})}),Object(F.jsx)(o.F,{children:Object(F.jsxs)(o.E,{className:"w-100",onClick:function(){var e;e=t.id,U(N(e))},children:[Object(F.jsx)(E.a,{size:14,className:"me-50"}),Object(F.jsx)("span",{className:"align-middle",children:"Mark as Primary"})]})})]})]})})]},c)}))})]})]}),Object(F.jsxs)(o.Q,{isOpen:L,toggle:function(){return M(!L)},className:"modal-dialog-centered",children:[Object(F.jsx)(o.T,{toggle:function(){return ae()},children:"Invoice Account"}),Object(F.jsx)(o.R,{children:Object(F.jsxs)(o.B,{lg:"12",children:[Object.keys(ee).map((function(e){var t;return Object(F.jsxs)(o.I,{children:["$",null===(t=ee[e])||void 0===t?void 0:t.message]},e)})),Object(F.jsxs)(o.ib,{tag:o.H,className:"gx-2 gy-1",onSubmit:Z(re),children:[oe("Bank Name","bankName"),oe("Account Name","accountBusinessName"),oe("Account Number","accountNumber"),"IN"===V.countryshortname&&oe("IFSC Code","ifscCode"),"IN"===V.countryshortname?oe("Branch Name","branchAddress"):oe("Branch Name","branchAddress",!1),function(e,t,c){var a,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(F.jsxs)(o.B,{md:6,children:[Object(F.jsx)(o.N,{sm:"12",className:S()("form-label ".concat(r?"required":"")),for:t,children:e}),Object(F.jsxs)(o.B,{children:[Object(F.jsx)(d.a,{control:te,name:t,id:t,render:function(e){var a=e.field,r=e.ref;return Object(F.jsx)(u.a,Object(n.a)(Object(n.a)({inputRef:r,className:S()("react-select",{"is-invalid":ee[t]})},a),{},{classNamePrefix:"select",options:c,value:c.find((function(e){return e.id===a.value})),onChange:function(e){return a.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),ee[t]&&Object(F.jsx)(o.I,{className:"text-danger",children:null===(a=ee[t])||void 0===a?void 0:a.message})]})]})}("Account Type","accountType",ie,!0),Object(F.jsxs)(o.B,{md:12,children:[Object(F.jsx)(o.N,{className:"form-label",for:"description",children:"Description"}),Object(F.jsx)(d.a,{id:"description",name:"description",control:te,render:function(e){var t=e.field;return Object(F.jsx)(o.K,Object(n.a)({type:"textarea",invalid:ee.description&&!0},t))}}),ee.description&&Object(F.jsx)(o.I,{children:ee.description.message})]}),Object(F.jsxs)(o.B,{className:"mt-2 pt-1",xs:12,children:[Object(F.jsx)(o.i,{type:"submit",className:"me-1",color:"primary",children:"Submit"}),Object(F.jsx)(o.i,{type:"button",className:"me-1",color:"warning",onClick:function(){return ae()},children:"Cancel"})]})]})]})})]})]})})})})})}},702:function(e,t,c){"use strict";var n=c(8),a=c(23),r=c(0),s=c(7),i=c.n(s),o=c(13),u=(c(704),c(2)),d=function(e){var t,c=e.children,s=e.blocking,o=e.loader,d=e.className,l=e.tag,b=e.overlayColor,j=l;return Object(u.jsxs)(j,{className:i()("ui-loader",(t={},Object(a.a)(t,d,d),Object(a.a)(t,"show",s),t)),children:[c,s?Object(u.jsxs)(r.Fragment,{children:[Object(u.jsx)("div",Object(n.a)({className:"overlay"},s&&b?{style:{backgroundColor:b}}:{})),Object(u.jsx)("div",{className:"loader",children:o})]}):null]})};t.a=d,d.defaultProps={tag:"div",blocking:!1,loader:Object(u.jsx)(o.jb,{color:"primary"})}},703:function(e,t,c){"use strict";var n=c(2);t.a=function(){return Object(n.jsx)("div",{className:"fallback-spinner",children:Object(n.jsxs)("div",{className:"loading",children:[Object(n.jsx)("div",{className:"effect-1 effects"}),Object(n.jsx)("div",{className:"effect-2 effects"}),Object(n.jsx)("div",{className:"effect-3 effects"})]})})}},704:function(e,t,c){}}]);
//# sourceMappingURL=81.f03e0a54.chunk.js.map