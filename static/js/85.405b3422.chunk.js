(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[85],{1433:function(e,t,c){"use strict";c.r(t);var s=c(8),n=c(25),a=c(3),r=c(5),l=c(10),i=c(11),o=c(0),d=c(186),j=c(7),b=c.n(j),u=c(6),O=c(52),m=c(13),f=c(708),x=c(709),h=c(333),p=c(287),g=c(285),v=c(353),N=c(704),k=c(184),w=c.n(k),y=c(185),C=c.n(y),S=c(371),B=c(19),I=c(16),R=c(183),K=c(2),A=function(e){var t=e.roleId,c=Object(o.useState)([]),s=Object(l.a)(c,2),n=s[0],a=s[1],r=Object(o.useState)([]),i=Object(l.a)(r,2),d=i[0],j=i[1];return Object(o.useEffect)((function(){null!==t&&(a([]),null!==t&&u.a.post("/rolepermissions/list",{roleId:t}).then((function(e){j(e.data.rolepermission.permissions.split(","))})).catch((function(){})),u.a.post("/modules/list").then((function(e){a(e.data.modules)})).catch((function(){})))}),[t]),Object(K.jsx)(o.Fragment,{children:Object(K.jsx)(m.ib,{children:Object(K.jsx)(m.B,{xs:12,children:Object(K.jsx)(m.mb,{className:"table-flush-spacing",responsive:!0,children:Object(K.jsx)("tbody",{children:d.length>0&&n.map((function(e,t){return Object(K.jsxs)("tr",{children:[Object(K.jsx)("td",{className:"text-nowrap fw-bolder",children:e.name}),Object(K.jsx)("td",{children:Object(K.jsxs)("div",{className:"d-flex",children:[Object(K.jsxs)("div",{className:"form-check me-3 me-lg-5",children:[Object(K.jsx)(m.K,{type:"checkbox",id:"read-".concat(e.slug),value:"".concat(e.slug,"-read"),defaultChecked:d.indexOf("".concat(e.slug,"-read"))>-1,disabled:!0}),Object(K.jsx)(m.N,{className:"form-check-label",for:"read-".concat(e.slug),children:"Read"})]}),Object(K.jsxs)("div",{className:"form-check me-3 me-lg-5",children:[Object(K.jsx)(m.K,{type:"checkbox",id:"write-".concat(e.slug),value:"".concat(e.slug,"-write"),defaultChecked:d.indexOf("".concat(e.slug,"-write"))>-1,disabled:!0}),Object(K.jsx)(m.N,{className:"form-check-label",for:"write-".concat(e.slug),children:"Write"})]}),Object(K.jsxs)("div",{className:"form-check me-3 me-lg-5",children:[Object(K.jsx)(m.K,{type:"checkbox",id:"delete-".concat(e.slug),value:"".concat(e.slug,"-delete"),defaultChecked:d.indexOf("".concat(e.slug,"-delete"))>-1,disabled:!0}),Object(K.jsx)(m.N,{className:"form-check-label",for:"delete-".concat(e.slug),children:"Delete"})]}),Object(K.jsxs)("div",{className:"form-check me-3 me-lg-5",children:[Object(K.jsx)(m.K,{type:"checkbox",id:"import-".concat(e.slug),value:"".concat(e.slug,"-import"),defaultChecked:d.indexOf("".concat(e.slug,"-import"))>-1,disabled:!0}),Object(K.jsx)(m.N,{className:"form-check-label",for:"import-".concat(e.slug),children:"import"})]}),Object(K.jsxs)("div",{className:"form-check",children:[Object(K.jsx)(m.K,{type:"checkbox",id:"export-".concat(e.slug),value:"".concat(e.slug,"-export"),defaultChecked:d.indexOf("".concat(e.slug,"-export"))>-1,disabled:!0}),Object(K.jsx)(m.N,{className:"form-check-label",for:"export-".concat(e.slug),children:"Export"})]})]})})]},t)}))})})})})})},E=c(701),z=c(702),D=Object(B.b)(),L=Object(B.d)();t.default=function(e){Object(i.a)(e);var t=C()(w.a),c=Object(o.useState)(!1),j=Object(l.a)(c,2),k=j[0],y=j[1],B=Object(o.useState)([]),P=Object(l.a)(B,2),F=P[0],T=P[1],V=Object(o.useState)("Add New"),J=Object(l.a)(V,2),Q=J[0],U=J[1],W=Object(I.c)((function(e){return e.role})),Y=Object(I.b)(),q=Object(o.useState)([]),G=Object(l.a)(q,2),H=G[0],M=G[1],X=Object(o.useState)([]),Z=Object(l.a)(X,2),$=Z[0],_=Z[1],ee=Object(o.useState)(!1),te=Object(l.a)(ee,2),ce=te[0],se=te[1],ne=Object(o.useState)(null),ae=Object(l.a)(ne,2),re=ae[0],le=ae[1],ie=Object(o.useState)([]),oe=Object(l.a)(ie,2),de=oe[0],je=oe[1],be=Object(o.useState)(!1),ue=Object(l.a)(be,2),Oe=ue[0],me=ue[1],fe=[{id:1,name:"Level 1"},{id:2,name:"Level 2"},{id:3,name:"Level 3"}],xe=function(){return Object(K.jsx)(o.Fragment,{children:Object(K.jsx)(z.a,{})})},he=function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){var c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("/rolepermissions/list",{roleId:t});case 2:return c=e.sent,e.next=5,je(c.data.rolepermission.permissions.split(","));case 5:return e.next=7,_(c.data.rolepermission.permissions.split(","));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=f.d().shape({organizationId:f.f().default(D),name:f.f().required("Please Enter Role"),description:f.f().nullable(),panel:f.f().default("client"),role:f.f().default("client"),isDefault:f.c().default(3),isAdminRole:f.b().default(!1),updatedBy:f.f().default(L),createdBy:f.f().default(L),permissionsArr:f.a().min("1")}),ge=Object(N.f)({resolver:Object(x.a)(pe),defaultValues:pe.cast()}),ve=ge.handleSubmit,Ne=ge.formState.errors,ke=ge.control,we=ge.reset,ye=ge.setValue,Ce=function(){var e=Object(r.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!1),e.next=3,Y(Object(S.e)());case 3:we({id:"",name:"",description:""});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){var c,s,n,r,l;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(me(!0),"Edit"!==Q){e.next=10;break}return e.next=4,Y(Object(S.f)(t));case 4:return s={organizationId:D,roleId:t.id,permissions:$.toString(),updatedBy:L},e.next=7,Y(Object(S.g)(s));case 7:c="Updated",e.next=17;break;case 10:return e.next=12,Y(Object(S.a)(t));case 12:return r=e.sent,l={organizationId:D,roleId:null===r||void 0===r||null===(n=r.payload)||void 0===n?void 0:n.id,permissions:$.toString(),createdBy:L},e.next=16,Y(Object(S.b)(l));case 16:c="Added";case 17:me(!1),R.b.success("Role ".concat(c," Successfully"),{position:"bottom-right"}),Ce();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(e,t,c){var s="".concat(t,"-").concat(c),a=Object(n.a)($);e.target.checked?a=[].concat(Object(n.a)($),[s]):a.splice($.indexOf(s),1),_(a),ye("permissionsArr",a)};Object(o.useEffect)((function(){T(W.data)}),[W.data]);var Ie=function(){return H.map((function(e,t){var c=e.transactions.split(",");return Object(K.jsxs)("tr",{children:[Object(K.jsx)("td",{className:"text-nowrap fw-bolder",children:e.name}),Object(K.jsx)("td",{children:Object(K.jsxs)("div",{className:"d-flex",children:[Object(K.jsxs)("div",{className:"form-check me-3 me-lg-5",children:[Object(K.jsx)(m.K,{type:"checkbox",id:"read-".concat(e.slug),onChange:function(t){return Be(t,e.slug,"read")},value:"".concat(e.slug,"-read"),defaultChecked:de.indexOf("".concat(e.slug,"-read"))>-1,disabled:-1===c.indexOf("read")}),Object(K.jsx)(m.N,{className:"form-check-label",for:"read-".concat(e.slug),children:"Read"})]}),Object(K.jsxs)("div",{className:"form-check me-3 me-lg-5",children:[Object(K.jsx)(m.K,{type:"checkbox",id:"write-".concat(e.slug),onChange:function(t){return Be(t,e.slug,"write")},value:"".concat(e.slug,"-write"),defaultChecked:de.indexOf("".concat(e.slug,"-write"))>-1,disabled:-1===c.indexOf("write")}),Object(K.jsx)(m.N,{className:"form-check-label",for:"write-".concat(e.slug),children:"Write"})]}),Object(K.jsxs)("div",{className:"form-check me-3 me-lg-5",children:[Object(K.jsx)(m.K,{type:"checkbox",id:"delete-".concat(e.slug),onChange:function(t){return Be(t,e.slug,"delete")},value:"".concat(e.slug,"-delete"),defaultChecked:de.indexOf("".concat(e.slug,"-delete"))>-1,disabled:-1===c.indexOf("delete")}),Object(K.jsx)(m.N,{className:"form-check-label",for:"delete-".concat(e.slug),children:"Delete"})]}),Object(K.jsxs)("div",{className:"form-check me-3 me-lg-5",children:[Object(K.jsx)(m.K,{type:"checkbox",id:"import-".concat(e.slug),onChange:function(t){return Be(t,e.slug,"import")},value:"".concat(e.slug,"-import"),defaultChecked:de.indexOf("".concat(e.slug,"-import"))>-1,disabled:-1===c.indexOf("import")}),Object(K.jsx)(m.N,{className:"form-check-label",for:"import-".concat(e.slug),children:"import"})]}),Object(K.jsxs)("div",{className:"form-check",children:[Object(K.jsx)(m.K,{type:"checkbox",id:"export-".concat(e.slug),onChange:function(t){return Be(t,e.slug,"export")},value:"".concat(e.slug,"-export"),defaultChecked:de.indexOf("".concat(e.slug,"-export"))>-1,disabled:-1===c.indexOf("export")}),Object(K.jsx)(m.N,{className:"form-check-label",for:"export-".concat(e.slug),children:"Export"})]})]})})]},t)}))},Re=function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return we(t),ye("rolelevel",parseInt(t.rolelevel)),e.next=4,le(t.id);case 4:return e.next=6,he(t.id);case 6:return e.next=8,U("Edit");case 8:y(!0),Ie();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)(Object(r.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(Object(S.e)());case 2:u.a.post("/modules/list").then((function(e){M(e.data.modules)})).catch((function(){}));case 3:case"end":return e.stop()}}),e)}))),[]),Object(K.jsxs)(o.Fragment,{children:[Object(K.jsx)(m.l,{children:Object(K.jsx)(m.m,{children:Object(K.jsxs)(m.ib,{children:[Object(K.jsx)(m.ib,{children:Object(K.jsx)(O.b,{I:"write",a:"role",children:Object(K.jsx)(m.B,{children:Object(K.jsxs)(m.i,{color:"primary",size:"sm",onClick:function(){y(!0)},children:[" ",Object(K.jsx)(h.a,{size:15}),"Add"]})})})}),Object(K.jsxs)(m.mb,{className:"table table-bordered table-hover",children:[Object(K.jsx)("thead",{children:Object(K.jsxs)("tr",{children:[Object(K.jsx)("th",{children:"Name"}),Object(K.jsx)("th",{children:"Level"}),Object(K.jsx)("th",{children:"Status"}),Object(K.jsx)("th",{children:"No of Users"}),Object(K.jsx)("th",{children:"Actions"})]})}),Object(K.jsx)("tbody",{children:F.map((function(e,c){return Object(K.jsxs)("tr",{children:[Object(K.jsx)("td",{className:"fw-bolder",children:e.name}),Object(K.jsxs)("td",{className:"fw-bolder",children:["Level ",e.rolelevel]}),Object(K.jsx)("td",{children:1===e.status?Object(K.jsx)(m.f,{color:"light-success",className:"ms-50",children:"Active"}):Object(K.jsx)(m.f,{color:"light-danger",className:"ms-50",children:"InActive"})}),Object(K.jsx)("td",{children:e.noofusers}),Object(K.jsx)("td",{children:Object(K.jsx)(O.b,{I:"write",a:"role",children:Object(K.jsxs)("div",{className:"d-flex",children:[Object(K.jsx)(p.a,{size:15,className:"me-1",onClick:function(){le(e.id),se(!0)}}),!e.isdefault&&Object(K.jsxs)("div",{className:"d-flex",children:[Object(K.jsx)(g.a,{size:15,className:"me-1",onClick:function(){Re(e)}}),Object(K.jsx)(v.a,{size:15,onClick:function(){return c=e.id,t.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ms-1"},buttonsStyling:!1}).then(function(){var e=Object(r.a)(Object(a.a)().mark((function e(s){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.value){e.next=9;break}return e.next=3,Y(Object(S.d)(c));case 3:return t.fire({icon:"success",title:"Deleted!",text:"Department has been deleted.",customClass:{confirmButton:"btn btn-success"}}),e.next=6,Y(Object(S.e)());case 6:return e.abrupt("return",!0);case 9:if(s.dismiss!==t.DismissReason.cancel){e.next=11;break}return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var c}})]})]})})})]},c)}))})]})]})})}),Object(K.jsxs)(m.Q,{isOpen:ce,toggle:function(){return se(!ce)},className:"modal-dialog-centered modal-lg",children:[Object(K.jsx)(m.T,{className:"bg-transparent",toggle:function(){return se(!ce)},children:"Role Permissions"}),Object(K.jsx)(m.R,{children:Object(K.jsx)(A,{roleId:re})})]}),Object(K.jsx)(m.Q,{isOpen:k,onClosed:function(){U("Add New")},toggle:function(){return y(!k)},className:"modal-dialog-centered modal-lg",children:Object(K.jsxs)(E.a,{blocking:Oe,loader:Object(K.jsx)(xe,{}),children:[Object(K.jsx)(m.T,{className:"bg-transparent",toggle:function(){return y(!k)}}),Object(K.jsxs)(m.R,{className:"px-2",children:[Object(K.jsx)("div",{className:"text-center mb-1",children:Object(K.jsxs)("h1",{children:[Q," Role"]})}),Object(K.jsxs)(m.ib,{tag:"form",onSubmit:ve(Se),children:[Object(K.jsxs)(m.B,{xs:12,children:[Object(K.jsx)(m.N,{className:"form-label",for:"name",children:"Role Name"}),Object(K.jsx)(N.a,{name:"name",control:ke,render:function(e){var t=e.field;return Object(K.jsx)(m.K,Object(s.a)(Object(s.a)({},t),{},{id:"name",placeholder:"Enter Role name",invalid:Ne.name&&!0}))}}),Ne.name&&Object(K.jsx)(m.I,{children:"Please enter a valid role name"})]}),Object(K.jsxs)(m.B,{xs:12,className:"mt-1",children:[Object(K.jsx)(m.N,{className:"form-label",for:"name",children:"Level"}),Object(K.jsx)(N.a,{name:"rolelevel",control:ke,render:function(e){var t=e.field,c=e.ref;return Object(K.jsx)(d.a,Object(s.a)(Object(s.a)({inputRef:c,className:b()("react-select",{"is-invalid":Ne.rolelevel})},t),{},{classNamePrefix:"select",options:fe,onChange:function(e){return ye("rolelevel",e.id)},value:fe.find((function(e){return e.id===t.value})),getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),Ne.rolelevel&&Object(K.jsx)(m.I,{children:"Please Select Role Level"})]}),Object(K.jsxs)(m.B,{xs:12,className:"mt-1",children:[Object(K.jsx)(m.N,{className:"form-label",for:"description",children:"Description"}),Object(K.jsx)(N.a,{name:"description",control:ke,render:function(e){var t=e.field;return Object(K.jsx)(m.K,Object(s.a)(Object(s.a)({},t),{},{id:"description",placeholder:"Enter Description",invalid:Ne.description&&!0}))}})]}),Object(K.jsxs)(m.B,{xs:12,children:[Object(K.jsx)("h4",{className:"mt-2 pt-50",children:"Role Permissions"}),Object(K.jsx)(m.mb,{className:"table-flush-spacing",responsive:!0,children:Object(K.jsx)("tbody",{children:Ie()})})]}),Object(K.jsxs)(m.B,{className:"text-center mt-2",xs:12,children:[Object(K.jsx)(m.i,{type:"submit",color:"primary",className:"me-1",children:"Submit"}),Object(K.jsx)(m.i,{type:"button",color:"warning",onClick:Ce,children:"Cancel"})]})]})]})]})})]})}},701:function(e,t,c){"use strict";var s=c(8),n=c(23),a=c(0),r=c(7),l=c.n(r),i=c(13),o=(c(703),c(2)),d=function(e){var t,c=e.children,r=e.blocking,i=e.loader,d=e.className,j=e.tag,b=e.overlayColor,u=j;return Object(o.jsxs)(u,{className:l()("ui-loader",(t={},Object(n.a)(t,d,d),Object(n.a)(t,"show",r),t)),children:[c,r?Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)("div",Object(s.a)({className:"overlay"},r&&b?{style:{backgroundColor:b}}:{})),Object(o.jsx)("div",{className:"loader",children:i})]}):null]})};t.a=d,d.defaultProps={tag:"div",blocking:!1,loader:Object(o.jsx)(i.jb,{color:"primary"})}},702:function(e,t,c){"use strict";var s=c(2);t.a=function(){return Object(s.jsx)("div",{className:"fallback-spinner",children:Object(s.jsxs)("div",{className:"loading",children:[Object(s.jsx)("div",{className:"effect-1 effects"}),Object(s.jsx)("div",{className:"effect-2 effects"}),Object(s.jsx)("div",{className:"effect-3 effects"})]})})}},703:function(e,t,c){}}]);
//# sourceMappingURL=85.405b3422.chunk.js.map