(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[67],{1519:function(e,t,n){"use strict";n.r(t);var c=n(8),s=n(2),a=n(18),i=n(5),r=n(12),l=n(10),o=n(0),d=n(747),u=n.n(d),j=n(387),m=n(365),b=n(190),f=n(742),O=n(744),v=n(745),x=n(14),p=n(6),h=(n(746),n(481),n(737),n(743),n(21)),g=n(13),w=n(735),N=n(736),y=n(185),D=n.n(y),I=n(186),C=n.n(I),k=n(28),B=n.n(k),S=n(7),_=n.n(S),E=n(184),P=n(23),F=n(25),z=n(3),q=Object(g.b)(),K=Object(g.d)(),L=function(e){var t;Object(l.a)(e);var n=C()(D.a),d=Object(o.useState)(!1),g=Object(r.a)(d,2),y=g[0],I=g[1],k=function(){return Object(z.jsx)(o.Fragment,{children:Object(z.jsx)(N.a,{})})},S=Object(P.f)(),L=Object(h.b)(),Y=Object(h.c)((function(e){return e.digitalsignature})),V=O.d().shape({clientId:O.f().required("Please Select Client"),rows:O.a().of(O.d().shape({name:O.f().required("Please Enter Name"),createdBy:O.f().default(K),organizationId:O.f().default(q),email:O.f().email().required("Please Enter Email"),contact:O.f().matches(/^[0-9\- ]{10,10}$/,{message:"Phone number is not valid",excludeEmptyString:!0}),issuedDate:O.c().required("Please Enter Issued Date"),expiryDate:O.c().required("Please Enter Expiry Date"),password:O.f().min(5,"Password length should be 5 or above.")}))}),A=Object(f.f)({resolver:Object(v.a)(V),defaultValues:V.cast()}),J=A.handleSubmit,R=A.formState.errors,U=A.control,M=Object(o.useState)([]),T=Object(r.a)(M,2),$=T[0],G=T[1],H=Object(o.useState)(""),Q=Object(r.a)(H,2),W=Q[0],X=Q[1],Z=Object(f.e)({name:"rows",keyName:"rowid",control:U}),ee=Z.fields,te=Z.append,ne=Z.remove,ce=function(){var e=Object(i.a)(Object(s.a)().mark((function e(t){var n,c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),n=Object(a.a)(t.rows),c=n.map((function(e){return e.issuedDate=B.a.unix(e.issuedDate).startOf("d").valueOf(),e.expiryDate=B.a.unix(e.expiryDate).startOf("d").valueOf(),e})),t.rows=c,e.next=6,L(Object(b.b)(t));case 6:S("/digital-signature/list");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){te({clientId:W,name:"",email:"",contact:"",issuedDate:"",expiryDate:"",password:""})},ae=function(e){return n.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ms-1"},buttonsStyling:!1}).then(function(){var t=Object(i.a)(Object(s.a)().mark((function t(c){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c.value){t.next=7;break}return t.next=3,L(Object(b.d)(e));case 3:return n.fire({icon:"success",title:"Deleted!",text:"DSC has been deleted.",customClass:{confirmButton:"btn btn-success"}}),t.abrupt("return",!0);case 7:if(c.dismiss!==n.DismissReason.cancel){t.next=9;break}return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},ie=function(){var e=Object(i.a)(Object(s.a)().mark((function e(t){var n,c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(n=U._formValues.rows[t].id)){e.next=5;break}return e.next=4,ae(n);case 4:c=e.sent;case 5:c&&ne(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(i.a)(Object(s.a)().mark((function e(t){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(t),ne(),e.next=4,L(Object(b.a)(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){Y.DSCLists.forEach((function(e){var t={};t.id=e.id,t.name=e.name,t.createdBy=K,t.email=e.email,t.organizationId=q,t.clientId=e.clientid,t.contact=e.contact,t.issuedDate=e.issueddate?String(e.issueddate/1e3):null,t.expiryDate=e.expirydate?String(e.expirydate/1e3):null,t.password=e.password||"",te(t)})),0===Y.DSCLists.length&&se()}),[Y.DSCLists]),Object(o.useEffect)((function(){p.a.post("/clients/dropdown",{status:1}).then((function(e){var t=e.data;G(t.clients)}))}),[]),Object(z.jsx)(w.a,{blocking:y,loader:Object(z.jsx)(k,{}),children:Object(z.jsxs)("form",{onSubmit:J(ce),children:[Object(z.jsxs)(x.l,{className:"invoice-preview-card",children:[Object(z.jsx)(x.m,{className:"pb-0",children:Object(z.jsx)(x.ib,{children:Object(z.jsx)(x.B,{md:"6",className:"mb-1",children:Object(z.jsxs)(x.ib,{className:"mb-1",children:[Object(z.jsx)(x.N,{sm:"3",size:"lg",className:"form-label",for:"clientId",children:"Client"}),Object(z.jsxs)(x.B,{sm:"9",children:[Object(z.jsx)(f.a,{control:U,name:"clientId",id:"clientId",render:function(e){var t=e.field,n=e.ref;return Object(z.jsx)(E.a,Object(c.a)(Object(c.a)({},t),{},{inputRef:n,className:_()("react-select",{"is-invalid":R.clientId}),classNamePrefix:"select",options:$,value:$.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),re(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),R.clientId&&Object(z.jsx)(x.I,{className:"text-danger",children:null===(t=R.clientId)||void 0===t?void 0:t.message})]})]})})})}),Object(z.jsxs)(x.m,{className:"invoice-padding invoice-product-details",children:[ee.map((function(e,t){var n,s,a,i,r,l,o,d,m,b,O,v,p,h,g,w,N,y,D,I,C,k,B,S;return Object(z.jsx)("div",{className:"repeater-wrapper",children:Object(z.jsx)(x.ib,{children:Object(z.jsxs)(x.B,{className:"d-lg-flex product-details-border position-relative pe-0",sm:"12",children:[Object(z.jsxs)(x.ib,{className:"w-100 pe-lg-0 pe-1 py-2",children:[Object(z.jsxs)(x.B,{className:"mb-lg-0 mb-2 mt-lg-0 mt-2 col-lg-2 col-sm-12",children:[Object(z.jsx)(x.u,{className:"col-title mb-md-50 mb-0",children:"Name"}),Object(z.jsx)(f.a,{control:U,id:"dsc_list_name",name:"rows[".concat(t,"].name"),render:function(e){var n,s,a=e.field;return Object(z.jsx)(x.K,Object(c.a)({type:"text",invalid:(null===(n=R.rows)||void 0===n||null===(s=n[t])||void 0===s?void 0:s.name)&&!0},a))}}),(null===(n=R.rows)||void 0===n||null===(s=n[t])||void 0===s?void 0:s.name)&&Object(z.jsx)(x.I,{children:null===(a=R.rows)||void 0===a||null===(i=a[t])||void 0===i?void 0:i.name.message})]}),Object(z.jsxs)(x.B,{className:"my-lg-0 my-2 col-lg-2 col-sm-12",children:[Object(z.jsx)(x.u,{className:"col-title mb-md-50 mb-0",children:"Email"}),Object(z.jsx)(f.a,{control:U,id:"dsc_list_email",name:"rows[".concat(t,"].email"),render:function(e){var n,s,a=e.field;return Object(z.jsx)(x.K,Object(c.a)({type:"email",invalid:(null===(n=R.rows)||void 0===n||null===(s=n[t])||void 0===s?void 0:s.email)&&!0},a))}}),(null===(r=R.rows)||void 0===r||null===(l=r[t])||void 0===l?void 0:l.email)&&Object(z.jsx)(x.I,{children:null===(o=R.rows)||void 0===o||null===(d=o[t])||void 0===d?void 0:d.email.message})]}),Object(z.jsxs)(x.B,{className:"my-lg-0 my-2",lg:"2",sm:"12",children:[Object(z.jsx)(x.u,{className:"col-title mb-md-50 mb-0",children:"Mobile"}),Object(z.jsx)(f.a,{control:U,id:"dsc_list_contactNumber",name:"rows[".concat(t,"].contact"),render:function(e){var n,s,a=e.field;return Object(z.jsx)(x.K,Object(c.a)({type:"number",invalid:(null===(n=R.rows)||void 0===n||null===(s=n[t])||void 0===s?void 0:s.contact)&&!0},a))}}),(null===(m=R.rows)||void 0===m||null===(b=m[t])||void 0===b?void 0:b.contact)&&Object(z.jsx)(x.I,{children:null===(O=R.rows)||void 0===O||null===(v=O[t])||void 0===v?void 0:v.contact.message})]}),Object(z.jsxs)(x.B,{className:"my-lg-0 mt-2",lg:"2",sm:"12",children:[Object(z.jsx)(x.u,{className:"col-title mb-md-50 mb-0",children:"Issued Date"}),Object(z.jsx)(f.a,{control:U,id:"dsc_list_issuedDate",name:"rows[".concat(t,"].issuedDate"),render:function(e){var t=e.field;return Object(z.jsx)(u.a,{value:t.value,onChange:function(e,n){t.onChange(n)},options:{altInput:!0,altFormat:"F j, Y",dateFormat:"U"},className:"form-control invoice-edit-input date-picker"})}}),(null===(p=R.rows)||void 0===p||null===(h=p[t])||void 0===h?void 0:h.issuedDate)&&Object(z.jsx)(x.I,{children:null===(g=R.rows)||void 0===g||null===(w=g[t])||void 0===w?void 0:w.issuedDate.message})]}),Object(z.jsxs)(x.B,{className:"my-lg-0 mt-2",lg:"2",sm:"12",children:[Object(z.jsx)(x.u,{className:"col-title mb-md-50 mb-0",children:"Expiry Date"}),Object(z.jsx)(f.a,{control:U,id:"dsc_list_expiryDate",name:"rows[".concat(t,"].expiryDate"),render:function(e){var t=e.field;return Object(z.jsx)(u.a,{value:t.value,onChange:function(e,n){t.onChange(n)},options:{altInput:!0,altFormat:"F j, Y",dateFormat:"U"},className:"form-control invoice-edit-input date-picker"})}}),(null===(N=R.rows)||void 0===N||null===(y=N[t])||void 0===y?void 0:y.expiryDate)&&Object(z.jsx)(x.I,{children:null===(D=R.rows)||void 0===D||null===(I=D[t])||void 0===I?void 0:I.expiryDate.message})]}),Object(z.jsxs)(x.B,{className:"my-lg-0 mt-2",lg:"2",sm:"12",children:[Object(z.jsx)(x.u,{className:"col-title mb-md-50 mb-0",children:"Password"}),Object(z.jsx)(f.a,{control:U,id:"dsc_list_password",name:"rows[".concat(t,"].password"),render:function(e){var n,s,a=e.field;return Object(z.jsx)(x.K,Object(c.a)({type:"text",invalid:(null===(n=R.rows)||void 0===n||null===(s=n[t])||void 0===s?void 0:s.password)&&!0},a))}}),(null===(C=R.rows)||void 0===C||null===(k=C[t])||void 0===k?void 0:k.password)&&Object(z.jsx)(x.I,{children:null===(B=R.rows)||void 0===B||null===(S=B[t])||void 0===S?void 0:S.password.message})]})]}),Object(z.jsx)("div",{className:"d-lg-flex justify-content-center invoice-product-actions py-50 px-25",children:Object(z.jsx)(j.a,{size:18,className:"cursor-pointer",onClick:function(){return ie(t)}})})]})})},e.rowid)})),Object(z.jsx)(x.ib,{className:"mt-1",children:Object(z.jsx)(x.B,{sm:"12",className:"px-0",children:Object(z.jsxs)(x.i,{color:"primary",size:"sm",className:"btn-add-new",onClick:function(){return se()},children:[Object(z.jsx)(m.a,{size:14,className:"me-25"})," ",Object(z.jsx)("span",{className:"align-middle",children:"Add Item"})]})})})]})]}),Object(z.jsx)(x.l,{children:Object(z.jsx)(x.m,{children:Object(z.jsxs)("div",{className:"modal-footer border-0",children:[Object(z.jsx)(x.i,{color:"warning",outline:!0,tag:F.b,to:"/digital-signature/list",children:"Cancel"}),Object(z.jsx)(x.i,{color:"primary",type:"submit",children:"Save"})]})})})]})})};t.default=function(){return Object(z.jsx)("div",{className:"invoice-add-wrapper",children:Object(z.jsx)(x.ib,{className:"invoice-add",children:Object(z.jsx)(x.B,{xl:12,md:12,sm:12,children:Object(z.jsx)(L,{})})})})}},735:function(e,t,n){"use strict";var c=n(8),s=n(27),a=n(0),i=n(7),r=n.n(i),l=n(14),o=(n(738),n(3)),d=function(e){var t,n=e.children,i=e.blocking,l=e.loader,d=e.className,u=e.tag,j=e.overlayColor,m=u;return Object(o.jsxs)(m,{className:r()("ui-loader",(t={},Object(s.a)(t,d,d),Object(s.a)(t,"show",i),t)),children:[n,i?Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)("div",Object(c.a)({className:"overlay"},i&&j?{style:{backgroundColor:j}}:{})),Object(o.jsx)("div",{className:"loader",children:l})]}):null]})};t.a=d,d.defaultProps={tag:"div",blocking:!1,loader:Object(o.jsx)(l.jb,{color:"primary"})}},736:function(e,t,n){"use strict";var c=n(3);t.a=function(){return Object(c.jsx)("div",{className:"fallback-spinner",children:Object(c.jsxs)("div",{className:"loading",children:[Object(c.jsx)("div",{className:"effect-1 effects"}),Object(c.jsx)("div",{className:"effect-2 effects"}),Object(c.jsx)("div",{className:"effect-3 effects"})]})})}},737:function(e,t,n){},738:function(e,t,n){},743:function(e,t,n){},746:function(e,t,n){}}]);
//# sourceMappingURL=67.04d3568f.chunk.js.map