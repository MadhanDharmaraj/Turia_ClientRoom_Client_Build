(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[53],{1487:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(5),i=n(12),s=n(0),r=n(23),o=n(25),l=n(6),d=n(14),u=n(13),b=n(8),j=n(10),m=n(747),f=n.n(m),p=n(332),O=n(253),x=n(365),v=n(184),h=n(742),g=n(744),N=n(745),y=n(7),w=n.n(y),A=n(61),I=n(189),k=n(735),z=n(736),C=(n(746),n(481),n(737),n(743),n(795)),S=n(21),B=n(185),P=n.n(B),T=n(138),V=n(186),_=n.n(V),F=n(28),D=n.n(F),E=n(3),q=Object(u.b)(),L=Object(u.a)(),R=Object(u.d)(),G=function(e){var t,n,u,m=e.data,y=Object(s.useState)(!1),B=Object(i.a)(y,2),V=B[0],F=B[1],G=function(){return Object(E.jsx)(s.Fragment,{children:Object(E.jsx)(z.a,{})})},H={multiValue:function(e,t){return Object(j.a)(t),Object(b.a)(Object(b.a)({},e),{},{backgroundColor:"#7367f0"})}},K=Object(r.g)().id,Z=_()(P.a),J=Object(s.useState)([]),U=Object(i.a)(J,2),M=U[0],Y=U[1],$=Object(s.useState)([]),Q=Object(i.a)($,2),W=Q[0],X=Q[1],ee=Object(s.useState)([]),te=Object(i.a)(ee,2),ne=te[0],ae=te[1],ce=Object(s.useState)([]),ie=Object(i.a)(ce,2),se=ie[0],re=ie[1],oe=Object(s.useState)([]),le=Object(i.a)(oe,2),de=le[0],ue=le[1],be=Object(s.useState)(0),je=Object(i.a)(be,2),me=je[0],fe=je[1],pe=Object(s.useState)(0),Oe=Object(i.a)(pe,2),xe=Oe[0],ve=Oe[1],he=Object(s.useState)(0),ge=Object(i.a)(he,2),Ne=ge[0],ye=ge[1],we=Object(s.useState)(0),Ae=Object(i.a)(we,2),Ie=Ae[0],ke=Ae[1],ze=Object(s.useState)([]),Ce=Object(i.a)(ze,2),Se=Ce[0],Be=Ce[1],Pe=Object(s.useState)([]),Te=Object(i.a)(Pe,2),Ve=Te[0],_e=Te[1],Fe=Object(s.useState)([]),De=Object(i.a)(Fe,2),Ee=De[0],qe=De[1],Le=Object(s.useState)({}),Re=Object(i.a)(Le,2),Ge=Re[0],He=Re[1],Ke=Object(s.useState)([]),Ze=Object(i.a)(Ke,2),Je=Ze[0],Ue=Ze[1],Me=Object(s.useState)("Profoma Invoice"),Ye=Object(i.a)(Me,2),$e=Ye[0],Qe=Ye[1],We=Object(s.useState)([]),Xe=Object(i.a)(We,2),et=Xe[0],tt=Xe[1],nt=Object(s.useState)([]),at=Object(i.a)(nt,2),ct=at[0],it=at[1],st=Object(s.useState)([]),rt=Object(i.a)(st,2),ot=rt[0],lt=rt[1],dt=Object(s.useState)([]),ut=Object(i.a)(dt,2),bt=ut[0],jt=ut[1],mt=Object(r.f)(),ft=Object(S.b)(),pt=Object(S.c)((function(e){return e.invoice})),Ot=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.a.post("/organizationusers/dropdown").then((function(e){var t=e.data.organizationusers;qe(t)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xt=function(e){return Z.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ms-1"},buttonsStyling:!1}).then(function(){var t=Object(c.a)(Object(a.a)().mark((function t(n){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.value){t.next=7;break}return t.next=3,ft(Object(I.g)(e));case 3:return Z.fire({icon:"success",title:"Deleted!",text:"Conatct has been deleted.",customClass:{confirmButton:"btn btn-success"}}),t.abrupt("return",!0);case 7:if(n.dismiss!==Z.DismissReason.cancel){t.next=9;break}return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())};Object(s.useEffect)((function(){l.a.post("/clients/dropdown",{status:1}).then((function(e){var t=e.data;Y(t.clients)})),l.a.post("/services/dropdown",{status:1}).then((function(e){var t=e.data;X(t.services)})),l.a.post("/taxgroups/dropdown").then((function(e){var t=e.data;ae(t.taxgroups)})),l.a.post("/states/list").then((function(e){var t=e.data;re(t.states)})),l.a.post("/transactionaccounts/dropdown").then((function(e){var t=e.data;ue(t.transactionaccounts)})),Ot(),l.a.post("/exemptionreasons/dropdown").then((function(e){var t=e.data;it(t.exemptionreasons)})),l.a.post("/taskinvoices/getparticipants",{invoiceId:K}).then((function(e){var t=e.data.taskinvoiceparticipants.map((function(e){return e.id}));lt(t),jt(e.data.taskinvoiceparticipants)})).catch((function(e){console.log(e)}))}),[]);var vt=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft(Object(I.i)(t));case 2:n=e.sent,He(n.payload);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ht=g.d().shape({createdBy:g.f().default(R),contactId:g.f().required("Please select a Client"),uniqueIdentity:g.f(),contactEmail:g.f(),contactName:g.f(),invoiceDate:g.f(),paymentDue:g.f(),placeOfSupplyId:g.f().required("Please select a Place Of Supply"),subTotalAmount:g.f(),totalAmount:g.f(),placeOfSupplyOthers:g.f().default(""),totalTaxAmount:g.f(),organizationId:g.f().default(q),isRcmApplicable:g.b().default(!1),isgstregistered:g.b().default(!0),dueAmount:g.f(),billingAddressLine1:g.f(),billingAddressLine2:g.f(),billingAddressState:g.f(),billingAddressCity:g.f(),billingAddressZipCode:g.f(),billingCurrencyId:g.f().default(L.currencyid),bankAccountBankName:g.f(),bankAccountBranchName:g.f(),bankAccountHolderName:g.f(),bankAccountId:g.f().required("Please Select Account"),billingAddressStateOthers:g.f().default(""),bankAccountIfscCode:g.f(),bankAccountNumber:g.f(),organizationAddressLine1:g.f().default(L.addressline1),organizationAddressLine2:g.f().default(L.addressline2),organizationCity:g.f().default(L.organizationcity),organizationState:g.f().default(L.statename),organizationStateOthers:g.f().default(null!==(t=L.stateothers)&&void 0!==t?t:""),organizationZipCode:g.f().default(L.pinzipcode),convertionAmount:g.f().default(0),organizationName:g.f().default(L.name),organizationImageUrl:g.f().default(L.organizationimageid||""),organizationStateCode:g.f().default(L.stateshortname),organizationGstin:g.f().default(L.gstin),gstin:g.f(),note:g.f().default(""),status:g.c().default(4),calculateTaxes:g.f(),paymentStatus:g.c().default(5),rows:g.a().of(g.d().shape({serviceId:g.f().required("Please Select Service Item"),invoiceId:g.f(),sacCode:g.f(),price:g.f(),organizationId:g.f().default(q),exemptionReasonId:g.f().default(""),isTaxApplicable:g.b().default(!0),actualPrice:g.f().required(),taxGroupId:g.f().required("Pleace Select Tax"),subTotalAmount:g.f().required(1),taxes:g.f()}))}),gt=Object(h.f)({resolver:Object(N.a)(ht),defaultValues:ht.cast()}),Nt=gt.handleSubmit,yt=gt.formState.errors,wt=gt.control,At=gt.setValue,It=gt.reset,kt=Object(h.e)({control:wt,name:"rows",keyName:"rowid"}),zt=kt.fields,Ct=kt.append,St=kt.remove,Bt=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n,c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Se.forEach((function(e,n){Se[n].invoiceId=t,Se[n].updatedBy=R})),e.next=3,ft(Object(I.n)(Se));case 3:if(!(ot.length>0)){e.next=9;break}return n=[],ot.forEach((function(e){var t=bt.findIndex((function(t){return t.id===e}));-1!==t&&bt.length>0&&n.push(bt[t].id)})),c={users:ot,organizationId:q,invoiceId:t,deletedUser:n},e.next=9,ft(Object(I.c)(c));case 9:4===m.status?mt("/proposal/view/".concat(pt.invoiceId)):mt("/invoice/view/".concat(pt.invoiceId));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pt=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.invoiceDate=D()(t.invoiceDate).valueOf(),t.paymentDue=D()(t.paymentDue).valueOf(),F(!0),n=t.rows,Be(n),delete t.rows,e.next=8,ft(Object(I.m)(t));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)(Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==pt.invoiceId&&Se.length>0)){e.next=3;break}return e.next=3,Bt(pt.invoiceId);case 3:case"end":return e.stop()}}),e)}))),[pt.invoiceId,Se]);var Tt=function(){Ct({invoiceId:0,organizationId:q,serviceId:"",exemptionReasonId:0,isTaxApplicable:!0,sacCode:"",actualPrice:0,taxGroupId:"",subTotalAmount:0,taxPrice:0,description:""})};Object(s.useEffect)((function(){Tt()}),[]);var Vt=function(){var e=wt._formValues.rows,t=0,n=0,a=0;e.forEach((function(e){t=parseFloat(e.subTotalAmount)+parseFloat(t),n=parseFloat(e.price)+parseFloat(n),a=parseFloat(a)+parseFloat(e.taxPrice)})),wt._formValues.subTotalAmount=n,wt._formValues.totalAmount=t,wt._formValues.dueAmount=t,wt._formValues.totalTaxAmount=a,fe(t),ke(parseFloat(Ne*t).toFixed(2)),ve(n),function(){var e;e=wt._formValues.rows.map((function(e){return e.taxes?Object(C.b)(e.taxes):[]})).flat().reduce((function(e,t){if(void 0!==t){var n=e.find((function(e){return t.taxName===e.taxName}));n?(n.taxAmount=parseFloat(n.taxAmount)+parseFloat(t.taxAmount),n.taxAmount=String(n.taxAmount)):e.push(Object.assign({},t))}return e}),[]),_e(e),At("calculateTaxes",JSON.stringify(e))}()},_t=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n,c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(n=wt._formValues.rows[t].id)){e.next=5;break}return e.next=4,xt(n);case 4:c=e.sent;case 5:c&&St(t),Vt();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ft=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=wt._formValues.rows[e];if(void 0===o.serviceId||""===o.serviceId)return!1;if(0===W.length)return!1;var l=W.find((function(e){return e.id===o.serviceId}));At("rows[".concat(e,"].serviceId"),o.serviceId),r?(At("rows[".concat(e,"].sacCode"),l.saccode||""),t=l.sellingprice||0,n=l.taxgroupid,At("rows[".concat(e,"].actualPrice"),t),At("rows[".concat(e,"].price"),String(l.sellingprice)||0),At("rows[".concat(e,"].taxGroupId"),n),At("rows[".concat(e,"].description"),l.description),At("rows[".concat(e,"].exemptionReasonId"),l.exemptionreasonid||"")):(At("rows[".concat(e,"].sacCode"),i?o.sacCode:l.saccode),t=c?o.price:l.sellingprice||0,n=s?o.taxGroupId:l.taxgroupid,At("rows[".concat(e,"].price"),t),At("rows[".concat(e,"].actualPrice"),String(l.sellingprice)||0),At("rows[".concat(e,"].taxGroupId"),n),At("rows[".concat(e,"].description"),a?o.description:l.description),At("rows[".concat(e,"].exemptionReasonId"),l.exemptionreasonid||""));var d=0,u=[],b=ne.find((function(e){return e.id===n})),j=void 0!==b?!b.nontaxableflag:l.istaxapplicable||!1;j=j&&(null===L||void 0===L?void 0:L.isgstregistered)&&(null===L||void 0===L?void 0:L.isgstregistered)&&"IN"===Ge.billingaddresscountriesshorcode,At("rows[".concat(e,"].isTaxApplicable"),j),j&&void 0!==b&&Je.forEach((function(e){if(e.taxid===n){var a;a=Object(C.a)(t,e.percentage,2),d=parseFloat(d)+parseFloat(a);var c={};c.taxName="".concat(e.name," (").concat(e.percentage,"%)"),c.taxId=parseInt(e.id),c.taxNameValue=e.name,c.taxPercentage=String(e.percentage),c.taxAmount=String(a),u.push(c)}})),At("rows[".concat(e,"].subTotalAmount"),parseFloat(parseFloat(d||0)+parseFloat(t||0)).toFixed(2)),At("rows[".concat(e,"].taxPrice"),parseFloat(d).toFixed(2)),At("rows[".concat(e,"].taxes"),JSON.stringify(u)),At("rows[".concat(e,"].updatedBy"),R),Vt()},Dt=function(){var e=1;L.stateid===wt._formValues.placeOfSupplyId&&(e=2),function(e){var t={type:e};l.a.post("/taxvalues/list",t).then((function(e){var t=e.data;Ue(t.taxvalues)}))}(e)};Object(s.useEffect)((function(){Je.length>0&&"object"===typeof wt._formValues.rows&&wt._formValues.rows.forEach((function(e,t){Ft(t,!0,!0,!0,!0,!1)}))}),[Je]);var Et=function(e){var t=de.find((function(t){return t.id===e}));void 0!==t&&(tt(t),At("bankAccountBankName",t.bankName),At("bankAccountBranchName",t.branchAddress),At("bankAccountHolderName",t.accountHolderName),At("bankAccountIfscCode",t.ifscCode),At("bankAccountNumber",t.accountNumber))};Object(s.useEffect)((function(){de.length>0&&Et(wt._formValues.bankAccountId)}),[de]),Object(s.useEffect)(Object(c.a)(Object(a.a)().mark((function e(){var t,n,c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object.keys(Ge).length>0)){e.next=25;break}if(At("billingAddressCity",Ge.billingaddresscity||""),At("billingAddressLine1",Ge.billingaddressline1||""),At("billingAddressLine2",Ge.billingaddressline2||""),At("billingAddressState",Ge.billingaddressstatesname||""),At("billingAddressZipCode",Ge.billingaddresszip||""),At("billingCurrencyId",Ge.currencyid||L.currencyid),At("billingCurrencySymbol",Ge.currenciessymbol||""),At("billingCurrencyShortName",Ge.currenciescode||""),At("billingCurrencyName",Ge.currenciesname||""),At("contactEmail",Ge.email||""),At("gstin",Ge.gstin||""),At("contactName",Ge.name||""),At("placeOfSupplyId",Ge.placeofsupplyid||""),Dt(),At("convertionAmount",0),St(),Tt(),null!==L&&void 0!==L&&L.isgstregistered&&"IN"===Ge.billingaddresscountriesshorcode?Dt():(At("billingAddressStateOthers",null!==(t=Ge.billingaddressstateothers)&&void 0!==t?t:""),At("placeOfSupplyOthers",null!==(n=Ge.placeofsupplyothers)&&void 0!==n?n:"")),"IN"===Ge.billingaddresscountriesshorcode){e.next=25;break}return e.next=22,Object(T.a)(Ge.currenciescode.toUpperCase(),L.currencycode);case 22:c=e.sent,ye(c),At("convertionAmount",c);case 25:case"end":return e.stop()}}),e)}))),[Ge]);var qt=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=6;break}return e.next=3,ft(Object(I.k)(t));case 3:n=e.sent,At("rows",n.payload),Vt();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)(Object(c.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object.keys(m).length>0)){e.next=8;break}return It({contactId:(t=m).contactid,uniqueIdentity:t.uniqueno,contactEmail:t.contactemail,contactName:t.contactname,invoiceDate:D()(t.invoicedate,"x").toDate(),paymentDue:D()(t.paymentdue,"x").toDate(),placeOfSupplyId:t.placeofsupplyid,subTotalAmount:t.subtotalamount,totalAmount:t.totalamount,totalTaxAmount:t.totaltaxamount,isRcmApplicable:t.isrcmapplicable,dueAmount:t.dueamount,billingAddressLine1:t.billingaddressline1||"",billingAddressLine2:t.billingaddressline2||"",billingAddressState:t.billingaddressstate||"",billingAddressCity:t.billingaddresscity||"",billingAddressZipCode:t.billingaddresszipcode||"",billingCurrencyId:t.billingcurrencyid||"",bankAccountBankName:t.bankaccountbankname,bankAccountBranchName:t.bankaccountbranchname,bankAccountHolderName:t.bankaccountholdername,bankAccountId:t.bankaccountid,bankAccountIfscCode:t.bankaccountifsccode,bankAccountNumber:t.bankaccountnumber,organizationAddressLine1:""===t.organizationaddressline1?L.addressline1:t.organizationaddressline1,organizationAddressLine2:""===t.organizationaddressline2?L.addressline2:t.organizationaddressline2,organizationCity:""===t.organizationcity?L.organizationcity:t.organizationcity,organizationState:""===t.organizationstate?L.statename:t.organizationstate,organizationZipCode:""===t.organizationzipcode?L.pinzipcode:t.organizationzipcode,organizationName:""===t.organizationname?L.name:t.organizationname,organizationImageUrl:null===t.organizationimageurl?L.organizationimageid:t.organizationimageurl,organizationStateCode:t.organizationstatecode||"",organizationGstin:""===t.organizationgstin?L.gstin:t.gstin,gstin:t.gstin,note:t.note,status:t.status,paymentStatus:t.paymentstatus}),Qe(4===parseInt(t.status)?"Profoma Invoice":"Invoice"),e.next=6,vt(t.contactid);case 6:return e.next=8,qt(t.id);case 8:case"end":return e.stop()}}),e)}))),[m]);var Lt=function(e){var t=Array.isArray(e)?e.map((function(e){return e.id})):[];lt(t)};return Object(E.jsx)(k.a,{blocking:V,loader:Object(E.jsx)(G,{}),children:Object(E.jsx)("form",{onSubmit:Nt(Pt),children:Object(E.jsx)(d.ib,{className:"invoice-add",children:Object(E.jsxs)(s.Fragment,{children:[Object(E.jsx)(d.B,{xl:10,md:8,sm:12,children:Object(E.jsxs)(d.l,{className:"invoice-preview-card",children:[Object(E.jsxs)(d.m,{className:"invoice-padding pb-0",children:[function(){var e=Object.keys(yt),t=[];return Array.isArray(e)&&e.forEach((function(e){var n;"rows"!==e&&t.push(Object(E.jsxs)(d.I,{children:["$",null===(n=yt[e])||void 0===n?void 0:n.message]},e))})),t}(),Object(E.jsxs)("div",{className:"d-flex justify-content-between flex-md-row flex-column invoice-spacing mt-0",children:[Object(E.jsxs)("div",{children:[Object(E.jsx)("div",{className:"logo-wrapper",children:null===L.imageid?Object(E.jsx)(A.a,{color:"primary",className:"me-50",content:null!==L.name?null===(n=L.name)||void 0===n?void 0:n.charAt(0):""}):Object(E.jsx)("img",{referrerPolicy:"no-referrer",className:"rounded me-50",height:75,width:75,src:"https://drive.google.com/thumbnail?id=".concat(L.imageid,"&authuser=0"),alt:"Organisation Logo"})}),Object(E.jsx)("h3",{className:"text-primary invoice-logo",children:L.name}),Object(E.jsx)("p",{className:"card-text mb-25",children:L.addressline1}),Object(E.jsx)("p",{className:"card-text mb-25",children:L.addressline2}),Object(E.jsxs)("p",{className:"card-text mb-0",children:[L.organizationcity," - ",L.pinzipcode]}),Object(E.jsx)("p",{className:"card-text mb-0",children:L.statename})]}),Object(E.jsxs)("div",{className:"invoice-number-date mt-md-0 mt-2",children:[Object(E.jsxs)("div",{className:"d-flex align-items-center justify-content-md-end mb-1",children:[Object(E.jsx)("h4",{className:"invoice-title",children:$e}),Object(E.jsxs)(d.L,{className:"input-group-merge invoice-edit-input-group disabled",children:[Object(E.jsx)(d.M,{children:Object(E.jsx)(p.a,{size:15})}),Object(E.jsx)(d.K,{type:"number",className:"invoice-edit-input",value:3171,placeholder:"53634",disabled:!0})]})]}),Object(E.jsxs)("div",{className:"d-flex align-items-center justify-content-md-between mb-1",children:[Object(E.jsx)("span",{className:"title required",children:"Profoma Invoice Date"}),Object(E.jsx)(h.a,{control:wt,name:"invoiceDate",id:"invoiceDate",render:function(e){var t=e.field;return Object(E.jsx)(f.a,{value:t.value,onChange:function(e,n){t.onChange(n)},options:{altInput:!0},className:"form-control invoice-edit-input date-picker"})}})]}),Object(E.jsxs)("div",{className:"d-flex align-items-center justify-content-md-between",children:[Object(E.jsx)("span",{className:"title required",children:"Due Date"}),Object(E.jsx)(h.a,{control:wt,name:"paymentDue",id:"paymentDue",render:function(e){var t=e.field;return Object(E.jsx)(f.a,{value:t.value,onChange:function(e,n){t.onChange(n)},options:{altInput:!0},className:"form-control invoice-edit-input due-date-picker"})}})]})]})]})]}),Object(E.jsx)("hr",{className:"invoice-spacing"}),Object(E.jsxs)(d.m,{className:"invoice-padding pt-0",children:[Object(E.jsxs)(d.ib,{className:"row-bill-to invoice-spacing",children:[Object(E.jsxs)(d.B,{className:"col-bill-to ps-0",xl:"6",children:[Object(E.jsx)("h6",{className:"invoice-to-title required",children:"Profoma Invoice To"}),Object(E.jsx)("div",{className:"invoice-customer",children:Object(E.jsx)(h.a,{control:wt,name:"contactId",id:"contactId",render:function(e){var t=e.field,n=e.ref;return Object(E.jsx)(v.a,Object(b.a)(Object(b.a)({inputRef:n,className:w()("react-select",{"is-invalid":yt.contactId})},t),{},{classNamePrefix:"select",options:M,value:M.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),vt(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}})}),Object(E.jsx)(d.B,{className:"pe-0 mt-xl-2",xl:"4",children:Object(E.jsx)("table",{children:Object(E.jsxs)("tbody",{children:[Object(E.jsx)("tr",{children:Object(E.jsx)("td",{children:Ge.billingaddressline1})}),Object(E.jsx)("tr",{children:Object(E.jsx)("td",{children:Ge.billingaddressline2})}),Object(E.jsx)("tr",{children:Object(E.jsxs)("td",{children:[Ge.billingaddresscity," ",Ge.billingaddresszip&&"-","  ",Ge.billingaddresszip]})}),Object(E.jsx)("tr",{children:Object(E.jsx)("td",{children:null!==(u=Ge.billingaddressstatesname)&&void 0!==u?u:Ge.billingaddressstateothers})})]})})})]}),Object(E.jsx)(d.B,{className:"col-bill-to ps-0",xl:"2"}),Object(E.jsxs)(d.B,{className:"pe-0 mt-xl-0 mt-2",xl:"4",children:[Object(E.jsx)("h6",{className:"mb-2",children:"Payment Details:"}),Object(E.jsx)("table",{children:Object(E.jsxs)("tbody",{children:[Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{className:"pe-1",children:"Bank Name:"}),Object(E.jsx)("td",{children:et.bankName&&Object(E.jsx)("span",{className:"fw-bolder",children:et.bankName})})]}),Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{className:"pe-1",children:"Account name:"}),Object(E.jsx)("td",{children:et.accountHolderName&&Object(E.jsx)("span",{className:"fw-bolder",children:et.accountHolderName})})]}),Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{className:"pe-1",children:"Branch Name:"}),Object(E.jsxs)("td",{children:[" ",et.branchAddress&&Object(E.jsx)("span",{className:"fw-bolder",children:et.branchAddress})]})]}),Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{className:"pe-1",children:"IFSC Code:"}),Object(E.jsx)("td",{children:et.ifscCode&&Object(E.jsxs)("span",{className:"fw-bolder",children:[et.ifscCode," "]})})]}),Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{className:"pe-1",children:"Account Type:"}),Object(E.jsx)("td",{children:et.accountType&&Object(E.jsxs)("span",{className:"fw-bolder",children:[["","Saving","Current"][et.accountType]," "]})})]})]})})]})]}),(null===L||void 0===L?void 0:L.isgstregistered)&&Object(E.jsxs)(d.ib,{className:"row-bill-to invoice-spacing",children:[Object(E.jsxs)(d.B,{className:"col-bill-to ps-0",xl:"6",children:[Object(E.jsx)("h6",{className:"invoice-to-title mt-2 required",children:"Place Of Supply"}),Object(E.jsxs)("div",{className:"invoice-customer",children:[(null===L||void 0===L?void 0:L.isgstregistered)&&"IN"===Ge.billingaddresscountriesshorcode&&Object(E.jsx)(h.a,{control:wt,name:"placeOfSupplyId",id:"placeOfSupplyId",render:function(e){var t=e.field,n=e.ref;return Object(E.jsx)(v.a,Object(b.a)(Object(b.a)({inputRef:n,className:w()("react-select",{"is-invalid":yt.placeOfSupplyId})},t),{},{classNamePrefix:"select",options:se,value:se.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),Dt()},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),(null===L||void 0===L?void 0:L.isgstregistered)&&"IN"!==Ge.billingaddresscountriesshorcode&&(null===Ge||void 0===Ge?void 0:Ge.placeofsupplyothers)]}),(null===L||void 0===L?void 0:L.isgstregistered)&&"IN"===Ge.billingaddresscountriesshorcode&&Object(E.jsxs)("div",{className:"mt-1",children:[" GSTIN : ",Ge.gstin]})]}),Object(E.jsx)(d.B,{className:"col-bill-to ps-0",xl:"2"}),Object(E.jsx)(d.B,{className:"pe-0 mt-xl-0 mt-2",xl:"4",children:Object(E.jsx)("table",{children:Object(E.jsx)("tbody",{children:Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{className:"invoice-to-title mt-2 ",children:"Currency Code:"}),Object(E.jsx)("td",{children:Ge.currenciescode})]})})})})]})]}),Object(E.jsxs)(d.m,{className:"invoice-padding invoice-product-details",children:[zt.map((function(e,t){var n,a,c,i,s,r,o,l,u,j,m,f,p,x,g,N;return Object(E.jsx)("div",{className:"repeater-wrapper",children:Object(E.jsx)(d.ib,{children:Object(E.jsxs)(d.B,{className:"d-lg-flex product-details-border position-relative pe-0",sm:"12",children:[Object(E.jsxs)(d.ib,{className:"w-100 pe-lg-0 pe-1 py-2",children:[Object(E.jsxs)(d.B,{className:"mb-lg-0 mb-2 mt-lg-0 mt-2 col-lg-4 col-sm-12",children:[Object(E.jsx)(d.u,{className:"col-title mb-md-50 mb-0",children:"Item"}),Object(E.jsx)(h.a,{control:wt,name:"rows[".concat(t,"].serviceId"),rules:{required:!0},render:function(e){var n,a,c=e.field,i=e.ref;return Object(E.jsx)(v.a,Object(b.a)(Object(b.a)({},c),{},{inputRef:i,className:w()("react-select",{"is-invalid":null===(n=yt.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.serviceId}),classNamePrefix:"select",options:W,value:W.find((function(e){return e.id===c.value})),onChange:function(e){c.onChange(e.id),Ft(t,!1,!1,!1,!1,!0)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),(null===(n=yt.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.serviceId)&&Object(E.jsx)(d.I,{children:null===(c=yt.rows)||void 0===c||null===(i=c[t])||void 0===i?void 0:i.serviceId.message}),Object(E.jsx)(h.a,{id:"rows_".concat(t,"_description"),name:"rows[".concat(t,"].description"),control:wt,render:function(e){var n,a,c=e.field;return Object(E.jsx)(d.K,Object(b.a)({className:"mt-1",invalid:(null===(n=yt.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.description)&&!0,onInput:function(e){c.onChange(e),Ft(t,!0,!1,!1,!1,!1)}},c))}})]}),e.isTaxApplicable&&Object(E.jsxs)(d.B,{className:"my-lg-0 my-2 col-lg-2 col-sm-12",children:[Object(E.jsx)(d.u,{className:"col-title mb-md-2 mb-0",children:"SAC Code"}),Object(E.jsx)(h.a,{id:"rows_".concat(t,"_sacCode"),name:"rows[".concat(t,"].sacCode"),control:wt,render:function(e){var n,a,c=e.field;return Object(E.jsx)(d.K,Object(b.a)({type:"text",invalid:(null===(n=yt.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.sacCode)&&!0,onInput:function(e){c.onChange(e),Ft(t,!1,!0,!0,!1,!1)}},c))}}),(null===(s=yt.rows)||void 0===s||null===(r=s[t])||void 0===r?void 0:r.sacCode)&&Object(E.jsx)(d.I,{children:null===(o=yt.rows)||void 0===o||null===(l=o[t])||void 0===l?void 0:l.sacCode.message})]}),Object(E.jsxs)(d.B,{className:"my-lg-0 my-2",lg:"2",sm:"12",children:[Object(E.jsx)(d.u,{className:"col-title mb-md-2 mb-0",children:"Price"}),Object(E.jsx)(h.a,{id:"rows_".concat(t,"_price"),name:"rows[".concat(t,"].price"),control:wt,render:function(e){var n,a,c=e.field;return Object(E.jsx)(d.K,Object(b.a)(Object(b.a)({type:"number",id:"input_rows_".concat(t,"_price"),onInput:function(e){c.onChange(e),Ft(t,!1,!0,!1,!1,!1)}},c),{},{invalid:(null===(n=yt.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.price)&&!0}))}}),(null===(u=yt.rows)||void 0===u||null===(j=u[t])||void 0===j?void 0:j.price)&&Object(E.jsx)(d.I,{children:null===(m=yt.rows)||void 0===m||null===(f=m[t])||void 0===f?void 0:f.price.message})]}),e.isTaxApplicable&&Object(E.jsxs)(d.B,{className:"my-lg-0 mt-2",lg:"2",sm:"12",children:[Object(E.jsx)(d.u,{className:"col-title mb-md-50 mb-0",children:"Tax Rate"}),Object(E.jsx)(h.a,{control:wt,name:"rows[".concat(t,"].taxGroupId"),rules:{required:!0},render:function(e){var n,a,c=e.field,i=e.ref;return Object(E.jsx)(v.a,Object(b.a)(Object(b.a)({},c),{},{inputRef:i,className:w()("react-select",{"is-invalid":null===(n=yt.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.taxGroupId}),classNamePrefix:"select",options:ne,value:ne.find((function(e){return e.id===c.value})),onChange:function(e){c.onChange(e.id),Ft(t,!1,!0,!1,!0,!1)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),(null===(p=yt.rows)||void 0===p||null===(x=p[t])||void 0===x?void 0:x.taxGroupId)&&Object(E.jsx)(d.I,{children:null===(g=yt.rows)||void 0===g||null===(N=g[t])||void 0===N?void 0:N.taxGroupId.message}),!e.isTaxApplicable&&Object(E.jsx)(h.a,{control:wt,name:"rows[".concat(t,"].exemptionReasonId"),rules:{required:!0},render:function(e){var n,a,c=e.field,i=e.ref;return Object(E.jsx)(v.a,Object(b.a)(Object(b.a)({},c),{},{inputRef:i,className:w()("react-select mt-1",{"is-invalid":null===(n=yt.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.taxGroupId}),classNamePrefix:"select",options:ct,value:ct.find((function(e){return e.id===c.value})),onChange:function(e){c.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}})]}),Object(E.jsxs)(d.B,{className:"my-lg-0 mt-2",lg:"1",sm:"12",children:[Object(E.jsx)(d.u,{className:"col-title mb-md-50 mb-0",children:"Amount"}),wt._formValues.rows[t].subTotalAmount," ",null===Ge||void 0===Ge?void 0:Ge.currenciessymbol]})]}),Object(E.jsx)("div",{className:"d-lg-flex justify-content-center border-start invoice-product-actions py-50 px-25",children:Object(E.jsx)(O.a,{size:18,className:"cursor-pointer",onClick:function(){_t(t)}})})]})})},e.id)})),Object(E.jsx)(d.ib,{className:"mt-1",children:Object(E.jsx)(d.B,{sm:"12",className:"px-0",children:Object(E.jsxs)(d.i,{color:"primary",size:"sm",className:"btn-add-new",onClick:function(){return Tt()},children:[Object(E.jsx)(x.a,{size:14,className:"me-25"})," ",Object(E.jsx)("span",{className:"align-middle",children:"Add Item"})]})})})]}),Object(E.jsx)(d.m,{className:"invoice-padding",children:Object(E.jsxs)(d.ib,{className:"invoice-sales-total-wrapper",children:[Object(E.jsx)(d.B,{className:"mt-md-0 mt-3",md:{size:"6",order:1},xs:{size:12,order:2},children:"IN"!==Ge.billingaddresscountriesname&&Object(E.jsxs)("p",{children:["Amount in ",L.currencycode," : ",Ie," "]})}),Object(E.jsx)(d.B,{className:"d-flex justify-content-end",md:{size:"6",order:2},xs:{size:12,order:1},children:Object(E.jsxs)("div",{className:"invoice-total-wrapper",children:[Object(E.jsxs)("div",{className:"invoice-total-item",children:[Object(E.jsxs)("p",{className:"invoice-total-title",children:[(null===L||void 0===L?void 0:L.isgstregistered)&&(null===L||void 0===L?void 0:L.isgstregistered)&&"IN"===Ge.billingaddresscountriesshorcode&&"Pre Tax","  Amount:"]}),Object(E.jsxs)("p",{className:"invoice-total-amount",children:[xe," ",null===Ge||void 0===Ge?void 0:Ge.currenciessymbol]})]}),(null===L||void 0===L?void 0:L.isgstregistered)&&(null===L||void 0===L?void 0:L.isgstregistered)&&"IN"===Ge.billingaddresscountriesshorcode&&Object(E.jsx)("div",{children:Ve.map((function(e,t){return Object(E.jsxs)("div",{className:"invoice-total-item",children:[Object(E.jsx)("p",{className:"invoice-total-title",children:null===e||void 0===e?void 0:e.taxName}),Object(E.jsxs)("p",{className:"invoice-total-amount",children:[null===e||void 0===e?void 0:e.taxAmount," ",null===Ge||void 0===Ge?void 0:Ge.currenciessymbol]})]},t)}))}),Object(E.jsx)("hr",{className:"my-50"}),Object(E.jsxs)("div",{className:"invoice-total-item",children:[Object(E.jsx)("p",{className:"invoice-total-title",children:"Total Payable:"}),Object(E.jsxs)("p",{className:"invoice-total-amount",children:[me," ",null===Ge||void 0===Ge?void 0:Ge.currenciessymbol]})]})]})})]})}),Object(E.jsx)("hr",{className:"invoice-spacing mt-0"}),Object(E.jsx)(d.m,{className:"invoice-padding py-0",children:Object(E.jsx)(d.ib,{children:Object(E.jsx)(d.B,{children:Object(E.jsxs)("div",{className:"mb-2",children:[Object(E.jsx)(d.N,{for:"note",className:"form-label fw-bold",children:"Note:"}),Object(E.jsx)(h.a,{id:"note",name:"note",control:wt,render:function(e){var t=e.field;return Object(E.jsx)(d.K,Object(b.a)({type:"textarea",value:t.value,invalid:yt.note&&!0},t))}})]})})})})]})}),Object(E.jsxs)(d.B,{xl:2,md:4,sm:12,children:[Object(E.jsx)(d.l,{className:"invoice-action-wrapper",children:Object(E.jsxs)(d.m,{children:[Object(E.jsx)(d.i,{color:"primary",type:"submit",block:!0,outline:!0,className:"mb-75",children:"Save"}),Object(E.jsx)(d.i,{color:"warning",block:!0,outline:!0,tag:o.b,to:"/invoice/list",children:"Cancel"})]})}),Object(E.jsx)("div",{className:"mt-2",children:Object(E.jsxs)("div",{className:"invoice-payment-option",children:[Object(E.jsx)("p",{className:"mb-50 required",children:"Accept payments via"}),Object(E.jsx)(h.a,{control:wt,name:"bankAccountId",rules:{required:!0},render:function(e){var t=e.field,n=e.ref;return Object(E.jsx)(v.a,Object(b.a)(Object(b.a)({},t),{},{inputRef:n,className:w()("react-select mt-1",{"is-invalid":yt.bankAccountId}),classNamePrefix:"select",options:de,value:de.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),Et(e.id)},getOptionLabel:function(e){return e.accountHolderName},getOptionValue:function(e){return e.id}}))}})]})}),Object(E.jsx)("div",{className:"mt-2",children:Object(E.jsxs)("div",{className:"invoice-payment-option",children:[Object(E.jsx)("p",{className:"mb-50",children:"Select Employee"}),Object(E.jsx)(h.a,{control:wt,name:"reviewer",id:"reviewer",render:function(e){var t=e.field,n=e.value,a=e.ref;return Object(E.jsx)(v.a,Object(b.a)(Object(b.a)({inputRef:a,className:w()("react-select",{"is-invalid":yt.reviewer})},t),{},{classNamePrefix:"select",options:Ee,isMulti:!0,value:n,onChange:Lt,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},styles:H}))}})]})})]})]})})})})},H=n(18),K=n(364),Z=n(386),J=Object(u.b)(),U=Object(u.a)(),M=Object(u.d)(),Y=function(e){var t=e.mainInd,n=e.refreshTax,a=e.taxGroupOptions,c=e.itemAmount,i=e.parentaxCallback,r=e.control,o=Object(h.e)({control:r,name:"rows[".concat(t,"].taxes")}),l=o.fields,u=o.append,j=o.remove,m=function(){u({taxGroupId:"",taxAmount:0,taxName:""})};Object(s.useEffect)((function(){var e;0===(null===(e=r._formValues.rows[t])||void 0===e?void 0:e.taxes.length)&&m()}),[]);var f=function(e,n){var s=a.find((function(t){return t.id===e})),r=Object(C.a)(c,s.percentage,2);i({taxAmount:r,taxName:s.name,taxGroupId:s.id},t,n)};return Object(s.useEffect)((function(){n&&r._formValues.rows[t].taxes.forEach((function(e,t){""!==e.taxGroupId&&f(e.taxGroupId,t)}))}),[n]),l.map((function(e,n){return Object(E.jsxs)(d.ib,{className:"d-flex align-items-center justify-content-between pe-lg-0 pe-1 py-50",md:12,children:[Object(E.jsx)(d.B,{md:6}),Object(E.jsx)(d.B,{md:1,className:"d-flex justify-content-end",children:n===l.length-1&&Object(E.jsx)(K.a,{size:"16",className:"text-primary",onClick:function(){return m()}})}),Object(E.jsx)(d.B,{className:"my-lg-0 mt-2",lg:"3",sm:"12",children:Object(E.jsx)(h.a,{control:r,name:"rows[".concat(t,"].taxes[").concat(n,"].taxGroupId"),rules:{required:!0},render:function(e){var t=e.field,c=e.ref;return Object(E.jsx)(v.a,Object(b.a)(Object(b.a)({},t),{},{inputRef:c,className:w()("react-select"),classNamePrefix:"select",options:a,placeholder:"Select Tax Rate",value:a.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),f(e.id,n)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}})}),Object(E.jsx)(d.B,{className:"my-lg-0 mt-2",lg:"1",sm:"12",children:r._formValues.rows[t].taxes[n].taxAmount}),Object(E.jsx)(d.B,{className:"my-lg-0 mt-2",lg:"1",sm:"12",children:r._formValues.rows[t].taxes.length>1&&Object(E.jsx)("div",{className:"d-lg-flex justify-content-center border-start invoice-product-actions py-50 px-25",children:Object(E.jsx)(Z.a,{size:16,onClick:function(){j(n)}})})})]},e.id)}))},$=function(e){var t,n=e.data,u=Object(s.useState)(!1),m=Object(i.a)(u,2),O=m[0],y=m[1],C=function(){return Object(E.jsx)(s.Fragment,{children:Object(E.jsx)(z.a,{})})},B={multiValue:function(e,t){return Object(j.a)(t),Object(b.a)(Object(b.a)({},e),{},{backgroundColor:"#7367f0"})}},T=Object(r.g)().id,V=_()(P.a),F=Object(s.useState)([]),q=Object(i.a)(F,2),L=q[0],R=q[1],G=Object(s.useState)([]),K=Object(i.a)(G,2),$=K[0],Q=K[1],W=Object(s.useState)([]),X=Object(i.a)(W,2),ee=X[0],te=X[1],ne=Object(s.useState)([]),ae=Object(i.a)(ne,2),ce=ae[0],ie=ae[1],se=Object(s.useState)(0),re=Object(i.a)(se,2),oe=re[0],le=re[1],de=Object(s.useState)(0),ue=Object(i.a)(de,2),be=ue[0],je=ue[1],me=Object(s.useState)(!1),fe=Object(i.a)(me,2),pe=fe[0],Oe=fe[1],xe=Object(s.useState)([]),ve=Object(i.a)(xe,2),he=ve[0],ge=ve[1],Ne=Object(s.useState)({}),ye=Object(i.a)(Ne,2),we=ye[0],Ae=ye[1],Ie=Object(s.useState)("Profoma Invoice"),ke=Object(i.a)(Ie,2),ze=ke[0],Ce=ke[1],Se=Object(s.useState)([]),Be=Object(i.a)(Se,2),Pe=Be[0],Te=Be[1],Ve=Object(s.useState)([]),_e=Object(i.a)(Ve,2),Fe=_e[0],De=_e[1],Ee=Object(s.useState)([]),qe=Object(i.a)(Ee,2),Le=qe[0],Re=qe[1],Ge=Object(s.useState)([]),He=Object(i.a)(Ge,2),Ke=He[0],Ze=He[1],Je=Object(s.useState)([]),Ue=Object(i.a)(Je,2),Me=Ue[0],Ye=Ue[1],$e=Object(r.f)(),Qe=Object(S.b)(),We=Object(S.c)((function(e){return e.invoice})),Xe=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/services/dropdown",{status:1}).then(function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,e.next=3,Q(n.services);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),et=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.a.post("/organizationusers/dropdown").then((function(e){var t=e.data.organizationusers;Re(t)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tt=function(e){return V.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ms-1"},buttonsStyling:!1}).then(function(){var t=Object(c.a)(Object(a.a)().mark((function t(n){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.value){t.next=7;break}return t.next=3,Qe(Object(I.g)(e));case 3:return V.fire({icon:"success",title:"Deleted!",text:"Conatct has been deleted.",customClass:{confirmButton:"btn btn-success"}}),t.abrupt("return",!0);case 7:if(n.dismiss!==V.DismissReason.cancel){t.next=9;break}return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())};Object(s.useEffect)((function(){l.a.post("/clients/dropdown",{status:1}).then((function(e){var t=e.data;R(t.clients)})),l.a.post("/taxgroups/dropdown",{country:U.countryshortname}).then((function(e){var t=e.data;te(t.taxgroups)})),Xe(),l.a.post("/transactionaccounts/dropdown").then((function(e){var t=e.data;ie(t.transactionaccounts)})),et(),l.a.post("/taskinvoices/getparticipants",{invoiceId:T}).then((function(e){var t=e.data.taskinvoiceparticipants.map((function(e){return e.id}));Ze(t),Ye(e.data.taskinvoiceparticipants)})).catch((function(e){console.log(e)}))}),[]);var nt=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(Object(I.i)(t));case 2:n=e.sent,Ae(n.payload);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=g.d().shape({updatedBy:g.f().default(M),id:g.f().default(T),contactId:g.f().required("Please select a Client"),uniqueIdentity:g.f(),contactEmail:g.f(),contactName:g.f(),invoiceDate:g.f(),paymentDue:g.f(),placeOfSupplyOthers:g.f().default(U.stateothers).required("Please select a Place Of Supply"),subTotalAmount:g.f(),totalAmount:g.f(),totalTaxAmount:g.f(),organizationId:g.f().default(J),isRcmApplicable:g.b().default(!1),dueAmount:g.f(),billingAddressLine1:g.f(),billingAddressLine2:g.f(),billingAddressState:g.f(),billingAddressCity:g.f(),billingAddressZipCode:g.f(),billingCurrencyId:g.f().default(U.currencyid),bankAccountBankName:g.f(),bankAccountType:g.f(),bankAccountHolderName:g.f(),bankAccountId:g.f().required("Please Select Account"),bankAccountNumber:g.f(),organizationAddressLine1:g.f().default(U.addressline1),organizationAddressLine2:g.f().default(U.addressline2),organizationCity:g.f().default(U.organizationcity),organizationStateOther:g.f().default(U.stateothers||""),organizationZipCode:g.f().default(U.pinzipcode),organizationName:g.f().default(U.name),organizationImageUrl:g.f().default(U.organizationimageid||""),organizationStateCode:g.f().default(U.stateothers),organizationGstin:g.f().default(U.gstin),gstin:g.f(),note:g.f().default(""),status:g.c().default(4),calculateTaxes:g.f(),paymentStatus:g.c().default(5),rows:g.a().of(g.d().shape({serviceId:g.f().required("Please Select Service Item"),invoiceId:g.f(),price:g.f(),organizationId:g.f().default(J),isTaxApplicable:g.b().default(!0),actualPrice:g.f().required(),subTotalAmount:g.f().required(1),taxes:g.a().of(g.d().shape({taxGroupId:g.f().required("Pleace Select Tax"),taxAmount:g.f().required(1),taxName:g.f()}))}))}),ct=Object(h.f)({resolver:Object(N.a)(at),defaultValues:at.cast()}),it=ct.handleSubmit,st=ct.formState.errors,rt=ct.control,ot=ct.setValue,lt=ct.reset,dt=Object(h.e)({control:rt,name:"rows",keyName:"rowid"}),ut=dt.fields,bt=dt.append,jt=dt.remove,mt=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var c,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return he.forEach((function(e,n){he[n].invoiceId=t,he[n].updatedBy=M})),e.next=3,Qe(Object(I.n)(he));case 3:if(!(Ke.length>0)){e.next=9;break}return c=[],Ke.forEach((function(e){var t=Me.findIndex((function(t){return t.id===e}));-1!==t&&Me.length>0&&c.push(Me[t].id)})),i={users:Ke,organizationId:J,invoiceId:t,deletedUser:c},e.next=9,Qe(Object(I.c)(i));case 9:4===n.status?$e("/proposal/view/".concat(We.invoiceId)):$e("/invoice/view/".concat(We.invoiceId));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ft=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.invoiceDate=D()(t.invoiceDate).valueOf(),t.paymentDue=D()(t.paymentDue).valueOf(),y(!0),n=t.rows,ge(n),delete t.rows,e.next=8,Qe(Object(I.m)(t));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)(Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==We.invoiceId&&he.length>0)){e.next=3;break}return e.next=3,mt(We.invoiceId);case 3:case"end":return e.stop()}}),e)}))),[We.invoiceId,he]);var pt=function(){bt({invoiceId:0,organizationId:J,serviceId:"",exemptionReasonId:0,isTaxApplicable:!0,sacCode:"",actualPrice:0,taxGroupId:"",subTotalAmount:0,taxPrice:0,description:""})};Object(s.useEffect)((function(){pt()}),[]);var Ot=function(){var e=rt._formValues.rows,t=0,n=0,a=0;e.forEach((function(e){t=parseFloat(e.subTotalAmount)+parseFloat(t),n=parseFloat(e.price)+parseFloat(n),a=parseFloat(a)+parseFloat(e.taxPrice)})),rt._formValues.subTotalAmount=n,rt._formValues.totalAmount=t,rt._formValues.dueAmount=t,rt._formValues.totalTaxAmount=a,le(t),je(n),function(){var e;e=rt._formValues.rows.map((function(e){return e.taxes?e.taxes:[]})).flat().reduce((function(e,t){if(void 0!==t){var n=e.find((function(e){return t.taxName===e.taxName}));n?n.taxAmount=parseFloat(n.taxAmount)+parseFloat(t.taxAmount):e.push(Object.assign({},t))}return e}),[]),De(e),ot("calculateTaxes",JSON.stringify(e))}()},xt=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n,c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(n=rt._formValues.rows[t].id)){e.next=5;break}return e.next=4,tt(n);case 4:c=e.sent;case 5:c&&jt(t),Ot();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vt=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=rt._formValues.rows[e];if(void 0===o.serviceId||""===o.serviceId)return!1;var l=$.find((function(e){return e.id===o.serviceId}));ot("rows[".concat(e,"].serviceId"),o.serviceId),i?(t=(null===l||void 0===l?void 0:l.sellingprice)||0,ot("rows[".concat(e,"].actualPrice"),t),ot("rows[".concat(e,"].price"),String(null===l||void 0===l?void 0:l.sellingprice)||0),ot("rows[".concat(e,"].description"),null===l||void 0===l?void 0:l.description)):(t=a?o.price:(null===l||void 0===l?void 0:l.sellingprice)||0,ot("rows[".concat(e,"].price"),t),ot("rows[".concat(e,"].actualPrice"),String(null===l||void 0===l?void 0:l.sellingprice)||0),ot("rows[".concat(e,"].description"),n?o.description:null===l||void 0===l?void 0:l.description));var d=0;if(Object.keys(s).length>0&&c){rt._formValues.rows[e].taxes[r]=s;var u=rt._formValues.rows[e].taxes;ot("rows[".concat(e,"].taxes"),u)}rt._formValues.rows[e].taxes.forEach((function(e){d+=parseFloat(e.taxAmount)})),ot("rows[".concat(e,"].isTaxApplicable"),!0),ot("rows[".concat(e,"].subTotalAmount"),parseFloat(parseFloat(d||0)+parseFloat(t||0)).toFixed(2)),ot("rows[".concat(e,"].taxPrice"),parseFloat(d).toFixed(2)),ot("rows[".concat(e,"].updatedBy"),M),Ot()},ht=function(e,t,n){e&&(Oe(!1),vt(t,!0,!0,!0,!1,e,n))},gt=function(e){var t=ce.find((function(t){return t.id===e}));void 0!==t&&(Te(t),ot("bankAccountBankName",t.bankName),ot("bankAccountBranchName",t.branchAddress),ot("bankAccountHolderName",t.accountHolderName),ot("bankAccountIfscCode",t.ifscCode),ot("bankAccountNumber",t.accountNumber))};Object(s.useEffect)((function(){ce.length>0&&gt(rt._formValues.bankAccountId)}),[ce]),Object(s.useEffect)((function(){Object.keys(we).length>0&&(ot("billingAddressCity",we.billingaddresscity||""),ot("billingAddressLine1",we.billingaddressline1||""),ot("billingAddressLine2",we.billingaddressline2||""),ot("billingAddressState",we.billingaddressstatesname||""),ot("billingAddressZipCode",we.billingaddresszip||""),ot("billingCurrencyId",we.currencyid||U.currencyid),ot("billingCurrencySymbol",we.currenciessymbol||""),ot("billingCurrencyShortName",we.currenciescode||""),ot("billingCurrencyName",we.currenciesname||""),ot("contactEmail",we.email||""),ot("gstin",we.gstin||""),ot("contactName",we.name||""),ot("placeOfSupplyId",we.placeofsupplyid||""))}),[we]);var Nt=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n,c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=8;break}return e.next=3,Qe(Object(I.k)(t));case 3:return n=e.sent,ot("rows",n.payload),c=Object(H.a)(n.payload),e.next=8,c.forEach((function(e,t){e.taxes.forEach((function(e,n){vt(t,!0,!0,!0,!1,e,n)}))}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)(Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!($.length>0)){e.next=3;break}return e.next=3,Nt(n.id);case 3:case"end":return e.stop()}}),e)}))),[$]),Object(s.useEffect)(Object(c.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object.keys(n).length>0)){e.next=6;break}return lt({contactId:(t=n).contactid,uniqueIdentity:t.uniqueno,contactEmail:t.contactemail,contactName:t.contactname,invoiceDate:D()(t.invoicedate,"x").toDate(),paymentDue:D()(t.paymentdue,"x").toDate(),placeOfSupplyId:t.placeofsupplyid,subTotalAmount:t.subtotalamount,totalAmount:t.totalamount,totalTaxAmount:t.totaltaxamount,isRcmApplicable:t.isrcmapplicable,dueAmount:t.dueamount,billingAddressLine1:t.billingaddressline1||"",billingAddressLine2:t.billingaddressline2||"",billingAddressState:t.billingaddressstate||"",billingAddressCity:t.billingaddresscity||"",billingAddressZipCode:t.billingaddresszipcode||"",billingCurrencyId:t.billingcurrencyid||"",bankAccountBankName:t.bankaccountbankname,bankAccountBranchName:t.bankaccountbranchname,bankAccountHolderName:t.bankaccountholdername,bankAccountId:t.bankaccountid,bankAccountIfscCode:t.bankaccountifsccode,bankAccountNumber:t.bankaccountnumber,organizationAddressLine1:""===t.organizationaddressline1?U.addressline1:t.organizationaddressline1,organizationAddressLine2:""===t.organizationaddressline2?U.addressline2:t.organizationaddressline2,organizationCity:""===t.organizationcity?U.organizationcity:t.organizationcity,organizationState:""===t.organizationstate?U.statename:t.organizationstate,organizationZipCode:""===t.organizationzipcode?U.pinzipcode:t.organizationzipcode,organizationName:""===t.organizationname?U.name:t.organizationname,organizationImageUrl:null===t.organizationimageurl?U.organizationimageid:t.organizationimageurl,organizationStateCode:t.organizationstatecode||"",organizationGstin:""===t.organizationgstin?U.gstin:t.gstin,gstin:t.gstin,note:t.note,status:t.status,paymentStatus:t.paymentstatus}),Ce("Profoma Invoice"),e.next=6,nt(t.contactid);case 6:case"end":return e.stop()}}),e)}))),[n]);var yt=function(e){var t=Array.isArray(e)?e.map((function(e){return e.id})):[];Ze(t)};return Object(E.jsx)(k.a,{blocking:O,loader:Object(E.jsx)(C,{}),children:Object(E.jsx)("form",{onSubmit:it(ft),children:Object(E.jsx)(d.ib,{className:"invoice-add",children:Object(E.jsxs)(s.Fragment,{children:[Object(E.jsx)(d.B,{xl:10,md:8,sm:12,children:Object(E.jsxs)(d.l,{className:"invoice-preview-card",children:[Object(E.jsxs)(d.m,{className:"invoice-padding pb-0",children:[function(){var e=Object.keys(st),t=[];return Array.isArray(e)&&e.forEach((function(e){var n;"rows"!==e&&t.push(Object(E.jsxs)(d.I,{children:["$",null===(n=st[e])||void 0===n?void 0:n.message]},e))})),t}(),Object(E.jsxs)("div",{className:"d-flex justify-content-between flex-md-row flex-column invoice-spacing mt-0",children:[Object(E.jsxs)("div",{children:[Object(E.jsxs)("div",{className:"logo-wrapper",children:[null===U.imageid?Object(E.jsx)(A.a,{color:"primary",className:"me-50",content:null!==U.name?null===(t=U.name)||void 0===t?void 0:t.charAt(0):""}):Object(E.jsx)("img",{className:"rounded me-50",height:75,width:75,referrerPolicy:"no-referrer",src:"https://drive.google.com/thumbnail?id=".concat(U.imageid,"&authuser=0"),alt:"Organisation Logo"}),Object(E.jsx)("h6",{className:"text-primary invoice-logo",children:U.name})]}),Object(E.jsx)("p",{className:"card-text mb-25",children:U.addressline1}),Object(E.jsx)("p",{className:"card-text mb-25",children:U.addressline2}),Object(E.jsxs)("p",{className:"card-text mb-0",children:[U.organizationcity," - ",U.pinzipcode]}),Object(E.jsx)("p",{className:"card-text mb-0",children:U.statename}),Object(E.jsx)("p",{className:"card-text mb-0",children:U.gstin})]}),Object(E.jsxs)("div",{className:"invoice-number-date mt-md-0 mt-2",children:[Object(E.jsxs)("div",{className:"d-flex align-items-center justify-content-md-end mb-1",children:[Object(E.jsx)("h4",{className:"invoice-title",children:ze}),Object(E.jsxs)(d.L,{className:"input-group-merge invoice-edit-input-group disabled",children:[Object(E.jsx)(d.M,{children:Object(E.jsx)(p.a,{size:15})}),Object(E.jsx)(d.K,{type:"number",className:"invoice-edit-input",value:3171,placeholder:"53634",disabled:!0})]})]}),Object(E.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[Object(E.jsxs)("span",{className:"title ",children:[ze," Date:"]}),Object(E.jsx)(h.a,{control:rt,name:"invoiceDate",id:"invoiceDate",render:function(e){var t=e.field;return Object(E.jsx)(f.a,{value:t.value,onChange:function(e,n){t.onChange(n)},options:{altInput:!0},className:"form-control invoice-edit-input date-picker"})}})]}),Object(E.jsxs)("div",{className:"d-flex align-items-center",children:[Object(E.jsx)("span",{className:"title required",children:"Due Date:"}),Object(E.jsx)(h.a,{control:rt,name:"paymentDue",id:"paymentDue",render:function(e){var t=e.field;return Object(E.jsx)(f.a,{value:t.value,onChange:function(e,n){t.onChange(n)},options:{altInput:!0},className:"form-control invoice-edit-input due-date-picker"})}})]})]})]})]}),Object(E.jsx)("hr",{className:"invoice-spacing"}),Object(E.jsxs)(d.m,{className:"invoice-padding pt-0",children:[Object(E.jsxs)(d.ib,{className:"row-bill-to invoice-spacing",children:[Object(E.jsxs)(d.B,{className:"col-bill-to ps-0",xl:"6",children:[Object(E.jsx)("h6",{className:"invoice-to-title required",children:"Profoma Invoice To"}),Object(E.jsx)("div",{className:"invoice-customer",children:Object(E.jsx)(h.a,{control:rt,name:"contactId",id:"contactId",render:function(e){var t=e.field,n=e.ref;return Object(E.jsx)(v.a,Object(b.a)(Object(b.a)({inputRef:n,className:w()("react-select",{"is-invalid":st.contactId})},t),{},{classNamePrefix:"select",options:L,value:L.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),nt(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}})}),Object(E.jsx)(d.B,{className:"pe-0 mt-xl-2",xl:"4",children:Object(E.jsx)("table",{children:Object(E.jsxs)("tbody",{children:[Object(E.jsx)("tr",{children:Object(E.jsx)("td",{children:we.billingaddressline1})}),Object(E.jsx)("tr",{children:Object(E.jsx)("td",{children:we.billingaddressline2})}),Object(E.jsx)("tr",{children:Object(E.jsxs)("td",{children:[we.billingaddresscity," ",we.billingaddresszip&&"-","  ",we.billingaddresszip]})}),Object(E.jsx)("tr",{children:Object(E.jsx)("td",{children:we.billingaddressstateothers})})]})})})]}),Object(E.jsx)(d.B,{className:"col-bill-to ps-0",xl:"2"}),Object(E.jsxs)(d.B,{className:"pe-0 mt-xl-0 mt-2",xl:"4",children:[Object(E.jsx)("h6",{className:"mb-2",children:"Payment Details:"}),Object(E.jsx)("table",{children:Object(E.jsxs)("tbody",{children:[Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{className:"pe-1",children:"Bank Name:"}),Object(E.jsx)("td",{children:Pe.bankName&&Object(E.jsx)("span",{className:"fw-bolder",children:Pe.bankName})})]}),Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{className:"pe-1",children:"Account name:"}),Object(E.jsx)("td",{children:Pe.accountHolderName&&Object(E.jsx)("span",{className:"fw-bolder",children:Pe.accountHolderName})})]}),Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{className:"pe-1",children:"Branch Name:"}),Object(E.jsxs)("td",{children:[" ",Pe.branchAddress&&Object(E.jsx)("span",{className:"fw-bolder",children:Pe.branchAddress})]})]}),Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{className:"pe-1",children:"Account Type:"}),Object(E.jsx)("td",{children:Pe.accountType&&Object(E.jsxs)("span",{className:"fw-bolder",children:[["","Saving","Checking"][Pe.accountType]," "]})})]}),we.currenciescode&&Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{className:"pe-1",children:"Currency code:"}),Object(E.jsx)("td",{children:we.currenciescode})]})]})})]})]}),Object(E.jsxs)(d.ib,{className:"row-bill-to invoice-spacing",children:[Object(E.jsxs)(d.B,{className:"col-bill-to ps-0",xl:"6",children:[Object(E.jsx)("h6",{className:"invoice-to-title mt-2 required",children:"Place Of Supply"}),Object(E.jsx)(d.B,{className:"invoice-customer",lg:12,children:Object(E.jsx)(h.a,{control:rt,name:"placeOfSupplyOthers",id:"placeOfSupplyOthers",render:function(e){var t=e.field;return Object(E.jsx)(d.K,Object(b.a)({className:"form-control col-12"},t))}})}),""!==we.gstin&&void 0!==we.gstin&&Object(E.jsxs)("div",{className:"mt-1",children:[" GSTIN : ",we.gstin]})]}),Object(E.jsx)(d.B,{className:"col-bill-to ps-0",xl:"2"})]})]}),Object(E.jsxs)(d.m,{className:"invoice-padding invoice-product-details",children:[ut.map((function(e,t){var n,i,s,r,o,l,u,j;return Object(E.jsx)("div",{className:"repeater-wrapper",children:Object(E.jsxs)(d.ib,{className:"product-details-border",children:[Object(E.jsxs)(d.ib,{className:"d-lg-flex position-relative w-100 pe-lg-0 pe-1 py-50",md:12,children:[Object(E.jsxs)(d.B,{className:"mb-lg-0 mb-2 mt-lg-0 mt-2",md:3,sm:12,children:[Object(E.jsx)(d.u,{className:"col-title mb-md-50 mb-0",children:"Item"}),Object(E.jsx)(h.a,{control:rt,name:"rows[".concat(t,"].serviceId"),rules:{required:!0},render:function(e){var n,i,s=e.field,r=e.ref;return Object(E.jsx)(v.a,Object(b.a)(Object(b.a)({},s),{},{inputRef:r,className:w()("react-select",{"is-invalid":null===(n=st.rows)||void 0===n||null===(i=n[t])||void 0===i?void 0:i.serviceId}),classNamePrefix:"select",options:$,value:$.find((function(e){return e.id===s.value})),onChange:function(){var e=Object(c.a)(Object(a.a)().mark((function e(n){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.onChange(n.id),e.next=3,vt(t,!1,!1,!1,!1,!0);case 3:return e.next=5,Oe(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),(null===(n=st.rows)||void 0===n||null===(i=n[t])||void 0===i?void 0:i.serviceId)&&Object(E.jsx)(d.I,{children:null===(s=st.rows)||void 0===s||null===(r=s[t])||void 0===r?void 0:r.serviceId.message})]}),Object(E.jsx)(d.B,{lg:4,children:Object(E.jsx)(h.a,{id:"rows_".concat(t,"_description"),name:"rows[".concat(t,"].description"),control:rt,render:function(e){var n,a,c=e.field;return Object(E.jsx)(d.K,Object(b.a)({placeholder:"Description",invalid:(null===(n=st.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.description)&&!0,onInput:function(e){c.onChange(e),vt(t,!0,!1,!1,!1,!1)}},c))}})}),Object(E.jsxs)(d.B,{className:"my-lg-0 my-2",lg:"3",sm:"12",children:[Object(E.jsx)(d.u,{className:"col-title mb-md-2 mb-0",children:"Price"}),Object(E.jsx)(h.a,{id:"rows_".concat(t,"_price"),name:"rows[".concat(t,"].price"),control:rt,render:function(e){var n,i,s=e.field;return Object(E.jsx)(d.K,Object(b.a)(Object(b.a)({type:"number",id:"input_rows_".concat(t,"_price"),onInput:function(){var e=Object(c.a)(Object(a.a)().mark((function e(n){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.onChange(n),e.next=3,vt(t,!1,!0,!1,!1,!1);case 3:return e.next=5,Oe(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},s),{},{invalid:(null===(n=st.rows)||void 0===n||null===(i=n[t])||void 0===i?void 0:i.price)&&!0}))}}),(null===(o=st.rows)||void 0===o||null===(l=o[t])||void 0===l?void 0:l.price)&&Object(E.jsx)(d.I,{children:null===(u=st.rows)||void 0===u||null===(j=u[t])||void 0===j?void 0:j.price.message})]}),Object(E.jsxs)(d.B,{className:"my-lg-0 mt-2",lg:"1",sm:"12",children:[Object(E.jsx)(d.u,{className:"col-title mb-md-50 mb-0",children:"Amount"}),rt._formValues.rows[t].subTotalAmount]}),Object(E.jsx)(d.B,{md:1,children:Object(E.jsx)("div",{className:"d-lg-flex justify-content-center border-start invoice-product-actions py-50 px-25",children:Object(E.jsx)(Z.a,{size:18,className:"cursor-pointer",onClick:function(){xt(t)}})})})]}),Object(E.jsx)(Y,{parentaxCallback:ht,refreshTax:pe,taxGroupOptions:ee,mainInd:t,itemAmount:rt._formValues.rows[t].price,errors:st,control:rt})]})},e.id)})),Object(E.jsx)(d.ib,{className:"mt-1",children:Object(E.jsx)(d.B,{sm:"12",className:"px-0",children:Object(E.jsxs)(d.i,{color:"primary",size:"sm",className:"btn-add-new",onClick:function(){return pt()},children:[Object(E.jsx)(x.a,{size:14,className:"me-25"})," ",Object(E.jsx)("span",{className:"align-middle",children:"Add Item"})]})})})]}),Object(E.jsx)(d.m,{className:"invoice-padding",children:Object(E.jsxs)(d.ib,{className:"invoice-sales-total-wrapper",children:[Object(E.jsx)(d.B,{className:"mt-md-0 mt-3",md:{size:"6",order:1},xs:{size:12,order:2}}),Object(E.jsx)(d.B,{className:"d-flex justify-content-end",md:{size:"6",order:2},xs:{size:12,order:1},children:Object(E.jsxs)("div",{className:"invoice-total-wrapper",children:[Object(E.jsxs)("div",{className:"invoice-total-item",children:[Object(E.jsx)("p",{className:"invoice-total-title",children:"Pre Tax Amount:"}),Object(E.jsx)("p",{className:"invoice-total-amount",children:be})]}),Fe.map((function(e,t){return Object(E.jsxs)("div",{className:"invoice-total-item",children:[Object(E.jsx)("p",{className:"invoice-total-title",children:null===e||void 0===e?void 0:e.taxName}),Object(E.jsx)("p",{className:"invoice-total-amount",children:null===e||void 0===e?void 0:e.taxAmount})]},t)})),Object(E.jsx)("hr",{className:"my-50"}),Object(E.jsxs)("div",{className:"invoice-total-item",children:[Object(E.jsx)("p",{className:"invoice-total-title",children:"Total Payable:"}),Object(E.jsx)("p",{className:"invoice-total-amount",children:oe})]})]})})]})}),Object(E.jsx)("hr",{className:"invoice-spacing mt-0"}),Object(E.jsx)(d.m,{className:"invoice-padding py-0",children:Object(E.jsx)(d.ib,{children:Object(E.jsx)(d.B,{children:Object(E.jsxs)("div",{className:"mb-2",children:[Object(E.jsx)(d.N,{for:"note",className:"form-label fw-bold",children:"Note:"}),Object(E.jsx)(h.a,{id:"note",name:"note",control:rt,render:function(e){var t=e.field;return Object(E.jsx)(d.K,Object(b.a)({type:"textarea",value:t.value,invalid:st.note&&!0},t))}})]})})})})]})}),Object(E.jsxs)(d.B,{xl:2,md:4,sm:12,children:[Object(E.jsx)(d.l,{className:"invoice-action-wrapper",children:Object(E.jsxs)(d.m,{children:[Object(E.jsx)(d.i,{color:"primary",type:"submit",block:!0,outline:!0,className:"mb-75",children:"Save"}),Object(E.jsx)(d.i,{color:"warning",block:!0,outline:!0,tag:o.b,to:"/invoice/view/".concat(T),children:"Cancel"})]})}),Object(E.jsx)("div",{className:"mt-2",children:Object(E.jsxs)("div",{className:"invoice-payment-option",children:[Object(E.jsx)("p",{className:"mb-50 required",children:"Accept payments via"}),Object(E.jsx)(h.a,{control:rt,name:"bankAccountId",rules:{required:!0},render:function(e){var t=e.field,n=e.ref;return Object(E.jsx)(v.a,Object(b.a)(Object(b.a)({},t),{},{inputRef:n,className:w()("react-select mt-1",{"is-invalid":st.bankAccountId}),classNamePrefix:"select",options:ce,value:ce.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),gt(e.id)},getOptionLabel:function(e){return e.accountHolderName},getOptionValue:function(e){return e.id}}))}})]})}),Object(E.jsx)("div",{className:"mt-2",children:Object(E.jsxs)("div",{className:"invoice-payment-option",children:[Object(E.jsx)("p",{className:"mb-50",children:"Select Employee"}),Object(E.jsx)(h.a,{control:rt,name:"reviewer",id:"reviewer",render:function(e){var t=e.field,n=e.value,a=e.ref;return Object(E.jsx)(v.a,Object(b.a)(Object(b.a)({inputRef:a,className:w()("react-select",{"is-invalid":st.reviewer})},t),{},{classNamePrefix:"select",options:Le,isMulti:!0,defaultValue:Me,value:n,onChange:yt,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},styles:B}))}})]})})]})]})})})})},Q=Object(u.a)();t.default=function(){var e=Object(r.g)().id,t=Object(s.useState)(null),n=Object(i.a)(t,2),u=n[0],b=n[1],j=function(){var t=Object(c.a)(Object(a.a)().mark((function t(){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l.a.post("/taskinvoices/get",{id:e}).then((function(e){b(e.data.taskinvoices)})).catch((function(e){console.log(e)}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(s.useEffect)((function(){j()}),[]),null!==u&&void 0!==u?Object(E.jsx)("div",{className:"invoice-edit-wrapper",children:Object(E.jsx)(d.ib,{className:"invoice-edit",children:Object(E.jsx)(d.B,{xl:12,md:8,sm:12,children:"IN"===Q.countryshortname?Object(E.jsx)(G,{data:u}):Object(E.jsx)($,{data:u})})})}):Object(E.jsxs)(d.e,{color:"danger",children:[Object(E.jsx)("h4",{className:"alert-heading",children:"Invoice not found"}),Object(E.jsxs)("div",{className:"alert-body",children:["Invoice with id: ",e," doesn't exist. Check list of all invoices:"," ",Object(E.jsx)(o.b,{to:"/apps/invoice/list",children:"Invoice List"})]})]})}},735:function(e,t,n){"use strict";var a=n(8),c=n(27),i=n(0),s=n(7),r=n.n(s),o=n(14),l=(n(738),n(3)),d=function(e){var t,n=e.children,s=e.blocking,o=e.loader,d=e.className,u=e.tag,b=e.overlayColor,j=u;return Object(l.jsxs)(j,{className:r()("ui-loader",(t={},Object(c.a)(t,d,d),Object(c.a)(t,"show",s),t)),children:[n,s?Object(l.jsxs)(i.Fragment,{children:[Object(l.jsx)("div",Object(a.a)({className:"overlay"},s&&b?{style:{backgroundColor:b}}:{})),Object(l.jsx)("div",{className:"loader",children:o})]}):null]})};t.a=d,d.defaultProps={tag:"div",blocking:!1,loader:Object(l.jsx)(o.jb,{color:"primary"})}},736:function(e,t,n){"use strict";var a=n(3);t.a=function(){return Object(a.jsx)("div",{className:"fallback-spinner",children:Object(a.jsxs)("div",{className:"loading",children:[Object(a.jsx)("div",{className:"effect-1 effects"}),Object(a.jsx)("div",{className:"effect-2 effects"}),Object(a.jsx)("div",{className:"effect-3 effects"})]})})}},737:function(e,t,n){},738:function(e,t,n){},743:function(e,t,n){},746:function(e,t,n){},795:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var a=function(e,t,n){var a=0;return 1===n?a=parseFloat(e)-parseFloat(e)*(100/(100+parseFloat(t))):2===n&&(a=parseFloat(e)*parseFloat(t)/100),parseFloat(a)},c=function(e){return JSON.parse(Array.isArray(e)?JSON.stringify(e).replace(/\\/g,""):e.replace(/\\/g,""))}}}]);
//# sourceMappingURL=53.99541071.chunk.js.map