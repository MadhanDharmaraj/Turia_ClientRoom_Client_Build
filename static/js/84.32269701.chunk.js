(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[84],{1432:function(e,t,c){"use strict";c.r(t);var s=c(8),n=c(25),a=c(3),r=c(5),l=c(9),i=c(11),o=c(0),d=c(6),j=c(52),b=c(13),u=c(710),O=c(711),f=c(334),m=c(288),x=c(286),h=c(354),p=c(705),g=c(184),v=c.n(g),N=c(185),k=c.n(N),y=c(372),w=c(15),C=c(17),S=c(183),B=c(2),R=function(e){var t=e.roleId,c=Object(o.useState)([]),s=Object(l.a)(c,2),n=s[0],a=s[1],r=Object(o.useState)([]),i=Object(l.a)(r,2),j=i[0],u=i[1];return Object(o.useEffect)((function(){null!==t&&(a([]),null!==t&&d.a.post("/rolepermissions/list",{roleId:t}).then((function(e){u(e.data.rolepermission.permissions.split(","))})).catch((function(){})),d.a.post("/modules/list").then((function(e){a(e.data.modules)})).catch((function(){})))}),[t]),Object(B.jsx)(o.Fragment,{children:Object(B.jsx)(b.ib,{children:Object(B.jsx)(b.B,{xs:12,children:Object(B.jsx)(b.mb,{className:"table-flush-spacing",responsive:!0,children:Object(B.jsx)("tbody",{children:j.length>0&&n.map((function(e,t){return Object(B.jsxs)("tr",{children:[Object(B.jsx)("td",{className:"text-nowrap fw-bolder",children:e.name}),Object(B.jsx)("td",{children:Object(B.jsxs)("div",{className:"d-flex",children:[Object(B.jsxs)("div",{className:"form-check me-3 me-lg-5",children:[Object(B.jsx)(b.K,{type:"checkbox",id:"read-".concat(e.slug),value:"".concat(e.slug,"-read"),defaultChecked:j.indexOf("".concat(e.slug,"-read"))>-1,disabled:!0}),Object(B.jsx)(b.N,{className:"form-check-label",for:"read-".concat(e.slug),children:"Read"})]}),Object(B.jsxs)("div",{className:"form-check me-3 me-lg-5",children:[Object(B.jsx)(b.K,{type:"checkbox",id:"write-".concat(e.slug),value:"".concat(e.slug,"-write"),defaultChecked:j.indexOf("".concat(e.slug,"-write"))>-1,disabled:!0}),Object(B.jsx)(b.N,{className:"form-check-label",for:"write-".concat(e.slug),children:"Write"})]}),Object(B.jsxs)("div",{className:"form-check me-3 me-lg-5",children:[Object(B.jsx)(b.K,{type:"checkbox",id:"delete-".concat(e.slug),value:"".concat(e.slug,"-delete"),defaultChecked:j.indexOf("".concat(e.slug,"-delete"))>-1,disabled:!0}),Object(B.jsx)(b.N,{className:"form-check-label",for:"delete-".concat(e.slug),children:"Delete"})]}),Object(B.jsxs)("div",{className:"form-check me-3 me-lg-5",children:[Object(B.jsx)(b.K,{type:"checkbox",id:"import-".concat(e.slug),value:"".concat(e.slug,"-import"),defaultChecked:j.indexOf("".concat(e.slug,"-import"))>-1,disabled:!0}),Object(B.jsx)(b.N,{className:"form-check-label",for:"import-".concat(e.slug),children:"import"})]}),Object(B.jsxs)("div",{className:"form-check",children:[Object(B.jsx)(b.K,{type:"checkbox",id:"export-".concat(e.slug),value:"".concat(e.slug,"-export"),defaultChecked:j.indexOf("".concat(e.slug,"-export"))>-1,disabled:!0}),Object(B.jsx)(b.N,{className:"form-check-label",for:"export-".concat(e.slug),children:"Export"})]})]})})]},t)}))})})})})})},I=c(702),K=c(703),A=Object(w.b)(),E=Object(w.d)();t.default=function(e){Object(i.a)(e);var t=k()(v.a),c=Object(o.useState)(!1),g=Object(l.a)(c,2),N=g[0],w=g[1],z=Object(o.useState)([]),D=Object(l.a)(z,2),P=D[0],F=D[1],T=Object(o.useState)("Add New"),J=Object(l.a)(T,2),Q=J[0],U=J[1],V=Object(C.c)((function(e){return e.role})),W=Object(C.b)(),Y=Object(o.useState)([]),q=Object(l.a)(Y,2),G=q[0],H=q[1],L=Object(o.useState)([]),M=Object(l.a)(L,2),X=M[0],Z=M[1],$=Object(o.useState)(!1),_=Object(l.a)($,2),ee=_[0],te=_[1],ce=Object(o.useState)(null),se=Object(l.a)(ce,2),ne=se[0],ae=se[1],re=Object(o.useState)([]),le=Object(l.a)(re,2),ie=le[0],oe=le[1],de=Object(o.useState)(!1),je=Object(l.a)(de,2),be=je[0],ue=je[1],Oe=function(){return Object(B.jsx)(o.Fragment,{children:Object(B.jsx)(K.a,{})})},fe=function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){var c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/rolepermissions/list",{roleId:t});case 2:return c=e.sent,e.next=5,oe(c.data.rolepermission.permissions.split(","));case 5:return e.next=7,Z(c.data.rolepermission.permissions.split(","));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=u.d().shape({organizationId:u.f().default(A),name:u.f().required("Please Enter Role"),description:u.f().nullable(),panel:u.f().default("client"),role:u.f().default("client"),isDefault:u.c().default(3),isAdminRole:u.b().default(!1),updatedBy:u.f().default(E),createdBy:u.f().default(E),permissionsArr:u.a().min("1")}),xe=Object(p.f)({resolver:Object(O.a)(me),defaultValues:me.cast()}),he=xe.handleSubmit,pe=xe.formState.errors,ge=xe.control,ve=xe.reset,Ne=xe.setValue,ke=function(){var e=Object(r.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!1),e.next=3,W(Object(y.e)());case 3:ve({id:"",name:"",description:""});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){var c,s,n,r,l;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ue(!0),"Edit"!==Q){e.next=10;break}return e.next=4,W(Object(y.f)(t));case 4:return s={organizationId:A,roleId:t.id,permissions:X.toString(),updatedBy:E},e.next=7,W(Object(y.g)(s));case 7:c="Updated",e.next=17;break;case 10:return e.next=12,W(Object(y.a)(t));case 12:return r=e.sent,l={organizationId:A,roleId:null===r||void 0===r||null===(n=r.payload)||void 0===n?void 0:n.id,permissions:X.toString(),createdBy:E},e.next=16,W(Object(y.b)(l));case 16:c="Added";case 17:ue(!1),S.b.success("Role ".concat(c," Successfully"),{position:"bottom-right"}),ke();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(e,t,c){var s="".concat(t,"-").concat(c),a=Object(n.a)(X);e.target.checked?a=[].concat(Object(n.a)(X),[s]):a.splice(X.indexOf(s),1),Z(a),Ne("permissionsArr",a)};Object(o.useEffect)((function(){F(V.data)}),[V.data]);var Ce=function(){return G.map((function(e,t){var c=e.transactions.split(",");return Object(B.jsxs)("tr",{children:[Object(B.jsx)("td",{className:"text-nowrap fw-bolder",children:e.name}),Object(B.jsx)("td",{children:Object(B.jsxs)("div",{className:"d-flex",children:[Object(B.jsxs)("div",{className:"form-check me-3 me-lg-5",children:[Object(B.jsx)(b.K,{type:"checkbox",id:"read-".concat(e.slug),onChange:function(t){return we(t,e.slug,"read")},value:"".concat(e.slug,"-read"),defaultChecked:ie.indexOf("".concat(e.slug,"-read"))>-1,disabled:-1===c.indexOf("read")}),Object(B.jsx)(b.N,{className:"form-check-label",for:"read-".concat(e.slug),children:"Read"})]}),Object(B.jsxs)("div",{className:"form-check me-3 me-lg-5",children:[Object(B.jsx)(b.K,{type:"checkbox",id:"read-".concat(e.slug),onChange:function(t){return we(t,e.slug,"read")},value:"".concat(e.slug,"-read"),defaultChecked:ie.indexOf("".concat(e.slug,"-read"))>-1,disabled:-1===c.indexOf("read")}),Object(B.jsx)(b.N,{className:"form-check-label",for:"read-".concat(e.slug),children:"Read"})]}),Object(B.jsxs)("div",{className:"form-check me-3 me-lg-5",children:[Object(B.jsx)(b.K,{type:"checkbox",id:"write-".concat(e.slug),onChange:function(t){return we(t,e.slug,"write")},value:"".concat(e.slug,"-write"),defaultChecked:ie.indexOf("".concat(e.slug,"-write"))>-1,disabled:-1===c.indexOf("write")}),Object(B.jsx)(b.N,{className:"form-check-label",for:"write-".concat(e.slug),children:"Write"})]}),Object(B.jsxs)("div",{className:"form-check me-3 me-lg-5",children:[Object(B.jsx)(b.K,{type:"checkbox",id:"delete-".concat(e.slug),onChange:function(t){return we(t,e.slug,"delete")},value:"".concat(e.slug,"-delete"),defaultChecked:ie.indexOf("".concat(e.slug,"-delete"))>-1,disabled:-1===c.indexOf("delete")}),Object(B.jsx)(b.N,{className:"form-check-label",for:"delete-".concat(e.slug),children:"Delete"})]}),Object(B.jsxs)("div",{className:"form-check me-3 me-lg-5",children:[Object(B.jsx)(b.K,{type:"checkbox",id:"import-".concat(e.slug),onChange:function(t){return we(t,e.slug,"import")},value:"".concat(e.slug,"-import"),defaultChecked:ie.indexOf("".concat(e.slug,"-import"))>-1,disabled:-1===c.indexOf("import")}),Object(B.jsx)(b.N,{className:"form-check-label",for:"import-".concat(e.slug),children:"import"})]}),Object(B.jsxs)("div",{className:"form-check",children:[Object(B.jsx)(b.K,{type:"checkbox",id:"export-".concat(e.slug),onChange:function(t){return we(t,e.slug,"export")},value:"".concat(e.slug,"-export"),defaultChecked:ie.indexOf("".concat(e.slug,"-export"))>-1,disabled:-1===c.indexOf("export")}),Object(B.jsx)(b.N,{className:"form-check-label",for:"export-".concat(e.slug),children:"Export"})]})]})})]},t)}))},Se=function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve(t),e.next=3,ae(t.id);case 3:return e.next=5,fe(t.id);case 5:return e.next=7,U("Edit");case 7:w(!0),Ce();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)(Object(r.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(Object(y.e)());case 2:d.a.post("/modules/list").then((function(e){H(e.data.modules)})).catch((function(){}));case 3:case"end":return e.stop()}}),e)}))),[]),Object(B.jsxs)(o.Fragment,{children:[Object(B.jsx)(b.l,{children:Object(B.jsx)(b.m,{children:Object(B.jsxs)(b.ib,{children:[Object(B.jsxs)(b.p,{className:"justify-content-between align-items-center p-1",children:[Object(B.jsx)(b.B,{children:Object(B.jsx)("h5",{children:"Roles"})}),Object(B.jsx)(b.B,{className:"d-flex justify-content-end",children:Object(B.jsx)(j.b,{I:"write",a:"role",children:Object(B.jsxs)(b.i,{color:"primary",size:"sm",onClick:function(){w(!0)},children:[" ",Object(B.jsx)(f.a,{size:15}),"Add"]})})})]}),Object(B.jsxs)(b.mb,{className:"table table-bordered table-hover",children:[Object(B.jsx)("thead",{children:Object(B.jsxs)("tr",{children:[Object(B.jsx)("th",{children:"Name"}),Object(B.jsx)("th",{children:"Status"}),Object(B.jsx)("th",{children:"No of Users"}),Object(B.jsx)("th",{children:"Actions"})]})}),Object(B.jsx)("tbody",{children:P.map((function(e,c){return Object(B.jsxs)("tr",{children:[Object(B.jsx)("td",{className:"fw-bolder",children:e.name}),Object(B.jsx)("td",{children:1===e.status?Object(B.jsx)(b.f,{color:"light-success",className:"ms-50",children:"Active"}):Object(B.jsx)(b.f,{color:"light-danger",className:"ms-50",children:"InActive"})}),Object(B.jsx)("td",{children:e.noofusers}),Object(B.jsx)("td",{children:Object(B.jsx)(j.b,{I:"write",a:"role",children:Object(B.jsxs)("div",{className:"d-flex",children:[Object(B.jsx)(m.a,{size:15,className:"me-1",onClick:function(){ae(e.id),te(!0)}}),!e.isdefault&&Object(B.jsxs)("div",{className:"d-flex",children:[Object(B.jsx)(x.a,{size:15,className:"me-1",onClick:function(){Se(e)}}),Object(B.jsx)(h.a,{size:15,onClick:function(){return c=e.id,t.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ms-1"},buttonsStyling:!1}).then(function(){var e=Object(r.a)(Object(a.a)().mark((function e(s){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.value){e.next=9;break}return e.next=3,W(Object(y.d)(c));case 3:return t.fire({icon:"success",title:"Deleted!",text:"Department has been deleted.",customClass:{confirmButton:"btn btn-success"}}),e.next=6,W(Object(y.e)());case 6:return e.abrupt("return",!0);case 9:if(s.dismiss!==t.DismissReason.cancel){e.next=11;break}return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var c}})]})]})})})]},c)}))})]})]})})}),Object(B.jsxs)(b.Q,{isOpen:ee,toggle:function(){return te(!ee)},className:"modal-dialog-centered modal-lg",children:[Object(B.jsx)(b.T,{className:"bg-transparent",toggle:function(){return te(!ee)},children:"Role Permissions"}),Object(B.jsx)(b.R,{children:Object(B.jsx)(R,{roleId:ne})})]}),Object(B.jsx)(b.Q,{isOpen:N,onClosed:function(){U("Add New")},toggle:function(){return w(!N)},className:"modal-dialog-centered modal-lg",children:Object(B.jsxs)(I.a,{blocking:be,loader:Object(B.jsx)(Oe,{}),children:[Object(B.jsx)(b.T,{className:"bg-transparent",toggle:function(){return w(!N)}}),Object(B.jsxs)(b.R,{className:"px-2",children:[Object(B.jsx)("div",{className:"text-center mb-1",children:Object(B.jsxs)("h1",{children:[Q," Role"]})}),Object(B.jsxs)(b.ib,{tag:"form",onSubmit:he(ye),children:[Object(B.jsxs)(b.B,{xs:12,children:[Object(B.jsx)(b.N,{className:"form-label",for:"name",children:"Role Name"}),Object(B.jsx)(p.a,{name:"name",control:ge,render:function(e){var t=e.field;return Object(B.jsx)(b.K,Object(s.a)(Object(s.a)({},t),{},{id:"name",placeholder:"Enter Role name",invalid:pe.name&&!0}))}}),pe.name&&Object(B.jsx)(b.I,{children:"Please enter a valid role name"})]}),Object(B.jsxs)(b.B,{xs:12,className:"mt-1",children:[Object(B.jsx)(b.N,{className:"form-label",for:"description",children:"Description"}),Object(B.jsx)(p.a,{name:"description",control:ge,render:function(e){var t=e.field;return Object(B.jsx)(b.K,Object(s.a)(Object(s.a)({},t),{},{id:"description",placeholder:"Enter Description",invalid:pe.description&&!0}))}})]}),Object(B.jsxs)(b.B,{xs:12,children:[Object(B.jsx)("h4",{className:"mt-2 pt-50",children:"Role Permissions"}),Object(B.jsx)(b.mb,{className:"table-flush-spacing",responsive:!0,children:Object(B.jsx)("tbody",{children:Ce()})})]}),Object(B.jsxs)(b.B,{className:"text-center mt-2",xs:12,children:[Object(B.jsx)(b.i,{type:"submit",color:"primary",className:"me-1",children:"Submit"}),Object(B.jsx)(b.i,{type:"button",color:"warning",onClick:ke,children:"Cancel"})]})]})]})]})})]})}},702:function(e,t,c){"use strict";var s=c(8),n=c(23),a=c(0),r=c(7),l=c.n(r),i=c(13),o=(c(704),c(2)),d=function(e){var t,c=e.children,r=e.blocking,i=e.loader,d=e.className,j=e.tag,b=e.overlayColor,u=j;return Object(o.jsxs)(u,{className:l()("ui-loader",(t={},Object(n.a)(t,d,d),Object(n.a)(t,"show",r),t)),children:[c,r?Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)("div",Object(s.a)({className:"overlay"},r&&b?{style:{backgroundColor:b}}:{})),Object(o.jsx)("div",{className:"loader",children:i})]}):null]})};t.a=d,d.defaultProps={tag:"div",blocking:!1,loader:Object(o.jsx)(i.jb,{color:"primary"})}},703:function(e,t,c){"use strict";var s=c(2);t.a=function(){return Object(s.jsx)("div",{className:"fallback-spinner",children:Object(s.jsxs)("div",{className:"loading",children:[Object(s.jsx)("div",{className:"effect-1 effects"}),Object(s.jsx)("div",{className:"effect-2 effects"}),Object(s.jsx)("div",{className:"effect-3 effects"})]})})}},704:function(e,t,c){}}]);
//# sourceMappingURL=84.32269701.chunk.js.map