{"version":3,"sources":["views/apps/invoice/preview/PreviewCard.js","views/apps/invoice/preview/PreviewCardINT.js","views/apps/invoice/preview/PreviewActions.js","@core/components/sidebar/index.js","views/apps/invoice/preview/InvoicePayment/EditPayment.js","views/apps/invoice/preview/InvoicePayment/index.js","views/apps/invoice/preview/InvoicePayment/AddPayment.js","views/apps/invoice/preview/index.js","@core/components/ui-loader/index.js","@core/components/spinner/Loading-spinner.js","views/apps/invoice/helper/hepler.js","../node_modules/draftjs-to-html/lib/draftjs-to-html.js","../node_modules/react-select/dist/useCreatable-00a6568c.esm.js","../node_modules/react-select/creatable/dist/react-select.esm.js","views/apps/invoice/shared-sidebar/SidebarSendInvoice.js"],"names":["activeOrg","activeOrganization","PreviewCard","amount","data","id","useParams","dispatch","useDispatch","useState","invoiceItems","setInvoiceItems","invoiceTaxes","setInvoiceTaxes","dateFormat","value","length","moment","format","unix","a","b","paymentstatusObj","name","color","renderStatus","val","find","o","parseInt","inWords","num","undefined","toString","n","substr","match","str","Number","String","replace","txt","charAt","toUpperCase","toLowerCase","indianFormattedPrice","removedValue","finalVal","includes","slice","indexOf","lastThree","substring","otherNumbers","split","useEffect","parser","calculatetaxes","getInvoiceItems","res","payload","className","paymentstatus","imageid","Math","floor","random","content","renderOrg","referrerPolicy","height","width","src","alt","addressline1","addressline2","city","pinzipcode","statename","isgstregistered","gstin","uniqueno","invoicedate","paymentdue","contactname","billingaddressline1","billingaddressline2","billingaddresscity","billingaddresszipcode","billingaddressstate","billingaddressstateothers","parseFloat","dueamount","toFixed","billingcurrencysymbol","bankaccountbankname","bankaccountholdername","bankaccountbranchname","bankaccountifsccode","console","log","placeofsupplyname","xl","placeofsupplyothers","md","sm","billingcurrencyshortname","responsive","map","item","ind","servicesName","description","sacCode","price","taxes","obj","k","taxName","tax_name","taxAmount","tax_amount_calculated","isTaxApplicable","taxGroupName","exemptionReasonName","subTotalAmount","order","lg","totalamount","signatureflag","signatureimageid","currencycode","convertionrate","subtotalamount","key","tax_percentage","tax_amount","note","isNaN","bankaccounttype","isrcmapplicable","PreviewActions","invoice","block","outline","onClick","axios","post","then","downloadLink","document","createElement","fileName","href","pdf","download","click","removeChild","catch","err","window","print","Sidebar","props","open","size","title","children","closeBtn","toggleSidebar","bodyClassName","contentClassName","wrapperClassName","headerClassName","rest","renderCloseBtn","isOpen","toggle","classnames","modalClassName","style","close","tag","options","wheelPropagation","activeOrgId","activeOrganizationid","userId","orgUserId","AddPayment","selectedPayment","taxDeducted","setTaxDeducted","accountOptions","setAccountOptions","amountErr","setAmountErr","schema","yup","shape","organizationId","default","updatedBy","contactId","isTaxDeducted","amountWithHeld","when","is","required","totalAmountPaid","paymentDate","referenceOfMainId","pendingAmountBeforeRecord","transactionAccountId","referenceNo","billingCurrency","billingAddress","notes","paymentConfirmation","useForm","resolver","yupResolver","defaultValues","cast","handleSubmit","control","errors","formState","reset","onSubmit","formData","payamount","_formValues","totalPaidamount","amountHeld","pendingamountbeforerecord","valueOf","updateInvociePayments","datatemp","status","updateInvoicePayment","contactid","istaxdeducted","amountwithheld","totalamountpaid","paymentdate","toDate","referenceofmainid","transactionaccountid","referenceno","billingcurrency","billingaddress","getRow","fieldLabel","fieldName","reqflag","for","render","field","invalid","message","response","arr","transactionaccounts","onChange","date","dateStr","altInput","ref","inputRef","classNamePrefix","c","getOptionLabel","option","accountHolderName","getOptionValue","getSelectRow","type","onInput","defaultChecked","MySwal","withReactContent","Swal","InvoicePayments","tabId","refreshFlag","store","useSelector","state","invoicepayment","payments","setPayments","setSelectedPayment","editPaymentOpen","setEditPaymentOpen","toggleEditSidebar","row","getData","invoiceId","invoicePayments","EditPayment","e","preventDefault","fire","text","icon","showCancelButton","confirmButtonText","customClass","confirmButton","cancelButton","buttonsStyling","result","deleteInvociePayments","totalAmount","deletefun","createdBy","bankaccountid","addInvoicePayments","InvoicePreview","sendSidebarOpen","setSendSidebarOpen","addPaymentOpen","setAddPaymentOpen","setData","active","setActive","getInvoice","taskinvoices","toggleTab","tab","pills","activeTab","countryshortname","PreviewCardINT","InvoicePayment","to","UILoader","blocking","loader","overlayColor","Tag","backgroundColor","defaultProps","ComponentSpinner","calculateTax","taxRateInPercentage","TaxType","calculatedTax","JSON","parse","Array","isArray","stringify","module","exports","forEach","callback","hasOwnProperty","call","isEmptyString","trim","blockTypesMapping","unstyled","blockquote","code","getBlockTag","getBlockStyle","styles","concat","getHashtagRanges","blockText","hashtagConfig","sections","counter","startIndex","trigger","separator","endIndex","hashtag","push","offset","getSections","lastOffset","sectionRanges","entityRanges","range","sort","s1","s2","r","start","end","entityKey","isAtomicEntityBlock","getStyleArrayForBlock","inlineStyleRanges","inlineStyles","BOLD","ITALIC","UNDERLINE","STRIKETHROUGH","CODE","SUPERSCRIPT","SUBSCRIPT","COLOR","BGCOLOR","FONTSIZE","FONTFAMILY","i","getStylesAtOffset","sameStyleAsPrevious","index","sameStyled","addInlineStyleMarkup","getSectionText","ch","join","addStylePropertyMarkup","styleString","test","getEntityMarkup","entityMap","customEntityTransform","entity","html","url","targetOption","alignment","getInlineStyleSections","styleSections","from","section","trimLeadingZeros","sectionText","replacedText","trimTrailingZeros","getStyleTagSectionMarkup","styleSection","getInlineStyleSectionMarkup","styleTagSections","styleSectionText","stylePropertySection","getSectionMarkup","entityInlineMarkup","getBlockInnerMarkup","blockMarkup","getBlockMarkup","directional","blockHtml","blockTag","blockStyle","isList","blockType","getListMarkup","listBlocks","previousBlock","listHtml","nestedListBlock","nestedBlock","depth","draftToHtml","editorContent","blocks","factory","_excluded","compareOption","arguments","accessors","candidate","optionValue","optionLabel","builtins","formatCreateLabel","inputValue","isValidNewOption","selectValue","selectOptions","some","getNewOptionData","label","__isNew__","CreatableSelect","React","forwardRef","selectProps","_ref","_ref$allowCreateWhile","allowCreateWhileLoading","_ref$createOptionPosi","createOptionPosition","_ref$formatCreateLabe","_ref$isValidNewOption","_ref$getNewOptionData","onCreateOption","_ref$options","propsOptions","propsOnChange","restSelectProps","_objectWithoutProperties","_restSelectProps$getO","getOptionValue$1","_restSelectProps$getO2","getOptionLabel$1","isLoading","isMulti","newOption","useMemo","cleanValue","_toConsumableArray","useCallback","newValue","actionMeta","action","valueArray","newOptionData","newActionMeta","valueTernary","_objectSpread2","useCreatable","useStateManager","Select","_extends","userData","loggedInUser","SidebarSendInvoice","colourStyles","multiValue","setBlock","Loader","toEmail","setToEmail","ccEmail","setCCEmail","thankyouNote","setThankyouNote","userOptions","setUserOptions","clientOptions","setClientOptions","getCoatctInfo","contactinformations","getThankyouNotes","slug","emailtemplates","taskinvoiceitemsservicename","contactperson","replaceAll","temp","EditorState","createWithContent","ContentState","createFromBlockArray","convertFromHTML","clientid","Object","keys","organizationusers","ccOpen","setCCOpen","SelectComponent","Option","initials","email","toggleCC","scrollable","fade","keyboard","backdrop","container","isClearable","theme","selectThemeColors","components","placeholder","toolbarClassName","editorState","onEditorStateChange","convertToRaw","getCurrentContent","editorClassName","toolbar","inline","inDropdown","subject","taskinvoiceId","clientName","toast","success","position","sendMail"],"mappings":"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","file":"static/js/24.60e7d46f.chunk.js","sourcesContent":["// ** Reactstrap Imports\nimport moment from 'moment'\nimport { useEffect, useState } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { useParams } from 'react-router-dom'\nimport { Card, CardBody, CardText, Row, Col, Table, Badge } from 'reactstrap'\nimport { getInvoiceItems } from '../store'\nimport { activeOrganization } from '@src/helper/sassHelper'\nconst activeOrg = activeOrganization()\nimport { parser } from '../helper/hepler'\n// ** Custom Components\nimport Avatar from '@components/avatar'\n\nconst PreviewCard = ({ data }) => {\n\n  const { id } = useParams()\n  //const accountTypeArr = ['', 'Saving', 'Current']\n  const dispatch = useDispatch()\n  const [invoiceItems, setInvoiceItems] = useState([])\n  const [invoiceTaxes, setInvoiceTaxes] = useState([])\n\n  const dateFormat = (value) => {\n    if (value.length === 13) {\n      return moment(value, 'x').format(\"MMM DD, YYYY\")\n    } else {\n      return moment.unix(value).format(\"MMM DD, YYYY\")\n    }\n  }\n  const a = ['', 'one ', 'two ', 'three ', 'four ', 'five ', 'six ', 'seven ', 'eight ', 'nine ', 'ten ', 'eleven ', 'twelve ', 'thirteen ', 'fourteen ', 'fifteen ', 'sixteen ', 'seventeen ', 'eighteen ', 'nineteen ']\n  const b = ['', '', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety']\n  const paymentstatusObj = [\n    { id: '', name: \"Select All\" },\n    { id: '4', name: \"Draft\", color: 'light-primary' },\n    { id: '5', name: \"Pending\", color: 'light-danger' },\n    { id: '6', name: \"Partially Paid\", color: 'light-warning' },\n    { id: '7', name: 'Paid', color: 'light-success' },\n    { id: '11', name: 'Sent', color: 'light-secondary' }\n  ]\n  const renderStatus = (val) => {\n    const obj = paymentstatusObj.find((o) => parseInt(o.id) === parseInt(val))\n    return obj\n  }\n  const inWords = (num) => {\n    if (num === undefined) {\n      return 'zero'\n    }\n\n    if ((num === num.toString()).length > 9) {\n      return 'overflow'\n    }\n    const n = (`000000000${num}`).substr(-9).match(/^(\\d{2})(\\d{2})(\\d{2})(\\d{1})(\\d{2})$/)\n    if (!n) {\n      return\n    }\n    let str = ''\n    str += (Number(n[1]) !== 0) ? (Number(n[1]) <= 19 ? ` ${a[Number(n[1])]}core` : ` ${b[Number(n[1][0])]} ${a[Number(n[1][1])]}crore`) : ''\n\n    str += (Number(n[2]) !== 0) ? (Number(n[2]) <= 19 ? ` ${a[Number(n[2])]}lakh` : ` ${b[Number(n[2][0])]} ${a[Number(n[2][1])]}lakh`) : ''\n\n    str += (Number(n[3]) !== 0) ? (Number(n[3]) <= 19 ? ` ${a[Number(n[3])]}thousand` : ` ${b[Number(n[3][0])]} ${a[Number(n[3][1])]}thousand`) : ''\n\n    str += (Number(n[4]) !== 0) ? (Number(n[4]) <= 19 ? ` ${a[Number(n[4])]}hundred` : ` ${b[Number(n[4])]}hundred`) : ''\n    n[5] = String(n[5])\n    str += (Number(n[5]) !== 0) ? (`${str !== '' ? ' and ' : ''} ${a[Number(n[5])] || `${b[Number(n[5][0])]} ${a[Number(n[5][1])]}`}`) : ''\n\n    return str.replace(/\\w\\S*/g, function (txt) {\n      return txt?.charAt(0).toUpperCase() + txt.substr(1).toLowerCase()\n    })\n\n  }\n\n  const indianFormattedPrice = (val) => {\n\n    const value = String(val)\n\n    let removedValue = ''\n    let finalVal = ''\n    if (value.includes('.')) {\n      removedValue = value.slice(value.indexOf('.'))\n      finalVal = value.replace(removedValue, '')\n      finalVal = finalVal.toString()\n    } else {\n      finalVal = value.toString()\n    }\n    let lastThree = finalVal.substring(finalVal.length - 3)\n    const otherNumbers = finalVal.substring(0, finalVal.length - 3)\n    if (otherNumbers !== '') lastThree = `,${lastThree}`\n    const res = otherNumbers.replace(/\\B(?=(\\d{2})+(?!\\d))/g, \",\") + lastThree\n    return res + (removedValue === '' ? '.00' : `.${removedValue.toString().split('.')[1]}`)\n  }\n\n  const amountInwords = (amount) => {\n    const str = `${inWords(amount.split(\".\")[0])} ${amount.split(\".\")[1] !== undefined ? `and Paise ${inWords(amount.split(\".\")[1])} Only` : ''}`\n    return str\n  }\n\n  const renderOrg = name => {\n    const stateNum = Math.floor(Math.random() * 6),\n      states = ['light-success', 'light-danger', 'light-warning', 'light-info', 'light-primary', 'light-secondary'],\n      color = states[stateNum]\n    return <Avatar color={color} className='me-50' content={name !== null ? name?.charAt(0) : ''} />\n\n  }\n\n  useEffect(async () => {\n\n    setInvoiceTaxes(parser(data.calculatetaxes))\n\n    const res = await dispatch(getInvoiceItems(id))\n    await setInvoiceItems(res.payload)\n\n  }, [data])\n\n  return data !== null ? (\n    <Card className='invoice-preview-card'>\n      <Col>\n        <Badge color={renderStatus(data.paymentstatus).color || 'light-primary'}>{renderStatus(data.paymentstatus).name || data.paymentstatus}</Badge>\n      </Col>\n      <div className='invoice-container'>\n        <CardBody className='invoice-padding pb-0'>\n          {/* Header */}\n          <div className='d-flex align-items-center justify-content-between'>\n            {activeOrg.imageid === null ? renderOrg(activeOrg.name) : <img referrerPolicy=\"no-referrer\" className='rounded me-50' height={75} width={75} src={`https://drive.google.com/thumbnail?id=${activeOrg.imageid}&authuser=0`} alt=\"Organisation Logo\" />}\n            <h3 className='text-primary'>Invoice</h3>\n            <h5>Original for recepient</h5>\n          </div>\n          <div className='d-flex flex-wrap flex-md-nowrap align-items-center justify-content-between'>\n            <div className='col col-12 col-md-6'>\n              <div className='logo-wrapper mb-0 mb-lg-2'>\n                <h4 className='text-primary ms-0 mt-2'>{activeOrg.name}</h4>\n              </div>\n              <CardText className='mb-25'>{activeOrg.addressline1}</CardText>\n              <CardText className='mb-25'>{activeOrg.addressline2}</CardText>\n              <CardText className='mb-0'>{activeOrg.city} - {activeOrg.pinzipcode}</CardText>\n              <CardText className='mb-0'>{activeOrg.statename}</CardText>\n              {data?.isgstregistered && <CardText className='mb-0'>GSTIN - {activeOrg.gstin} &nbsp;&nbsp; State Code : {activeOrg.gstin.substr(0, 2)}</CardText>}\n            </div>\n\n            <div className='mt-lg-3 mt-1 col-md-3 col-12'>\n              <div className='invoice-date-wrapper justify-content-between'>\n                <p className='col-6 mb-25'>\n                  Invoice\n                </p>\n                <p className='col-6 m-25 invoice-date text-end '>{data.uniqueno}</p>\n              </div>\n              <div className='invoice-date-wrapper justify-content-between'>\n                <p className='invoice-date-title col-6'>Date Issued:</p>\n                <p className='invoice-date col-6 text-end'>{dateFormat(data.invoicedate)}</p>\n              </div>\n              <div className='invoice-date-wrapper justify-content-between'>\n                <p className='invoice-date-title'>Due Date:</p>\n                <p className='invoice-date text-end'>{dateFormat(data.paymentdue)}</p>\n              </div>\n            </div>\n          </div>\n          {/* /Header */}\n        </CardBody>\n\n        {/* Address and Contact */}\n        <CardBody className='invoice-padding pt-0'>\n          <div className='d-flex flex-wrap flex-md-nowrap align-items-center justify-content-between mt-1'>\n            <Col className='p-0 col-12 col-md-9' >\n              <h6 className='mb-2'>Invoice To:</h6>\n              <h6 className='mb-25'>{data.contactname}</h6>\n              <CardText className='mb-25'>{data.billingaddressline1}</CardText>\n              <CardText className='mb-25'>{data.billingaddressline2}</CardText>\n              <CardText className='mb-25'>{data.billingaddresscity} - {data.billingaddresszipcode}</CardText>\n\n              {data.billingaddressstate !== '' && <CardText className='mb-25'>{data.billingaddressstate}</CardText>}\n              {\n                data.billingaddressstateothers !== '' && <CardText className='mb-25'>{data.billingaddressstateothers}</CardText>\n              }\n              {(data?.isgstregistered && data.gstin !== '') && <CardText className='mb-25'>GSTIN - {data.gstin}</CardText>}\n            </Col>\n            <Col className='p-0 col-12 col-md-3'>\n              <h6 className='mb-2'>Payment Details:</h6>\n              <table className='col-12'>\n                <tbody>\n                  <tr>\n                    <td className='pe-1'>Total Due:</td>\n                    <td className='text-end'>\n                      <span className='fw-bold'>{indianFormattedPrice(parseFloat(data.dueamount).toFixed(2))} {data?.billingcurrencysymbol}</span>\n                    </td>\n                  </tr>\n                  <tr>\n                    <td className='pe-1'>Bank name:</td>\n                    <td className='text-end'>{data.bankaccountbankname}</td>\n                  </tr>\n                  <tr>\n                    <td className='pe-1'>Account Name:</td>\n                    <td className='text-end'><p className='text-end m-0 text-overflow-ellipsis'>{data.bankaccountholdername}</p>\n                    </td>\n                  </tr>\n                  <tr>\n                    <td className='pe-1'>Branch Name:</td>\n                    <td className='text-end'>{data.bankaccountbranchname}</td>\n                  </tr>\n                  <tr>\n                    <td className='pe-1'>IFSC code:</td>\n                    <td className='text-end'>{data.bankaccountifsccode}</td>\n                  </tr>\n                  {/* <tr>\n                    <td className='pe-1'>Account Type:</td>\n                    <td className='text-end'>{accountTypeArr[data.accounttype]}</td>\n                  </tr> */}\n                </tbody>\n              </table>\n            </Col>\n          </div>\n          <div className='d-flex align-items-center justify-content-between mt-1'>\n            {console.log(data.isgstregistered)}\n            {(data?.isgstregistered && data.placeofsupplyname) &&\n              <Col className='p-0' xl='8'>\n                <CardText className='mb-25'>Place Of Supply: {data.placeofsupplyname}</CardText>\n                <CardText className='mb-25'>State: {data.placeofsupplyname} &nbsp;&nbsp;State Code:  </CardText>\n              </Col>\n            }\n            {(data.placeofsupplyothers !== '') &&\n              <Col className='p-0' xl='8'>\n                <CardText className='mb-25'>Place Of Supply: {data.placeofsupplyothers}</CardText>\n              </Col>\n            }\n            <Col className='p-0 mt-xl-0 mt-2' md='3' sm='6'>\n              <table className='col-12'>\n                <tbody>\n                  <tr>\n                    <td className='pe-1'>Currency code: </td>\n                    <td className='text-end'>{data.billingcurrencyshortname}</td>\n                  </tr>\n                </tbody>\n              </table>\n            </Col>\n          </div>\n        </CardBody>\n        {/* /Address and Contact */}\n\n        {/* Invoice Description */}\n        <Table responsive>\n          <thead>\n            <tr>\n              <th className='py-1'>Item</th>\n              {data?.isgstregistered && <th className='py-1'>SAC Code</th>}\n              <th className='py-1'>Price</th>\n              {data?.isgstregistered && <th className='py-1'>Tax</th>}\n              <th className='py-1'>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            {invoiceItems.map((item, ind) => {\n              return (\n                <tr key={ind}>\n                  <td className='py-1'>\n                    <p className='card-text fw-bold mb-25'>{item.servicesName}</p>\n                    <p className='card-text text-nowrap'>\n                      {item.description}\n                    </p>\n                  </td>\n                  {data?.isgstregistered &&\n                    <td className='py-1'>\n                      <span className='fw-bold'>{item.sacCode}</span>\n                    </td>\n                  }\n                  <td className='py-1'>\n                    <span className='fw-bold'>{indianFormattedPrice(item.price)} {data?.billingcurrencysymbol}</span>\n                  </td>\n                  {data?.isgstregistered &&\n                    <td className='py-1'>\n                      <span className='fw-bold'>\n                        {\n                          item.taxes.map((obj, k) => {\n                            return (<Row key={k}><span>{obj.taxName || obj.tax_name} - {indianFormattedPrice(obj.taxAmount) || indianFormattedPrice(obj.tax_amount_calculated)}</span></Row>)\n                          })\n                        }\n                        {\n                          item.isTaxApplicable === false && (<Row>\n                            <span>{item.taxGroupName}</span>\n                            <span>{item.exemptionReasonName}</span></Row>)\n                        }\n                      </span>\n                    </td>\n                  }\n                  <td className='py-1'>\n                    <span className='fw-bold'>{indianFormattedPrice(item.subTotalAmount)} {data?.billingcurrencysymbol}</span>\n                  </td>\n                </tr>\n              )\n            })\n            }\n          </tbody>\n        </Table>\n        {/* /Invoice Description */}\n\n        {/* Total & Sales Person */}\n        <CardBody className='invoice-padding pb-0'>\n          <Row className='invoice-sales-total-wrapper'>\n            <Col className='mt-md-0 mt-3' md='6' order={{ md: 1, lg: 2 }}>\n              <b>Total In Words </b>:{amountInwords(data.totalamount)}\n              {activeOrg.signatureflag &&\n                <Row>\n                  <p className='font-weight-800 mt-1'>Authorized and signed by</p>\n                  {activeOrg.signatureimageid && <img className='img-fluid width-20-per ms-2' referrerPolicy=\"no-referrer\" src={`https://drive.google.com/thumbnail?id=${activeOrg.signatureimageid}&authuser=0`} />}\n                </Row>\n              }\n              {data.isgstregistered !== 'IN' &&\n\n                <p className='font-weight-800 mt-1'>Amount in {activeOrg.currencycode} : {parseFloat(data.totalamount * data.convertionrate).toFixed(2)}</p>\n              }\n            </Col>\n            <Col className='d-flex justify-content-end' md='6' order={{ md: 2, lg: 1 }}>\n              <div className='invoice-total-wrapper'>\n                <div className='invoice-total-item'>\n                  <p className='invoice-total-title'>{data?.isgstregistered && 'Pre Tax'}  Amount:</p>\n                  <p className='invoice-total-amount'>{indianFormattedPrice(data.subtotalamount)} {data?.billingcurrencysymbol}</p>\n                </div>\n                {data?.isgstregistered && (\n                  <div>\n                    {\n                      invoiceTaxes.length > 0 &&\n                      invoiceTaxes.map((obj, key) => {\n                        return (\n                          <div className='invoice-total-item' key={key}>\n                            <p className='invoice-total-title'>{obj.taxName || `${obj.tax_name}${obj.tax_percentage}%`}</p>\n                            <p className='invoice-total-amount'>{indianFormattedPrice(obj.taxAmount) || indianFormattedPrice(obj.tax_amount)} {data?.billingcurrencysymbol}</p>\n                          </div>\n                        )\n                      })\n                    }\n                  </div>)\n                }\n                <div className='invoice-total-item text-primary'>\n                  <p className='invoice-total-title'>Total Payable:</p>\n                  <p className='invoice-total-amount'>{indianFormattedPrice(data.totalamount)} {data?.billingcurrencysymbol}</p>\n                </div>\n                <hr className='my-50' />\n                <div className='invoice-total-item text-success'>\n                  <p className='invoice-total-title'>Paid:</p>\n                  <p className='invoice-total-amount'>{indianFormattedPrice(data.totalamount - data.dueamount)} {data?.billingcurrencysymbol}</p>\n                </div>\n                <div className='invoice-total-item text-danger'>\n                  <p className='invoice-total-title'>Balance Due:</p>\n                  <p className='invoice-total-amount'>{indianFormattedPrice(parseFloat(data.dueamount).toFixed(2))} {data?.billingcurrencysymbol}</p>\n                </div>\n              </div>\n            </Col>\n          </Row>\n        </CardBody>\n        {/* /Total & Sales Person */}\n\n        <hr className='invoice-spacing' />\n\n        {/* Invoice Note */}\n        <CardBody className='invoice-padding pt-0'>\n          <Row>\n            <Col sm='12'>\n              <span className='fw-bold'>Note: </span>\n              <span>\n                {data.note}\n              </span>\n            </Col>\n          </Row>\n        </CardBody>\n      </div>\n      {/* /Invoice Note */}\n    </Card>\n  ) : null\n}\n\nexport default PreviewCard\n","// ** Reactstrap Imports\nimport moment from 'moment'\nimport { useEffect, useState } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { useParams } from 'react-router-dom'\nimport { Card, CardBody, CardText, Row, Col, Table, Badge } from 'reactstrap'\nimport { getInvoiceItems } from '../store'\nimport { activeOrganization } from '@src/helper/sassHelper'\nconst activeOrg = activeOrganization()\nimport { parser } from '../helper/hepler'\n// ** Custom Components\nimport Avatar from '@components/avatar'\n\nconst PreviewCard = ({ data }) => {\n\n  const accountTypeArr = ['', 'Saving', 'Checking']\n  const { id } = useParams()\n  const dispatch = useDispatch()\n  const [invoiceItems, setInvoiceItems] = useState([])\n  const [invoiceTaxes, setInvoiceTaxes] = useState([])\n\n  const dateFormat = (value) => {\n    if (value.length === 13) {\n      return moment(value, 'x').format(\"MMM DD, YYYY\")\n    } else {\n      return moment.unix(value).format(\"MMM DD, YYYY\")\n    }\n  }\n  const a = ['', 'one ', 'two ', 'three ', 'four ', 'five ', 'six ', 'seven ', 'eight ', 'nine ', 'ten ', 'eleven ', 'twelve ', 'thirteen ', 'fourteen ', 'fifteen ', 'sixteen ', 'seventeen ', 'eighteen ', 'nineteen ']\n  const b = ['', '', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety']\n  const paymentstatusObj = [\n    { id: '', name: \"Select All\" },\n    { id: '5', name: \"Pending\", color: 'light-danger' },\n    { id: '6', name: \"Partially Paid\", color: 'light-warning' },\n    { id: '7', name: 'Paid', color: 'light-success' },\n    { id: '11', name: 'Sent', color: 'light-secondary' }\n  ]\n  const renderStatus = (val) => {\n    const obj = paymentstatusObj.find((o) => parseInt(o.id) === parseInt(val))\n    return obj\n  }\n  const inWords = (num) => {\n    if (num === undefined) {\n      return 'zero'\n    }\n\n    if ((num === num.toString()).length > 9) {\n      return 'overflow'\n    }\n    const n = (`000000000${num}`).substr(-9).match(/^(\\d{2})(\\d{2})(\\d{2})(\\d{1})(\\d{2})$/)\n    if (!n) {\n      return\n    }\n    let str = ''\n    n[1] = Number(n[1])\n    str += (Number(n[1]) !== 0) ? (`${a[Number(n[1])] || b[n[1][0]]} ${isNaN(Number(n[1][1])) ? '' : a[n[1][1]]} crore `) : ''\n    n[2] = Number(n[2])\n    str += (Number(n[2]) !== 0) ? (`${a[Number(n[2])] || b[n[2][0]]} ${isNaN(Number(n[2][1])) ? '' : a[n[2][1]]}lakh `) : ''\n    n[3] = Number(n[3])\n    str += (Number(n[3]) !== 0) ? (`${a[Number(n[3])] || b[n[3][0]]} ${isNaN(Number(n[3][1])) ? '' : a[n[3][1]]}thousand `) : ''\n    n[4] = Number(n[4])\n    str += (Number(n[4]) !== 0) ? (`${a[Number(n[4])] || b[n[4][0]]} hundred `) : ''\n    n[5] = Number(n[5])\n    str += (Number(n[5]) !== 0) ? (`${str !== '' ? 'and ' : ''}${a[Number(n[5])] || b[n[5][0]]}`) : 'Zero'\n    return str.replace(/\\w\\S*/g, function (txt) {\n      return txt?.charAt(0).toUpperCase() + txt.substr(1).toLowerCase()\n    })\n\n  }\n  const amountInwords = (amount) => {\n    const str = `${inWords(amount.split(\".\")[0])} and Paise ${inWords(amount.split(\".\")[1])} Only`\n    return str\n  }\n\n  const renderOrg = name => {\n    const stateNum = Math.floor(Math.random() * 6),\n      states = ['light-success', 'light-danger', 'light-warning', 'light-info', 'light-primary', 'light-secondary'],\n      color = states[stateNum]\n    return <Avatar color={color} className='me-50' content={name !== null ? name?.charAt(0) : ''} />\n\n  }\n\n  useEffect(async () => {\n\n    setInvoiceTaxes(parser(data.calculatetaxes))\n\n    const res = await dispatch(getInvoiceItems(id))\n    await setInvoiceItems(res.payload)\n\n  }, [data])\n\n  return data !== null ? (\n    <Card className='invoice-preview-card'>\n      <Col>\n        <Badge color={renderStatus(data.paymentstatus).color || 'light-primary'}>{renderStatus(data.paymentstatus).name || data.paymentstatus}</Badge>\n      </Col>\n      <div className='invoice-container'>\n        <CardBody className='invoice-padding pb-0'>\n          {/* Header */}\n          <div className='d-flex align-items-center justify-content-between'>\n            {activeOrg.imageid === null ? renderOrg(activeOrg.name) : <img className='rounded me-50' height={75} width={75} referrerPolicy=\"no-referrer\" src={`https://drive.google.com/thumbnail?id=${activeOrg.imageid}&authuser=0`} alt=\"Organisation Logo\" />}\n            <h3 className='text-primary'>Invoice</h3>\n            <h5>Original for recepient</h5>\n          </div>\n          <div className='d-flex align-items-center justify-content-between'>\n            <div>\n              <div className='logo-wrapper'>\n                <h4 className='text-primary ms-0 mt-2'>{activeOrg.name}</h4>\n              </div>\n              <CardText className='mb-25'>{activeOrg.addressline1}</CardText>\n              <CardText className='mb-25'>{activeOrg.addressline2}</CardText>\n              <CardText className='mb-0'>{activeOrg.city} - {activeOrg.pinzipcode}</CardText>\n              <CardText className='mb-0'>{activeOrg.statename}</CardText>\n\n            </div>\n\n            <div className='mt-3 col-md-4'>\n              <div className='invoice-date-wrapper'>\n                <h4 className=''>\n                  Invoice <span className='invoice-number'>{data.uniqueno}</span>\n                </h4>\n              </div>\n              <div className='invoice-date-wrapper'>\n                <p className='invoice-date-title'>Date Issued:</p>\n                <p className='invoice-date'>{dateFormat(data.invoicedate)}</p>\n              </div>\n              <div className='invoice-date-wrapper'>\n                <p className='invoice-date-title'>Due Date:</p>\n                <p className='invoice-date'>{dateFormat(data.paymentdue)}</p>\n              </div>\n            </div>\n          </div>\n          {/* /Header */}\n        </CardBody>\n\n        {/* Address and Contact */}\n        <CardBody className='invoice-padding pt-0'>\n          <div className='d-flex align-items-center justify-content-between mt-1'>\n            <Col className='p-0' md='8'>\n              <h6 className='mb-2'>Invoice To:</h6>\n              <h6 className='mb-25'>{data.contactname}</h6>\n              <CardText className='mb-25'>{data.billingaddressline1}</CardText>\n              <CardText className='mb-25'>{data.billingaddressline2}</CardText>\n              <CardText className='mb-25'>{data.billingaddresscity} - {data.billingaddresszipcode}</CardText>\n              <CardText className='mb-25'>{data.billingaddressstate}</CardText>\n            </Col>\n            <Col className='p-0' md='4'>\n              <h6 className='mb-2'>Payment Details:</h6>\n              <table>\n                <tbody>\n                  <tr>\n                    <td className='pe-1'>Total Due:</td>\n                    <td>\n                      <span className='fw-bold'>{data.dueamount}</span>\n                    </td>\n                  </tr>\n                  <tr>\n                    <td className='pe-1'>Bank name:</td>\n                    <td>{data.bankaccountbankname}</td>\n                  </tr>\n                  <tr>\n                    <td className='pe-1'>Account Name:</td>\n                    <td>{data.bankaccountholdername}</td>\n                  </tr>\n                  <tr>\n                    <td className='pe-1'>Branch Name:</td>\n                    <td>{data.bankaccountbranchname}</td>\n                  </tr>\n\n                  <tr>\n                    <td className='pe-1'>Accouont Type:</td>\n                    <td>{accountTypeArr[data.bankaccounttype]}</td>\n                  </tr>\n\n                </tbody>\n              </table>\n            </Col>\n          </div>\n          <div className='d-flex align-items-center justify-content-between mt-1'>\n            <Col className='p-0' xl='8'>\n              <CardText className='mb-25'>Place Of Supply: {data.placeofsupplyname}</CardText>\n            </Col>\n            <Col className='p-0 mt-xl-0 mt-2' xl='4'>\n              <table>\n                <tbody>\n                  <tr>\n                    <td className='pe-1'>Currency code: </td>\n                    <td>{data.billingcurrencyshortname}</td>\n                  </tr>\n                </tbody>\n              </table>\n            </Col>\n          </div>\n        </CardBody>\n        {/* /Address and Contact */}\n\n        {/* Invoice Description */}\n        <Table responsive>\n          <thead>\n            <tr>\n              <th className='py-1'>Item</th>\n              <th className='py-1'>Description</th>\n              <th className='py-1'>Price</th>\n              <th className='py-1'>Tax</th>\n              <th className='py-1'>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            {invoiceItems.map((item, ind) => {\n              return (\n                <tr key={ind}>\n                  <td className='py-1'>\n                    <p className='card-text fw-bold mb-25'>{item.servicesName}</p>\n                  </td>\n                  <td className='py-1'>\n                    <span className='fw-bold'>{item.description}</span>\n                  </td>\n                  <td className='py-1'>\n                    <span className='fw-bold'>{item.price}</span>\n                  </td>\n                  <td className='py-1'>\n                    <span className='fw-bold'>\n                      {\n                        item.taxes.map((obj, k) => {\n                          return (<Row key={k}><span>{obj.taxName || obj.tax_name} - {obj.taxAmount || obj.tax_amount_calculated}</span></Row>)\n                        })\n                      }\n                    </span>\n                  </td>\n                  <td className='py-1'>\n                    <span className='fw-bold'>{item.subTotalAmount}</span>\n                  </td>\n                </tr>\n              )\n            })\n            }\n          </tbody>\n        </Table>\n        {/* /Invoice Description */}\n\n        {/* Total & Sales Person */}\n        <CardBody className='invoice-padding pb-0'>\n          <Row className='invoice-sales-total-wrapper'>\n            <Col className='mt-md-0 mt-3' md='6' order={{ md: 1, lg: 2 }}>\n              {amountInwords(data.totalamount)}\n            </Col>\n            <Col className='d-flex justify-content-end' md='6' order={{ md: 2, lg: 1 }}>\n              <div className='invoice-total-wrapper'>\n                <div className='invoice-total-item'>\n                  <p className='invoice-total-title'>Total Payable:</p>\n                  <p className='invoice-total-amount'>{data.totalamount}</p>\n                </div>\n                <div className='invoice-total-item'>\n                  <p className='invoice-total-title'>Pre Tax Amount:</p>\n                  <p className='invoice-total-amount'>{data.subtotalamount}</p>\n                </div>\n\n                {!data.isrcmapplicable && (\n                  <div>\n                    {\n                      invoiceTaxes.length > 0 &&\n                      invoiceTaxes.map((obj, key) => {\n                        return (\n                          <div className='invoice-total-item' key={key}>\n                            <p className='invoice-total-title'>{obj.taxName || `${obj.tax_name}${obj.tax_percentage}%`}</p>\n                            <p className='invoice-total-amount'>{obj.taxAmount || obj.tax_amount}</p>\n                          </div>\n                        )\n                      })\n                    }\n                  </div>)\n                }\n                <hr className='my-50' />\n                <div className='invoice-total-item'>\n                  <p className='invoice-total-title'>Balance Due:</p>\n                  <p className='invoice-total-amount'>{data.dueamount}</p>\n                </div>\n              </div>\n            </Col>\n          </Row>\n        </CardBody>\n        {/* /Total & Sales Person */}\n\n        <hr className='invoice-spacing' />\n\n        {/* Invoice Note */}\n        <CardBody className='invoice-padding pt-0'>\n          <Row>\n            <Col sm='12'>\n              <span className='fw-bold'>Note: </span>\n              <span>\n                {data.note}\n              </span>\n            </Col>\n          </Row>\n        </CardBody>\n      </div>\n      {/* /Invoice Note */}\n    </Card>\n  ) : null\n}\n\nexport default PreviewCard\n","// ** React Imports\n\nimport { Card, CardBody, Button, Col, Row, Badge } from 'reactstrap'\nimport axios from '@src/configs/axios/axiosConfig'\n\nconst PreviewActions = ({ invoice }) => {\n\n\n  const downloadPdf = () => {\n    axios.post('/pdfmaker/pdf', { id: invoice.id })\n      .then((res) => {\n        const downloadLink = document.createElement(\"a\")\n        const fileName = `${invoice.uniqueno}.pdf`\n        downloadLink.href = res.data.pdf\n        downloadLink.download = fileName\n        downloadLink.click()\n        document.removeChild(downloadLink)\n      })\n      .catch((err) => { console.log(err) })\n  }\n\n  return (\n    <Card className='invoice-action-wrapper'>\n      <CardBody>\n\n        <Button color='secondary' block outline className='mb-75' onClick={() => { downloadPdf() }}>\n          Download\n        </Button>\n\n        <Button color='secondary' block outline className='mb-75' onClick={() => { window.print() }}>\n          Print\n        </Button>\n        \n      </CardBody>\n    </Card>\n  )\n}\n\nexport default PreviewActions\n","// ** Third Party Components\nimport { X } from 'react-feather'\nimport Proptypes from 'prop-types'\nimport classnames from 'classnames'\nimport PerfectScrollbar from 'react-perfect-scrollbar'\n\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap'\n\nconst Sidebar = props => {\n  // ** Props\n  const {\n    open,\n    size,\n    title,\n    width,\n    children,\n    closeBtn,\n    className,\n    toggleSidebar,\n    bodyClassName,\n    contentClassName,\n    wrapperClassName,\n    headerClassName,\n    ...rest\n  } = props\n\n  // ** If user passes custom close btn render that else default close btn\n  const renderCloseBtn = closeBtn ? closeBtn : <X className='cursor-pointer' size={15} onClick={toggleSidebar} />\n\n  return (\n    <Modal\n      isOpen={open}\n      toggle={toggleSidebar}\n      contentClassName={classnames('overflow-hidden', {\n        [contentClassName]: contentClassName\n      })}\n      modalClassName={classnames('modal-slide-in', {\n        [wrapperClassName]: wrapperClassName\n      })}\n      className={classnames({\n        [className]: className,\n        'sidebar-lg': size === 'lg',\n        'sidebar-sm': size === 'sm'\n      })}\n      /*eslint-disable */\n      {...(width !== undefined\n        ? {\n            style: { width: String(width) + 'px' }\n          }\n        : {})}\n      /*eslint-enable */\n      {...rest}\n    >\n      <ModalHeader\n        className={classnames({\n          [headerClassName]: headerClassName\n        })}\n        toggle={toggleSidebar}\n        close={renderCloseBtn}\n        tag='div'\n      >\n        <h5 className='modal-title'>\n          <span className='align-middle'>{title}</span>\n        </h5>\n      </ModalHeader>\n      <PerfectScrollbar options={{ wheelPropagation: false }}>\n        <ModalBody\n          className={classnames('flex-grow-1', {\n            [bodyClassName]: bodyClassName\n          })}\n        >\n          {children}\n        </ModalBody>\n      </PerfectScrollbar>\n    </Modal>\n  )\n}\n\nexport default Sidebar\n\n// ** PropTypes\nSidebar.propTypes = {\n  className: Proptypes.string,\n  bodyClassName: Proptypes.string,\n  open: Proptypes.bool.isRequired,\n  title: Proptypes.string.isRequired,\n  contentClassName: Proptypes.string,\n  wrapperClassName: Proptypes.string,\n  children: Proptypes.any.isRequired,\n  size: Proptypes.oneOf(['sm', 'lg']),\n  toggleSidebar: Proptypes.func.isRequired,\n  width: Proptypes.oneOfType([Proptypes.number, Proptypes.string])\n}\n","// ** React Imports\nimport { useEffect, useState } from 'react'\n\n// ** Third Party Components\nimport Flatpickr from 'react-flatpickr'\nimport Select from 'react-select'\nimport classnames from 'classnames'\n// ** Reactstrap Imports\nimport axios from '@src/configs/axios/axiosConfig'\nimport { Form, Input, Label, Button, Row, Col, FormFeedback } from 'reactstrap'\n\n// ** Custom Components\nimport Sidebar from '@components/sidebar'\nimport { updateInvociePayments, updateInvoicePayment } from './store/index'\n// ** Styles\nimport '@styles/react/libs/flatpickr/flatpickr.scss'\nimport '@styles/base/pages/app-invoice.scss'\n\nimport { useForm, Controller } from \"react-hook-form\"\nimport * as yup from \"yup\"\nimport { yupResolver } from \"@hookform/resolvers/yup\"\nimport { useDispatch } from 'react-redux'\nimport { activeOrganizationid, orgUserId } from '@src/helper/sassHelper'\nimport { useParams } from 'react-router-dom'\nimport moment from 'moment'\n\nconst activeOrgId = activeOrganizationid()\nconst userId = orgUserId()\n\nconst AddPayment = ({ open, toggleSidebar, selectedPayment, data }) => {\n\n  const dispatch = useDispatch()\n  const [taxDeducted, setTaxDeducted] = useState(false)\n  const [accountOptions, setAccountOptions] = useState([])\n  const [amountErr, setAmountErr] = useState(false)\n  const { id } = useParams()\n  // ** States\n  const schema = yup.object().shape({\n    organizationId: yup.string().default(activeOrgId),\n    id: yup.string().default(0),\n    updatedBy: yup.string().default(userId),\n    contactId: yup.string().default(''),\n    isTaxDeducted: yup.boolean().default(false),\n    amountWithHeld: yup.string().when(\"isTaxDeducted\", { is: (isTaxDeducted) => isTaxDeducted, then: yup.string().required(\"Please Enter Amount with Held\") }).default(0),\n    totalAmountPaid: yup.string().required(\"Please Enter Amount\"),\n    paymentDate: yup.string().required(\"Please Enter Payment Date\"),\n    referenceOfMainId: yup.string().default(''),\n    pendingAmountBeforeRecord: yup.string().default(''),\n    transactionAccountId: yup.string().required(\"Please Select Account\").default(''),\n    referenceNo: yup.string(),\n    billingCurrency: yup.string().default(''),\n    billingAddress: yup.string().default(''),\n    notes: yup.string().default(''),\n    paymentConfirmation: yup.boolean().default(false)\n  })\n  const { handleSubmit, control, formState: { errors }, reset } = useForm({\n    resolver: yupResolver(schema),\n    defaultValues: schema.cast()\n  })\n\n  const onSubmit = async (formData) => {\n    const payamount = parseFloat(control._formValues.totalAmountPaid)\n    const totalPaidamount = parseFloat(control._formValues.totalAmountPaid) + parseFloat(control._formValues.amountWithHeld)\n    if (taxDeducted) {\n      const amountHeld = parseFloat(control._formValues.amountWithHeld)\n      if (parseFloat(selectedPayment.pendingamountbeforerecord) < (payamount + amountHeld)) {\n        setAmountErr(true)\n        return false\n      }\n    } else {\n      if (parseFloat(selectedPayment.pendingamountbeforerecord) < (payamount)) {\n        setAmountErr(true)\n        return false\n      }\n    }\n    formData['paymentDate'] = moment(formData['paymentDate']).valueOf()\n    await dispatch(updateInvociePayments(formData))\n\n    const datatemp = {\n      updatedBy: userId,\n      id,\n      dueamount: parseFloat(formData.pendingAmountBeforeRecord) - parseFloat(totalPaidamount),\n      status: parseFloat(data.dueamount) === (payamount) ? 7 : 6\n    }\n    await dispatch(updateInvoicePayment(datatemp))\n\n    toggleSidebar()\n  }\n\n  useEffect(() => {\n    if (typeof selectedPayment === 'object') {\n      reset({\n        organizationId: activeOrgId,\n        updatedBy: userId,\n        id: selectedPayment.id,\n        contactId: selectedPayment.contactid,\n        isTaxDeducted: selectedPayment.istaxdeducted,\n        amountWithHeld: selectedPayment.amountwithheld,\n        totalAmountPaid: selectedPayment.totalamountpaid,\n        paymentDate: moment(selectedPayment.paymentdate, 'x').toDate(),\n        referenceOfMainId: selectedPayment.referenceofmainid,\n        pendingAmountBeforeRecord: selectedPayment.pendingamountbeforerecord,\n        transactionAccountId: selectedPayment.transactionaccountid,\n        referenceNo: selectedPayment.referenceno,\n        billingCurrency: selectedPayment.billingcurrency,\n        billingAddress: selectedPayment.billingaddress,\n        notes: selectedPayment.notes || '',\n        paymentConfirmation: false\n\n      })\n\n      setTaxDeducted(selectedPayment.istaxdeducted)\n    }\n  }, [selectedPayment])\n\n  const getRow = (fieldLabel, fieldName, reqflag = false) => {\n    return (\n      <Row >\n        <Label sm='12' size='lg' className={classnames(`form-label ${reqflag ? 'required' : ''}`)} for={fieldName}>\n          {fieldLabel}\n        </Label>\n        <Col sm='12'>\n          <Controller\n            id={fieldName}\n            name={fieldName}\n            control={control}\n            render={({ field }) => <Input invalid={errors[fieldName] && true} {...field} />}\n          />\n          {errors[fieldName] && <FormFeedback>{errors[fieldName].message}</FormFeedback>}\n        </Col>\n      </Row>\n    )\n  }\n\n  const getSelectRow = (fieldLabel, fieldName, options, reqflag = false) => {\n    return (\n\n      <Row >\n        <Label sm='12' size='lg' className={classnames(`form-label ${reqflag ? 'required' : ''}`)} for={fieldName} >\n          {fieldLabel}\n        </Label>\n        <Col sm='12'>\n          <Controller\n            control={control}\n            name={fieldName}\n            id={fieldName}\n            render={({ field, ref }) => (\n              <Select\n                inputRef={ref}\n                className={classnames('react-select', { 'is-invalid': errors[fieldName] })}\n                {...field}\n                classNamePrefix='select'\n                options={options}\n                value={options.find(c => { return c.id === field.value })}\n                onChange={val => { return field.onChange(val.id) }}\n                getOptionLabel={(option) => option.accountHolderName}\n                getOptionValue={(option) => option.id}\n              />\n            )}\n\n          />\n          {errors[fieldName] && <FormFeedback className='text-danger'>{errors[fieldName]?.message}</FormFeedback>}\n        </Col>\n      </Row>\n    )\n  }\n\n  const getBankAccounts = () => {\n    axios.post('/transactionaccounts/dropdown').then(response => {\n      const arr = response.data\n      setAccountOptions(arr.transactionaccounts)\n    })\n  }\n\n  useEffect(() => {\n    getBankAccounts()\n  }, [])\n\n  return (\n    <Sidebar\n      size='lg'\n      open={open}\n      title='Add Payment'\n      headerClassName='mb-1'\n      contentClassName='p-0'\n      toggleSidebar={toggleSidebar}\n    >\n      <Form onSubmit={handleSubmit(onSubmit)}>\n\n        <Row>\n          <span className='fw-bold ps-1'>Invoice Balance {data.billingcurrencysymbol || ''} {data.dueamount || 0}</span>\n        </Row>\n        {amountErr && <p className='text-danger'>Total Payment Amount should Lesserthan or Equal to Invoice Balance </p>}\n        {getRow('Payment Amount', 'totalAmountPaid', true)}\n\n        <Row >\n          <Label sm='12' size='lg' className={classnames(`form-label'required`)} for={`paymentDate`} >\n            Payment Date\n          </Label>\n          <Col sm='12'>\n            <Controller\n              control={control}\n              name={`paymentDate`}\n              id='paymentDate'\n              render={({ field }) => (\n                <Flatpickr\n                  value={field.value}\n                  onChange={(date, dateStr) => { field.onChange(dateStr) }}\n                  options={{ altInput: true }}\n                  className='form-control invoice-edit-input due-date-picker'\n                />\n              )}\n            />\n          </Col>\n        </Row>\n\n        {getSelectRow('Payment Account', \"transactionAccountId\", accountOptions, true)}\n\n        {getRow('Reference Number', 'referenceNo', true)}\n\n        <Row className='form-switch form-check-primary  px-0 py-1'>\n          <Label for='isTaxDeducted' className='form-check-label'>\n            Tax Deducted?\n          </Label>\n          <Controller\n            control={control}\n            id='isTaxDeducted'\n            name='isTaxDeducted'\n            render={({ field }) => (\n              <Input type='switch' onInput={(val) => { field.onChange(val); setTaxDeducted(!taxDeducted) }} {...field} defaultChecked={field.value} />\n            )}\n          />\n        </Row>\n\n        {taxDeducted && getRow('Amount With Held', 'amountWithHeld', true)}\n\n        {getRow('Payment Notes', 'notes', false)}\n\n        <Row className='form-switch form-check-primary  px-0 py-1'>\n          <Label for='paymentConfirmation' className='form-check-label'>\n            Sent Payment Confirmation\n          </Label>\n          <Controller\n            control={control}\n            id='paymentConfirmation'\n            name='paymentConfirmation'\n            render={({ field }) => (\n              <Input type='switch' onInput={(val) => { field.onChange(val) }} {...field} defaultChecked={field.value} />\n            )}\n          />\n        </Row>\n\n        <div className='d-flex flex-wrap mb-0'>\n          <Button className='me-1' color='primary' type='submit'>\n            Submit\n          </Button>\n          <Button color='secondary' outline onClick={toggleSidebar}>\n            Cancel\n          </Button>\n        </div>\n      </Form>\n    </Sidebar>\n  )\n}\n\nexport default AddPayment\n","// ** Reactstrap Imports\nimport { useEffect, useState } from 'react'\n\nimport { useParams } from 'react-router-dom'\nimport { Card, CardBody, Table, Col } from 'reactstrap'\nimport { getData, deleteInvociePayments, updateInvoicePayment } from './store/index'\nimport { Edit, Trash } from 'react-feather'\n// ** Custom Components\nimport Swal from 'sweetalert2'\nimport withReactContent from 'sweetalert2-react-content'\n\nimport moment from 'moment'\nimport EditPayment from './EditPayment'\n\nconst MySwal = withReactContent(Swal)\n\nimport { useDispatch, useSelector } from 'react-redux'\nimport { orgUserId } from '@src/helper/sassHelper'\n\nconst userId = orgUserId()\n\nconst InvoicePayments = ({ data, tabId, refreshFlag }) => {\n\n\n  const { id } = useParams()\n  const dispatch = useDispatch()\n  const store = useSelector(state => state.invoicepayment)\n  const [payments, setPayments] = useState([])\n  const [selectedPayment, setSelectedPayment] = useState({})\n\n  const [editPaymentOpen, setEditPaymentOpen] = useState(false)\n\n  const toggleEditSidebar = ((row) => {\n    setEditPaymentOpen(!editPaymentOpen)\n    setSelectedPayment(row)\n  }\n  )\n\n  const dateFormat = (value) => {\n      return moment(value, 'x').format(\"MMM DD, YYYY\")\n  }\n\n  const deletefun = (row) => {\n\n    return MySwal.fire({\n      title: 'Are you sure?',\n      text: \"You won't be able to revert this!\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonText: 'Yes, delete it!',\n      customClass: {\n        confirmButton: 'btn btn-primary',\n        cancelButton: 'btn btn-outline-danger ms-1'\n      },\n      buttonsStyling: false\n    }).then(async (result) => {\n      if (result.value) {\n        await dispatch(deleteInvociePayments(row.id))\n\n        const totalAmount = parseFloat(data.dueamount) + (parseFloat(row.totalamountpaid) + parseFloat(row.amountwithheld || 0))\n        const datatemp = {\n          updatedBy: userId,\n          id,\n          dueamount: totalAmount,\n          status: parseFloat(data.totalamount) === (totalAmount) ? 5 : 6\n        }\n        await dispatch(updateInvoicePayment(datatemp))\n        refreshFlag(true)\n        MySwal.fire({\n          icon: 'success',\n          title: 'Deleted!',\n          text: 'Invoice has been deleted.',\n          customClass: {\n            confirmButton: 'btn btn-success'\n          }\n        })\n      }\n    })\n  }\n\n  useEffect(async () => {\n    if (tabId === '2' && id) {\n      await dispatch(getData({ invoiceId: id }))\n    }\n  }, [tabId])\n\n  useEffect(() => {\n    setPayments(store?.invoicePayments)\n  }, [store?.invoicePayments])\n\n  return data !== null ? (\n    <Card className='invoice-preview-card'>\n      <CardBody className='invoice-padding pb-0'>\n\n        <EditPayment toggleSidebar={toggleEditSidebar} open={editPaymentOpen} selectedPayment={selectedPayment} data={data} />\n\n        <div className='invoice-list-dataTable react-dataTable'>\n          <Table>\n            <thead>\n              <tr>\n                <th>Payment #</th>\n                <th>Payment Date</th>\n                <th>Refernce</th>\n                <th>Amount</th>\n                <th>Amount With Held</th>\n                <th>Action</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                payments.map((row, k) => {\n                  return (\n                    <tr key={k}>\n                      <td> <span className='text-primary'>{row.uniqueno}</span></td>\n                      <td>{dateFormat(row.paymentdate)}</td>\n                      <td>\n                        <span>{row.referenceno}</span>\n                      </td>\n                      <td>\n                        <span> {row.totalamountpaid || 0}</span>\n                      </td>\n                      <td>\n                        <span>{row.amountwithheld || 0}</span>\n                      </td>\n                      <td>\n                        <Col tag='a' onClick={e => {\n                          e.preventDefault()\n                          toggleEditSidebar(row)\n                        }}\n                          className='w-100'>\n                          <Edit size={14} className='me-50' />\n                        </Col>\n                        <Col\n                          tag='a'\n                          className='w-100'\n                          onClick={e => {\n                            e.preventDefault()\n                            deletefun(row)\n                          }}\n                        >\n                          <Trash size={14} className='me-50' />\n                        </Col>\n                      </td>\n                    </tr>\n                  )\n                })\n              }\n            </tbody>\n          </Table>\n        </div>\n      </CardBody>\n    </Card>\n  ) : null\n}\n\nexport default InvoicePayments\n","// ** React Imports\nimport { useEffect, useState } from 'react'\n\n// ** Third Party Components\nimport Flatpickr from 'react-flatpickr'\nimport Select from 'react-select'\nimport classnames from 'classnames'\n// ** Reactstrap Imports\nimport axios from '@src/configs/axios/axiosConfig'\nimport { Form, Input, Label, Button, Row, Col, FormFeedback } from 'reactstrap'\n\n// ** Custom Components\nimport Sidebar from '@components/sidebar'\nimport { addInvoicePayments, updateInvoicePayment } from './store/index'\n// ** Styles\nimport '@styles/react/libs/flatpickr/flatpickr.scss'\nimport '@styles/base/pages/app-invoice.scss'\n\nimport { useForm, Controller } from \"react-hook-form\"\nimport * as yup from \"yup\"\nimport { yupResolver } from \"@hookform/resolvers/yup\"\nimport { useDispatch } from 'react-redux'\nimport { activeOrganizationid, orgUserId } from '@src/helper/sassHelper'\nimport { useParams } from 'react-router-dom'\nimport moment from 'moment'\n\nconst activeOrgId = activeOrganizationid()\n//const activeOrg = activeOrganization()\nconst userId = orgUserId()\n\nconst AddPayment = ({ open, toggleSidebar, data }) => {\n\n  const { id } = useParams()\n  const dispatch = useDispatch()\n  const [taxDeducted, setTaxDeducted] = useState(false)\n  const [accountOptions, setAccountOptions] = useState([])\n  const [amountErr, setAmountErr] = useState(false)\n  // ** States\n  const schema = yup.object().shape({\n    organizationId: yup.string().default(activeOrgId),\n    createdBy: yup.string().default(userId),\n    contactId: yup.string().default(data.contactid),\n    isTaxDeducted: yup.boolean().default(false),\n    amountWithHeld: yup.string().when(\"isTaxDeducted\", { is: (isTaxDeducted) => isTaxDeducted, then: yup.string().required(\"Please Enter Amount with Held\") }).default(0),\n    totalAmountPaid: yup.string().required(\"Please Enter Amount\"),\n    paymentDate: yup.string().required(\"Please Enter Payment Date\"),\n    referenceOfMainId: yup.string().default(data.id),\n    pendingAmountBeforeRecord: yup.string().default(data.dueamount),\n    transactionAccountId: yup.string().required(\"Please Select Account\").default(data.bankaccountid),\n    referenceNo: yup.string().default(''),\n    billingCurrency: yup.string().default(data.billingcurrencysymbol),\n    billingAddress: yup.string().default(''),\n    notes: yup.string(),\n    paymentConfirmation: yup.boolean().default(false)\n  })\n  const { handleSubmit, control, formState: { errors } } = useForm({\n    resolver: yupResolver(schema),\n    defaultValues: schema.cast()\n  })\n\n  const onSubmit = async (formData) => {\n    const payamount = parseFloat(control._formValues.totalAmountPaid)\n    const totalPaidamount = parseFloat(control._formValues.totalAmountPaid) + parseFloat(control._formValues.amountWithHeld)\n    if (taxDeducted) {\n      const amountHeld = parseFloat(control._formValues.amountWithHeld)\n      if (parseFloat(data.dueamount) < (payamount + amountHeld)) {\n        setAmountErr(true)\n        return false\n      }\n    } else {\n      if (parseFloat(data.dueamount) < (payamount)) {\n        setAmountErr(true)\n        return false\n      }\n    }\n    formData['paymentDate'] = moment(formData['paymentDate']).valueOf()\n    await dispatch(addInvoicePayments(formData))\n    const datatemp = {\n      updatedBy: userId,\n      id,\n      dueamount: parseFloat(formData.pendingAmountBeforeRecord) - parseFloat(totalPaidamount),\n      status: parseFloat(data.dueamount) === (payamount) ? 7 : 6\n    }\n    await dispatch(updateInvoicePayment(datatemp))\n\n    toggleSidebar()\n\n  }\n\n  const getRow = (fieldLabel, fieldName, reqflag = false) => {\n    return (\n      <Row >\n        <Label sm='12' size='lg' className={classnames(`form-label ${reqflag ? 'required' : ''}`)} for={fieldName}>\n          {fieldLabel}\n        </Label>\n        <Col sm='12'>\n          <Controller\n            id={fieldName}\n            name={fieldName}\n            control={control}\n            render={({ field }) => <Input invalid={errors[fieldName] && true} {...field} />}\n          />\n          {errors[fieldName] && <FormFeedback>{errors[fieldName].message}</FormFeedback>}\n        </Col>\n      </Row>\n    )\n  }\n\n  const getSelectRow = (fieldLabel, fieldName, options, reqflag = false) => {\n    return (\n\n      <Row >\n        <Label sm='12' size='lg' className={classnames(`form-label ${reqflag ? 'required' : ''}`)} for={fieldName} >\n          {fieldLabel}\n        </Label>\n        <Col sm='12'>\n          <Controller\n            control={control}\n            name={fieldName}\n            id={fieldName}\n            render={({ field, ref }) => (\n              <Select\n                inputRef={ref}\n                className={classnames('react-select', { 'is-invalid': errors[fieldName] })}\n                {...field}\n                classNamePrefix='select'\n                options={options}\n                value={options.find(c => { return c.id === field.value })}\n                onChange={val => { return field.onChange(val.id) }}\n                getOptionLabel={(option) => option.accountHolderName}\n                getOptionValue={(option) => option.id}\n              />\n            )}\n\n          />\n          {errors[fieldName] && <FormFeedback className='text-danger'>{errors[fieldName]?.message}</FormFeedback>}\n        </Col>\n      </Row>\n    )\n  }\n\n  const getBankAccounts = () => {\n    axios.post('/transactionaccounts/dropdown').then(response => {\n      const arr = response.data\n      setAccountOptions(arr.transactionaccounts)\n    })\n  }\n\n  useEffect(() => {\n    getBankAccounts()\n  }, [])\n\n  return (\n    <Sidebar\n      size='lg'\n      open={open}\n      title='Edit Payment'\n      headerClassName='mb-1'\n      contentClassName='p-0'\n      toggleSidebar={toggleSidebar}\n    >\n      <Form onSubmit={handleSubmit(onSubmit)}>\n\n        <Row>\n          <span className='fw-bold ps-1'>Invoice Balance {data.billingcurrencysymbol} {data.dueamount}</span>\n        </Row>\n        {amountErr && <p className='text-danger'>Total Payment Amount should Lesserthan or Equal to Invoice Balance </p>}\n        {getRow('Payment Amount', 'totalAmountPaid', true)}\n\n        <Row >\n          <Label sm='12' size='lg' className={classnames(`form-label'required`)} for={`paymentDate`} >\n            Payment Date\n          </Label>\n          <Col sm='12'>\n            <Controller\n              control={control}\n              name={`paymentDate`}\n              id='paymentDate'\n              render={({ field }) => (\n                <Flatpickr\n                  value={field.value}\n                  onChange={(date, dateStr) => { field.onChange(dateStr) }}\n                  options={{ altInput: true }}\n                  className='form-control invoice-edit-input due-date-picker'\n                />\n              )}\n            />\n          </Col>\n        </Row>\n\n        {getSelectRow('Payment Account', \"transactionAccountId\", accountOptions, true)}\n\n        {getRow('Reference Number', 'referenceNo', true)}\n\n        <Row className='form-switch form-check-primary  px-0 py-1'>\n          <Label for='isTaxDeducted' className='form-check-label'>\n            Tax Deducted?\n          </Label>\n          <Controller\n            control={control}\n            id='isTaxDeducted'\n            name='isTaxDeducted'\n            render={({ field }) => (\n              <Input type='switch' onInput={(val) => { field.onChange(val); setTaxDeducted(!taxDeducted) }} {...field} defaultChecked={field.value} />\n            )}\n          />\n        </Row>\n\n        {taxDeducted && getRow('Amount With Held', 'amountWithHeld', true)}\n\n        {getRow('Payment Notes', 'notes', false)}\n\n        <Row className='form-switch form-check-primary  px-0 py-1'>\n          <Label for='paymentConfirmation' className='form-check-label'>\n            Sent Payment Confirmation\n          </Label>\n          <Controller\n            control={control}\n            id='paymentConfirmation'\n            name='paymentConfirmation'\n            render={({ field }) => (\n              <Input type='switch' onInput={(val) => { field.onChange(val) }} {...field} defaultChecked={field.value} />\n            )}\n          />\n        </Row>\n\n        <div className='d-flex flex-wrap mb-0'>\n          <Button className='me-1' color='primary' type='submit'>\n            Submit\n          </Button>\n          <Button color='secondary' outline onClick={toggleSidebar}>\n            Cancel\n          </Button>\n        </div>\n      </Form>\n    </Sidebar>\n  )\n}\n\nexport default AddPayment\n","// ** React Imports\nimport { useEffect, useState } from 'react'\nimport { useParams, Link } from 'react-router-dom'\n\n// ** Third Party Components\nimport axios from '@src/configs/axios/axiosConfig'\n// ** Reactstrap Imports\nimport { Row, Col, Alert, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap'\n\n// ** Invoice Preview Components\nimport PreviewCard from './PreviewCard'\nimport PreviewCardINT from './PreviewCardINT'\nimport PreviewActions from './PreviewActions'\nimport InvoicePayments from './InvoicePayment/index'\nimport AddPayment from './InvoicePayment/AddPayment'\nimport SendInvoiceSidebar from '../shared-sidebar/SidebarSendInvoice'\n\n// ** Styles\nimport '@styles/base/pages/app-invoice.scss'\nimport { User, Lock } from 'react-feather'\nimport { activeOrganization } from '@src/helper/sassHelper'\nconst activeOrg = activeOrganization()\n\nconst InvoicePreview = () => {\n  // ** HooksVars\n  const { id } = useParams()\n\n  // ** States\n  const [sendSidebarOpen, setSendSidebarOpen] = useState(false)\n\n  const [addPaymentOpen, setAddPaymentOpen] = useState(false)\n  const [data, setData] = useState(null)\n  const [active, setActive] = useState('1')\n  // ** Functions to toggle add & send sidebar\n\n  const getInvoice = async () => {\n    axios.post('/taskinvoices/get', { id }).then((res) => {\n      setData(res.data.taskinvoices)\n    }).catch((err) => { console.log(err) })\n\n  }\n\n  const toggleSendSidebar = () => setSendSidebarOpen(!sendSidebarOpen)\n  const toggleAddSidebar = () => {\n    setAddPaymentOpen(!addPaymentOpen)\n    getInvoice()\n  }\n\n  const refreshFlag = (val) => {\n    if (val) {\n      getInvoice()\n    }\n  }\n\n  useEffect(() => {\n    getInvoice()\n  }, [])\n\n  const toggleTab = tab => {\n    if (active !== tab) {\n      setActive(tab)\n    }\n  }\n\n  // ** Get invoice on mount based on id\n\n  return data !== null && data !== undefined ? (\n    <div className='invoice-preview-wrapper'>\n      <Row className='invoice-preview'>\n        <Col xl={12} md={8} sm={12}>\n\n          <Nav pills className='mb-2'>\n            <NavItem>\n              <NavLink active={active === '1'} onClick={() => toggleTab('1')}>\n                <User className='font-medium-3 me-50' />\n                <span className='fw-bold'>Invoice</span>\n              </NavLink>\n            </NavItem>\n            <NavItem>\n              <NavLink active={active === '2'} onClick={() => toggleTab('2')}>\n                <Lock className='font-medium-3 me-50' />\n                <span className='fw-bold'>Payments</span>\n              </NavLink>\n            </NavItem>\n          </Nav>\n          <TabContent activeTab={active}>\n            <TabPane tabId='1'>\n              {activeOrg.countryshortname === 'IN' ? <PreviewCard data={data} tabId={active} /> : <PreviewCardINT data={data} tabId={active} />}\n            </TabPane>\n            <TabPane tabId='2'>\n              <InvoicePayments data={data} tabId={active} refreshFlag={refreshFlag} />\n            </TabPane>\n          </TabContent>\n\n        </Col>\n        <Col xl={12} md={4} sm={12}>\n          <PreviewActions id={id} setSendSidebarOpen={setSendSidebarOpen} setAddPaymentOpen={setAddPaymentOpen} invoice={data} />\n        </Col>\n      </Row>\n      {sendSidebarOpen &&\n\n        <SendInvoiceSidebar toggleSidebar={toggleSendSidebar} open={sendSidebarOpen} invoice={data} />\n\n      }\n      <AddPayment toggleSidebar={toggleAddSidebar} open={addPaymentOpen} data={data} />\n    </div>\n  ) : (\n    <Alert color='danger'>\n      <h4 className='alert-heading'>Invoice not found</h4>\n      <div className='alert-body'>\n        Invoice with id: {id} doesn't exist. Check list of all invoices:{' '}\n        <Link to='/invoice/list'>Invoice List</Link>\n      </div>\n    </Alert>\n  )\n}\n\nexport default InvoicePreview\n","// ** React Imports\nimport { Fragment } from 'react'\n\n// ** Third Party Components\nimport Proptypes from 'prop-types'\nimport classnames from 'classnames'\n\n// ** Reactstrap Imports\nimport { Spinner } from 'reactstrap'\n\n// ** Styles\nimport './ui-loader.scss'\n\nconst UILoader = props => {\n  const { children, blocking, loader, className, tag, overlayColor } = props\n\n  const Tag = tag\n\n  return (\n    <Tag className={classnames('ui-loader', { [className]: className, show: blocking })}>\n      {children}\n      {blocking ? (\n        <Fragment>\n          <div\n            className='overlay' /*eslint-disable */\n            {...(blocking && overlayColor ? { style: { backgroundColor: overlayColor } } : {})}\n            /*eslint-enable */\n          ></div>\n          <div className='loader'>{loader}</div>\n        </Fragment>\n      ) : null}\n    </Tag>\n  )\n}\n\nexport default UILoader\n\nUILoader.defaultProps = {\n  tag: 'div',\n  blocking: false,\n  loader: <Spinner color='primary' />\n}\n\nUILoader.propTypes = {\n  tag: Proptypes.string,\n  loader: Proptypes.any,\n  className: Proptypes.string,\n  overlayColor: Proptypes.string,\n  blocking: Proptypes.bool.isRequired\n}\n","const ComponentSpinner = () => {\n  return (\n    <div className='fallback-spinner'>\n      <div className='loading'>\n        <div className='effect-1 effects'></div>\n        <div className='effect-2 effects'></div>\n        <div className='effect-3 effects'></div>\n      </div>\n    </div>\n  )\n}\n\nexport default ComponentSpinner\n","export const calculateTax = (amount, taxRateInPercentage, TaxType) => {\n    let calculatedTax = 0\n    if (TaxType === 1) { //Inclusive\n        calculatedTax = parseFloat(amount) - (parseFloat(amount) * (100 / (100 + parseFloat(taxRateInPercentage))))\n        // calculatedTax = parseFloat(amount) - parseFloat(calculatedTax);\n\n    } else if (TaxType === 2) { //Exclusive\n        calculatedTax = (parseFloat(amount) * parseFloat(taxRateInPercentage)) / 100\n    }\n    return parseFloat(calculatedTax)\n}\n\nexport const parser = (str) => {\n\n    return JSON.parse(Array.isArray(str) ? JSON.stringify(str).replace(/\\\\/g, '') : str.replace(/\\\\/g, ''))\n\n}","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.draftjsToHtml = factory());\n}(this, (function () { 'use strict';\n\n  /**\n  * Utility function to execute callback for eack key->value pair.\n  */\n  function forEach(obj, callback) {\n    if (obj) {\n      for (var key in obj) {\n        // eslint-disable-line no-restricted-syntax\n        if ({}.hasOwnProperty.call(obj, key)) {\n          callback(key, obj[key]);\n        }\n      }\n    }\n  }\n  /**\n  * The function returns true if the string passed to it has no content.\n  */\n\n  function isEmptyString(str) {\n    if (str === undefined || str === null || str.length === 0 || str.trim().length === 0) {\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n  * Mapping block-type to corresponding html tag.\n  */\n\n  var blockTypesMapping = {\n    unstyled: 'p',\n    'header-one': 'h1',\n    'header-two': 'h2',\n    'header-three': 'h3',\n    'header-four': 'h4',\n    'header-five': 'h5',\n    'header-six': 'h6',\n    'unordered-list-item': 'ul',\n    'ordered-list-item': 'ol',\n    blockquote: 'blockquote',\n    code: 'pre'\n  };\n  /**\n  * Function will return HTML tag for a block.\n  */\n\n  function getBlockTag(type) {\n    return type && blockTypesMapping[type];\n  }\n  /**\n  * Function will return style string for a block.\n  */\n\n  function getBlockStyle(data) {\n    var styles = '';\n    forEach(data, function (key, value) {\n      if (value) {\n        styles += \"\".concat(key, \":\").concat(value, \";\");\n      }\n    });\n    return styles;\n  }\n  /**\n  * The function returns an array of hashtag-sections in blocks.\n  * These will be areas in block which have hashtags applicable to them.\n  */\n\n  function getHashtagRanges(blockText, hashtagConfig) {\n    var sections = [];\n\n    if (hashtagConfig) {\n      var counter = 0;\n      var startIndex = 0;\n      var text = blockText;\n      var trigger = hashtagConfig.trigger || '#';\n      var separator = hashtagConfig.separator || ' ';\n\n      for (; text.length > 0 && startIndex >= 0;) {\n        if (text[0] === trigger) {\n          startIndex = 0;\n          counter = 0;\n          text = text.substr(trigger.length);\n        } else {\n          startIndex = text.indexOf(separator + trigger);\n\n          if (startIndex >= 0) {\n            text = text.substr(startIndex + (separator + trigger).length);\n            counter += startIndex + separator.length;\n          }\n        }\n\n        if (startIndex >= 0) {\n          var endIndex = text.indexOf(separator) >= 0 ? text.indexOf(separator) : text.length;\n          var hashtag = text.substr(0, endIndex);\n\n          if (hashtag && hashtag.length > 0) {\n            sections.push({\n              offset: counter,\n              length: hashtag.length + trigger.length,\n              type: 'HASHTAG'\n            });\n          }\n\n          counter += trigger.length;\n        }\n      }\n    }\n\n    return sections;\n  }\n  /**\n  * The function returns an array of entity-sections in blocks.\n  * These will be areas in block which have same entity or no entity applicable to them.\n  */\n\n\n  function getSections(block, hashtagConfig) {\n    var sections = [];\n    var lastOffset = 0;\n    var sectionRanges = block.entityRanges.map(function (range) {\n      var offset = range.offset,\n          length = range.length,\n          key = range.key;\n      return {\n        offset: offset,\n        length: length,\n        key: key,\n        type: 'ENTITY'\n      };\n    });\n    sectionRanges = sectionRanges.concat(getHashtagRanges(block.text, hashtagConfig));\n    sectionRanges = sectionRanges.sort(function (s1, s2) {\n      return s1.offset - s2.offset;\n    });\n    sectionRanges.forEach(function (r) {\n      if (r.offset > lastOffset) {\n        sections.push({\n          start: lastOffset,\n          end: r.offset\n        });\n      }\n\n      sections.push({\n        start: r.offset,\n        end: r.offset + r.length,\n        entityKey: r.key,\n        type: r.type\n      });\n      lastOffset = r.offset + r.length;\n    });\n\n    if (lastOffset < block.text.length) {\n      sections.push({\n        start: lastOffset,\n        end: block.text.length\n      });\n    }\n\n    return sections;\n  }\n  /**\n  * Function to check if the block is an atomic entity block.\n  */\n\n\n  function isAtomicEntityBlock(block) {\n    if (block.entityRanges.length > 0 && (isEmptyString(block.text) || block.type === 'atomic')) {\n      return true;\n    }\n\n    return false;\n  }\n  /**\n  * The function will return array of inline styles applicable to the block.\n  */\n\n\n  function getStyleArrayForBlock(block) {\n    var text = block.text,\n        inlineStyleRanges = block.inlineStyleRanges;\n    var inlineStyles = {\n      BOLD: new Array(text.length),\n      ITALIC: new Array(text.length),\n      UNDERLINE: new Array(text.length),\n      STRIKETHROUGH: new Array(text.length),\n      CODE: new Array(text.length),\n      SUPERSCRIPT: new Array(text.length),\n      SUBSCRIPT: new Array(text.length),\n      COLOR: new Array(text.length),\n      BGCOLOR: new Array(text.length),\n      FONTSIZE: new Array(text.length),\n      FONTFAMILY: new Array(text.length),\n      length: text.length\n    };\n\n    if (inlineStyleRanges && inlineStyleRanges.length > 0) {\n      inlineStyleRanges.forEach(function (range) {\n        var offset = range.offset;\n        var length = offset + range.length;\n\n        for (var i = offset; i < length; i += 1) {\n          if (range.style.indexOf('color-') === 0) {\n            inlineStyles.COLOR[i] = range.style.substring(6);\n          } else if (range.style.indexOf('bgcolor-') === 0) {\n            inlineStyles.BGCOLOR[i] = range.style.substring(8);\n          } else if (range.style.indexOf('fontsize-') === 0) {\n            inlineStyles.FONTSIZE[i] = range.style.substring(9);\n          } else if (range.style.indexOf('fontfamily-') === 0) {\n            inlineStyles.FONTFAMILY[i] = range.style.substring(11);\n          } else if (inlineStyles[range.style]) {\n            inlineStyles[range.style][i] = true;\n          }\n        }\n      });\n    }\n\n    return inlineStyles;\n  }\n  /**\n  * The function will return inline style applicable at some offset within a block.\n  */\n\n\n  function getStylesAtOffset(inlineStyles, offset) {\n    var styles = {};\n\n    if (inlineStyles.COLOR[offset]) {\n      styles.COLOR = inlineStyles.COLOR[offset];\n    }\n\n    if (inlineStyles.BGCOLOR[offset]) {\n      styles.BGCOLOR = inlineStyles.BGCOLOR[offset];\n    }\n\n    if (inlineStyles.FONTSIZE[offset]) {\n      styles.FONTSIZE = inlineStyles.FONTSIZE[offset];\n    }\n\n    if (inlineStyles.FONTFAMILY[offset]) {\n      styles.FONTFAMILY = inlineStyles.FONTFAMILY[offset];\n    }\n\n    if (inlineStyles.UNDERLINE[offset]) {\n      styles.UNDERLINE = true;\n    }\n\n    if (inlineStyles.ITALIC[offset]) {\n      styles.ITALIC = true;\n    }\n\n    if (inlineStyles.BOLD[offset]) {\n      styles.BOLD = true;\n    }\n\n    if (inlineStyles.STRIKETHROUGH[offset]) {\n      styles.STRIKETHROUGH = true;\n    }\n\n    if (inlineStyles.CODE[offset]) {\n      styles.CODE = true;\n    }\n\n    if (inlineStyles.SUBSCRIPT[offset]) {\n      styles.SUBSCRIPT = true;\n    }\n\n    if (inlineStyles.SUPERSCRIPT[offset]) {\n      styles.SUPERSCRIPT = true;\n    }\n\n    return styles;\n  }\n  /**\n  * Function returns true for a set of styles if the value of these styles at an offset\n  * are same as that on the previous offset.\n  */\n\n  function sameStyleAsPrevious(inlineStyles, styles, index) {\n    var sameStyled = true;\n\n    if (index > 0 && index < inlineStyles.length) {\n      styles.forEach(function (style) {\n        sameStyled = sameStyled && inlineStyles[style][index] === inlineStyles[style][index - 1];\n      });\n    } else {\n      sameStyled = false;\n    }\n\n    return sameStyled;\n  }\n  /**\n  * Function returns html for text depending on inline style tags applicable to it.\n  */\n\n  function addInlineStyleMarkup(style, content) {\n    if (style === 'BOLD') {\n      return \"<strong>\".concat(content, \"</strong>\");\n    }\n\n    if (style === 'ITALIC') {\n      return \"<em>\".concat(content, \"</em>\");\n    }\n\n    if (style === 'UNDERLINE') {\n      return \"<ins>\".concat(content, \"</ins>\");\n    }\n\n    if (style === 'STRIKETHROUGH') {\n      return \"<del>\".concat(content, \"</del>\");\n    }\n\n    if (style === 'CODE') {\n      return \"<code>\".concat(content, \"</code>\");\n    }\n\n    if (style === 'SUPERSCRIPT') {\n      return \"<sup>\".concat(content, \"</sup>\");\n    }\n\n    if (style === 'SUBSCRIPT') {\n      return \"<sub>\".concat(content, \"</sub>\");\n    }\n\n    return content;\n  }\n  /**\n  * The function returns text for given section of block after doing required character replacements.\n  */\n\n  function getSectionText(text) {\n    if (text && text.length > 0) {\n      var chars = text.map(function (ch) {\n        switch (ch) {\n          case '\\n':\n            return '<br>';\n\n          case '&':\n            return '&amp;';\n\n          case '<':\n            return '&lt;';\n\n          case '>':\n            return '&gt;';\n\n          default:\n            return ch;\n        }\n      });\n      return chars.join('');\n    }\n\n    return '';\n  }\n  /**\n  * Function returns html for text depending on inline style tags applicable to it.\n  */\n\n\n  function addStylePropertyMarkup(styles, text) {\n    if (styles && (styles.COLOR || styles.BGCOLOR || styles.FONTSIZE || styles.FONTFAMILY)) {\n      var styleString = 'style=\"';\n\n      if (styles.COLOR) {\n        styleString += \"color: \".concat(styles.COLOR, \";\");\n      }\n\n      if (styles.BGCOLOR) {\n        styleString += \"background-color: \".concat(styles.BGCOLOR, \";\");\n      }\n\n      if (styles.FONTSIZE) {\n        styleString += \"font-size: \".concat(styles.FONTSIZE).concat(/^\\d+$/.test(styles.FONTSIZE) ? 'px' : '', \";\");\n      }\n\n      if (styles.FONTFAMILY) {\n        styleString += \"font-family: \".concat(styles.FONTFAMILY, \";\");\n      }\n\n      styleString += '\"';\n      return \"<span \".concat(styleString, \">\").concat(text, \"</span>\");\n    }\n\n    return text;\n  }\n  /**\n  * Function will return markup for Entity.\n  */\n\n  function getEntityMarkup(entityMap, entityKey, text, customEntityTransform) {\n    var entity = entityMap[entityKey];\n\n    if (typeof customEntityTransform === 'function') {\n      var html = customEntityTransform(entity, text);\n\n      if (html) {\n        return html;\n      }\n    }\n\n    if (entity.type === 'MENTION') {\n      return \"<a href=\\\"\".concat(entity.data.url, \"\\\" class=\\\"wysiwyg-mention\\\" data-mention data-value=\\\"\").concat(entity.data.value, \"\\\">\").concat(text, \"</a>\");\n    }\n\n    if (entity.type === 'LINK') {\n      var targetOption = entity.data.targetOption || '_self';\n      return \"<a href=\\\"\".concat(entity.data.url, \"\\\" target=\\\"\").concat(targetOption, \"\\\">\").concat(text, \"</a>\");\n    }\n\n    if (entity.type === 'IMAGE') {\n      var alignment = entity.data.alignment;\n\n      if (alignment && alignment.length) {\n        return \"<div style=\\\"text-align:\".concat(alignment, \";\\\"><img src=\\\"\").concat(entity.data.src, \"\\\" alt=\\\"\").concat(entity.data.alt, \"\\\" style=\\\"height: \").concat(entity.data.height, \";width: \").concat(entity.data.width, \"\\\"/></div>\");\n      }\n\n      return \"<img src=\\\"\".concat(entity.data.src, \"\\\" alt=\\\"\").concat(entity.data.alt, \"\\\" style=\\\"height: \").concat(entity.data.height, \";width: \").concat(entity.data.width, \"\\\"/>\");\n    }\n\n    if (entity.type === 'EMBEDDED_LINK') {\n      return \"<iframe width=\\\"\".concat(entity.data.width, \"\\\" height=\\\"\").concat(entity.data.height, \"\\\" src=\\\"\").concat(entity.data.src, \"\\\" frameBorder=\\\"0\\\"></iframe>\");\n    }\n\n    return text;\n  }\n  /**\n  * For a given section in a block the function will return a further list of sections,\n  * with similar inline styles applicable to them.\n  */\n\n\n  function getInlineStyleSections(block, styles, start, end) {\n    var styleSections = [];\n    var text = Array.from(block.text);\n\n    if (text.length > 0) {\n      var inlineStyles = getStyleArrayForBlock(block);\n      var section;\n\n      for (var i = start; i < end; i += 1) {\n        if (i !== start && sameStyleAsPrevious(inlineStyles, styles, i)) {\n          section.text.push(text[i]);\n          section.end = i + 1;\n        } else {\n          section = {\n            styles: getStylesAtOffset(inlineStyles, i),\n            text: [text[i]],\n            start: i,\n            end: i + 1\n          };\n          styleSections.push(section);\n        }\n      }\n    }\n\n    return styleSections;\n  }\n  /**\n  * Replace leading blank spaces by &nbsp;\n  */\n\n\n  function trimLeadingZeros(sectionText) {\n    if (sectionText) {\n      var replacedText = sectionText;\n\n      for (var i = 0; i < replacedText.length; i += 1) {\n        if (sectionText[i] === ' ') {\n          replacedText = replacedText.replace(' ', '&nbsp;');\n        } else {\n          break;\n        }\n      }\n\n      return replacedText;\n    }\n\n    return sectionText;\n  }\n  /**\n  * Replace trailing blank spaces by &nbsp;\n  */\n\n  function trimTrailingZeros(sectionText) {\n    if (sectionText) {\n      var replacedText = sectionText;\n\n      for (var i = replacedText.length - 1; i >= 0; i -= 1) {\n        if (replacedText[i] === ' ') {\n          replacedText = \"\".concat(replacedText.substring(0, i), \"&nbsp;\").concat(replacedText.substring(i + 1));\n        } else {\n          break;\n        }\n      }\n\n      return replacedText;\n    }\n\n    return sectionText;\n  }\n  /**\n  * The method returns markup for section to which inline styles\n  * like BOLD, ITALIC, UNDERLINE, STRIKETHROUGH, CODE, SUPERSCRIPT, SUBSCRIPT are applicable.\n  */\n\n  function getStyleTagSectionMarkup(styleSection) {\n    var styles = styleSection.styles,\n        text = styleSection.text;\n    var content = getSectionText(text);\n    forEach(styles, function (style, value) {\n      content = addInlineStyleMarkup(style, content);\n    });\n    return content;\n  }\n  /**\n  * The method returns markup for section to which inline styles\n  like color, background-color, font-size are applicable.\n  */\n\n\n  function getInlineStyleSectionMarkup(block, styleSection) {\n    var styleTagSections = getInlineStyleSections(block, ['BOLD', 'ITALIC', 'UNDERLINE', 'STRIKETHROUGH', 'CODE', 'SUPERSCRIPT', 'SUBSCRIPT'], styleSection.start, styleSection.end);\n    var styleSectionText = '';\n    styleTagSections.forEach(function (stylePropertySection) {\n      styleSectionText += getStyleTagSectionMarkup(stylePropertySection);\n    });\n    styleSectionText = addStylePropertyMarkup(styleSection.styles, styleSectionText);\n    return styleSectionText;\n  }\n  /*\n  * The method returns markup for an entity section.\n  * An entity section is a continuous section in a block\n  * to which same entity or no entity is applicable.\n  */\n\n\n  function getSectionMarkup(block, entityMap, section, customEntityTransform) {\n    var entityInlineMarkup = [];\n    var inlineStyleSections = getInlineStyleSections(block, ['COLOR', 'BGCOLOR', 'FONTSIZE', 'FONTFAMILY'], section.start, section.end);\n    inlineStyleSections.forEach(function (styleSection) {\n      entityInlineMarkup.push(getInlineStyleSectionMarkup(block, styleSection));\n    });\n    var sectionText = entityInlineMarkup.join('');\n\n    if (section.type === 'ENTITY') {\n      if (section.entityKey !== undefined && section.entityKey !== null) {\n        sectionText = getEntityMarkup(entityMap, section.entityKey, sectionText, customEntityTransform); // eslint-disable-line max-len\n      }\n    } else if (section.type === 'HASHTAG') {\n      sectionText = \"<a href=\\\"\".concat(sectionText, \"\\\" class=\\\"wysiwyg-hashtag\\\">\").concat(sectionText, \"</a>\");\n    }\n\n    return sectionText;\n  }\n  /**\n  * Function will return the markup for block preserving the inline styles and\n  * special characters like newlines or blank spaces.\n  */\n\n\n  function getBlockInnerMarkup(block, entityMap, hashtagConfig, customEntityTransform) {\n    var blockMarkup = [];\n    var sections = getSections(block, hashtagConfig);\n    sections.forEach(function (section, index) {\n      var sectionText = getSectionMarkup(block, entityMap, section, customEntityTransform);\n\n      if (index === 0) {\n        sectionText = trimLeadingZeros(sectionText);\n      }\n\n      if (index === sections.length - 1) {\n        sectionText = trimTrailingZeros(sectionText);\n      }\n\n      blockMarkup.push(sectionText);\n    });\n    return blockMarkup.join('');\n  }\n  /**\n  * Function will return html for the block.\n  */\n\n  function getBlockMarkup(block, entityMap, hashtagConfig, directional, customEntityTransform) {\n    var blockHtml = [];\n\n    if (isAtomicEntityBlock(block)) {\n      blockHtml.push(getEntityMarkup(entityMap, block.entityRanges[0].key, undefined, customEntityTransform));\n    } else {\n      var blockTag = getBlockTag(block.type);\n\n      if (blockTag) {\n        blockHtml.push(\"<\".concat(blockTag));\n        var blockStyle = getBlockStyle(block.data);\n\n        if (blockStyle) {\n          blockHtml.push(\" style=\\\"\".concat(blockStyle, \"\\\"\"));\n        }\n\n        if (directional) {\n          blockHtml.push(' dir = \"auto\"');\n        }\n\n        blockHtml.push('>');\n        blockHtml.push(getBlockInnerMarkup(block, entityMap, hashtagConfig, customEntityTransform));\n        blockHtml.push(\"</\".concat(blockTag, \">\"));\n      }\n    }\n\n    blockHtml.push('\\n');\n    return blockHtml.join('');\n  }\n\n  /**\n  * Function to check if a block is of type list.\n  */\n\n  function isList(blockType) {\n    return blockType === 'unordered-list-item' || blockType === 'ordered-list-item';\n  }\n  /**\n  * Function will return html markup for a list block.\n  */\n\n  function getListMarkup(listBlocks, entityMap, hashtagConfig, directional, customEntityTransform) {\n    var listHtml = [];\n    var nestedListBlock = [];\n    var previousBlock;\n    listBlocks.forEach(function (block) {\n      var nestedBlock = false;\n\n      if (!previousBlock) {\n        listHtml.push(\"<\".concat(getBlockTag(block.type), \">\\n\"));\n      } else if (previousBlock.type !== block.type) {\n        listHtml.push(\"</\".concat(getBlockTag(previousBlock.type), \">\\n\"));\n        listHtml.push(\"<\".concat(getBlockTag(block.type), \">\\n\"));\n      } else if (previousBlock.depth === block.depth) {\n        if (nestedListBlock && nestedListBlock.length > 0) {\n          listHtml.push(getListMarkup(nestedListBlock, entityMap, hashtagConfig, directional, customEntityTransform));\n          nestedListBlock = [];\n        }\n      } else {\n        nestedBlock = true;\n        nestedListBlock.push(block);\n      }\n\n      if (!nestedBlock) {\n        listHtml.push('<li');\n        var blockStyle = getBlockStyle(block.data);\n\n        if (blockStyle) {\n          listHtml.push(\" style=\\\"\".concat(blockStyle, \"\\\"\"));\n        }\n\n        if (directional) {\n          listHtml.push(' dir = \"auto\"');\n        }\n\n        listHtml.push('>');\n        listHtml.push(getBlockInnerMarkup(block, entityMap, hashtagConfig, customEntityTransform));\n        listHtml.push('</li>\\n');\n        previousBlock = block;\n      }\n    });\n\n    if (nestedListBlock && nestedListBlock.length > 0) {\n      listHtml.push(getListMarkup(nestedListBlock, entityMap, hashtagConfig, directional, customEntityTransform));\n    }\n\n    listHtml.push(\"</\".concat(getBlockTag(previousBlock.type), \">\\n\"));\n    return listHtml.join('');\n  }\n\n  /**\n  * The function will generate html markup for given draftjs editorContent.\n  */\n\n  function draftToHtml(editorContent, hashtagConfig, directional, customEntityTransform) {\n    var html = [];\n\n    if (editorContent) {\n      var blocks = editorContent.blocks,\n          entityMap = editorContent.entityMap;\n\n      if (blocks && blocks.length > 0) {\n        var listBlocks = [];\n        blocks.forEach(function (block) {\n          if (isList(block.type)) {\n            listBlocks.push(block);\n          } else {\n            if (listBlocks.length > 0) {\n              var listHtml = getListMarkup(listBlocks, entityMap, hashtagConfig, customEntityTransform); // eslint-disable-line max-len\n\n              html.push(listHtml);\n              listBlocks = [];\n            }\n\n            var blockHtml = getBlockMarkup(block, entityMap, hashtagConfig, directional, customEntityTransform);\n            html.push(blockHtml);\n          }\n        });\n\n        if (listBlocks.length > 0) {\n          var listHtml = getListMarkup(listBlocks, entityMap, hashtagConfig, directional, customEntityTransform); // eslint-disable-line max-len\n\n          html.push(listHtml);\n          listBlocks = [];\n        }\n      }\n    }\n\n    return html.join('');\n  }\n\n  return draftToHtml;\n\n})));\n","import { I as cleanValue, D as valueTernary, a as _objectSpread2 } from './index-c7a4d7ce.esm.js';\nimport _toConsumableArray from '@babel/runtime/helpers/esm/toConsumableArray';\nimport _objectWithoutProperties from '@babel/runtime/helpers/esm/objectWithoutProperties';\nimport { useMemo, useCallback } from 'react';\nimport { g as getOptionValue, a as getOptionLabel } from './Select-09b3775e.esm.js';\n\nvar _excluded = [\"allowCreateWhileLoading\", \"createOptionPosition\", \"formatCreateLabel\", \"isValidNewOption\", \"getNewOptionData\", \"onCreateOption\", \"options\", \"onChange\"];\n\nvar compareOption = function compareOption() {\n  var inputValue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var option = arguments.length > 1 ? arguments[1] : undefined;\n  var accessors = arguments.length > 2 ? arguments[2] : undefined;\n  var candidate = String(inputValue).toLowerCase();\n  var optionValue = String(accessors.getOptionValue(option)).toLowerCase();\n  var optionLabel = String(accessors.getOptionLabel(option)).toLowerCase();\n  return optionValue === candidate || optionLabel === candidate;\n};\n\nvar builtins = {\n  formatCreateLabel: function formatCreateLabel(inputValue) {\n    return \"Create \\\"\".concat(inputValue, \"\\\"\");\n  },\n  isValidNewOption: function isValidNewOption(inputValue, selectValue, selectOptions, accessors) {\n    return !(!inputValue || selectValue.some(function (option) {\n      return compareOption(inputValue, option, accessors);\n    }) || selectOptions.some(function (option) {\n      return compareOption(inputValue, option, accessors);\n    }));\n  },\n  getNewOptionData: function getNewOptionData(inputValue, optionLabel) {\n    return {\n      label: optionLabel,\n      value: inputValue,\n      __isNew__: true\n    };\n  }\n};\nfunction useCreatable(_ref) {\n  var _ref$allowCreateWhile = _ref.allowCreateWhileLoading,\n      allowCreateWhileLoading = _ref$allowCreateWhile === void 0 ? false : _ref$allowCreateWhile,\n      _ref$createOptionPosi = _ref.createOptionPosition,\n      createOptionPosition = _ref$createOptionPosi === void 0 ? 'last' : _ref$createOptionPosi,\n      _ref$formatCreateLabe = _ref.formatCreateLabel,\n      formatCreateLabel = _ref$formatCreateLabe === void 0 ? builtins.formatCreateLabel : _ref$formatCreateLabe,\n      _ref$isValidNewOption = _ref.isValidNewOption,\n      isValidNewOption = _ref$isValidNewOption === void 0 ? builtins.isValidNewOption : _ref$isValidNewOption,\n      _ref$getNewOptionData = _ref.getNewOptionData,\n      getNewOptionData = _ref$getNewOptionData === void 0 ? builtins.getNewOptionData : _ref$getNewOptionData,\n      onCreateOption = _ref.onCreateOption,\n      _ref$options = _ref.options,\n      propsOptions = _ref$options === void 0 ? [] : _ref$options,\n      propsOnChange = _ref.onChange,\n      restSelectProps = _objectWithoutProperties(_ref, _excluded);\n\n  var _restSelectProps$getO = restSelectProps.getOptionValue,\n      getOptionValue$1 = _restSelectProps$getO === void 0 ? getOptionValue : _restSelectProps$getO,\n      _restSelectProps$getO2 = restSelectProps.getOptionLabel,\n      getOptionLabel$1 = _restSelectProps$getO2 === void 0 ? getOptionLabel : _restSelectProps$getO2,\n      inputValue = restSelectProps.inputValue,\n      isLoading = restSelectProps.isLoading,\n      isMulti = restSelectProps.isMulti,\n      value = restSelectProps.value,\n      name = restSelectProps.name;\n  var newOption = useMemo(function () {\n    return isValidNewOption(inputValue, cleanValue(value), propsOptions, {\n      getOptionValue: getOptionValue$1,\n      getOptionLabel: getOptionLabel$1\n    }) ? getNewOptionData(inputValue, formatCreateLabel(inputValue)) : undefined;\n  }, [formatCreateLabel, getNewOptionData, getOptionLabel$1, getOptionValue$1, inputValue, isValidNewOption, propsOptions, value]);\n  var options = useMemo(function () {\n    return (allowCreateWhileLoading || !isLoading) && newOption ? createOptionPosition === 'first' ? [newOption].concat(_toConsumableArray(propsOptions)) : [].concat(_toConsumableArray(propsOptions), [newOption]) : propsOptions;\n  }, [allowCreateWhileLoading, createOptionPosition, isLoading, newOption, propsOptions]);\n  var onChange = useCallback(function (newValue, actionMeta) {\n    if (actionMeta.action !== 'select-option') {\n      return propsOnChange(newValue, actionMeta);\n    }\n\n    var valueArray = Array.isArray(newValue) ? newValue : [newValue];\n\n    if (valueArray[valueArray.length - 1] === newOption) {\n      if (onCreateOption) onCreateOption(inputValue);else {\n        var newOptionData = getNewOptionData(inputValue, inputValue);\n        var newActionMeta = {\n          action: 'create-option',\n          name: name,\n          option: newOptionData\n        };\n        propsOnChange(valueTernary(isMulti, [].concat(_toConsumableArray(cleanValue(value)), [newOptionData]), newOptionData), newActionMeta);\n      }\n      return;\n    }\n\n    propsOnChange(newValue, actionMeta);\n  }, [getNewOptionData, inputValue, isMulti, name, newOption, onCreateOption, propsOnChange, value]);\n  return _objectSpread2(_objectSpread2({}, restSelectProps), {}, {\n    options: options,\n    onChange: onChange\n  });\n}\n\nexport { useCreatable as u };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport React from 'react';\nimport { S as Select } from '../../dist/Select-09b3775e.esm.js';\nimport { u as useStateManager } from '../../dist/useStateManager-783b07d5.esm.js';\nimport { u as useCreatable } from '../../dist/useCreatable-00a6568c.esm.js';\nimport '../../dist/index-c7a4d7ce.esm.js';\nimport '@emotion/react';\nimport '@babel/runtime/helpers/taggedTemplateLiteral';\nimport '@babel/runtime/helpers/objectWithoutProperties';\nimport '@babel/runtime/helpers/typeof';\nimport '@babel/runtime/helpers/classCallCheck';\nimport '@babel/runtime/helpers/createClass';\nimport '@babel/runtime/helpers/inherits';\nimport '@babel/runtime/helpers/defineProperty';\nimport 'react-dom';\nimport '@babel/runtime/helpers/toConsumableArray';\nimport 'memoize-one';\nimport '@babel/runtime/helpers/slicedToArray';\n\nvar CreatableSelect = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var creatableProps = useStateManager(props);\n  var selectProps = useCreatable(creatableProps);\n  return /*#__PURE__*/React.createElement(Select, _extends({\n    ref: ref\n  }, selectProps));\n});\n\nexport default CreatableSelect;\n","// ** React Imports\nimport { useState, useEffect, Fragment } from 'react'\n\n// ** Custom Components\nimport Avatar from '@components/avatar'\n\n// ** Third Party Components\nimport { Editor } from 'react-draft-wysiwyg'\nimport draftToHtml from 'draftjs-to-html'\nimport { EditorState, ContentState, convertFromHTML, convertToRaw } from 'draft-js'\nimport Select, { components } from 'react-select'\nimport CreatableSelect from 'react-select/creatable'\n\nimport { Minus, X, Maximize2, Paperclip, MoreVertical, Trash, File } from 'react-feather'\nimport axios from '@src/configs/axios/axiosConfig'\n// ** Reactstrap Imports\nimport {\n  Form,\n  Label,\n  Input,\n  Modal,\n  Button,\n  ModalBody\n} from 'reactstrap'\n\n// ** Utils\nimport { selectThemeColors } from '@utils'\nimport moment from 'moment'\n// ** User Avatars\nimport { activeOrganization, loggedInUser } from '@src/helper/sassHelper'\nconst activeOrg = activeOrganization()\nconst userData = loggedInUser()\n// ** Styles\nimport '@styles/react/libs/editor/editor.scss'\nimport '@styles/react/libs/react-select/_react-select.scss'\nimport UILoader from '@components/ui-loader'\nimport Spinner from '@components/spinner/Loading-spinner'\nimport toast from 'react-hot-toast'\nconst SidebarSendInvoice = props => {\n\n  const colourStyles = {\n    multiValue: (styles, { }) => {\n\n      return {\n        ...styles,\n        backgroundColor: '#7367f0'\n      }\n    }\n  }\n\n  const [block, setBlock] = useState(false)\n\n  const Loader = () => {\n    return (\n      <Fragment>\n        <Spinner />\n      </Fragment>\n    )\n  }\n  const [toEmail, setToEmail] = useState([])\n  const [ccEmail, setCCEmail] = useState([])\n  const [data, setData] = useState('')\n  const { open, toggleSidebar, invoice } = props\n  const [thankyouNote, setThankyouNote] = useState('')\n  const [userOptions, setUserOptions] = useState([])\n  const [clientOptions, setClientOptions] = useState([])\n\n  const getOrganizationUsers = () => {\n    axios.post('/organizationusers/dropdown').then((res) => {\n      setUserOptions(res.data.organizationusers)\n    }).catch(() => { })\n  }\n\n  const getCoatctInfo = (id) => {\n    axios.post('contactinformations/list', { contactid: id }).then((res) => {\n      setClientOptions(res.data.contactinformations)\n    }).catch(() => { })\n\n  }\n\n  const dateFormat = (value) => {\n    if (value.length === 13) {\n      return moment(value, 'x').format(\"MMM DD, YYYY\")\n    } else {\n      return moment.unix(value).format(\"MMM DD, YYYY\")\n    }\n\n  }\n\n  const getThankyouNotes = () => {\n    axios.post('/emailtemplates/get', { slug: 'invoice-send-mail' }).then((res) => {\n      const mailSub = res.data.emailtemplates.description\n      const test = mailSub.replace('{invoice_date}', dateFormat(invoice.paymentdue)).replace('{service}', invoice.taskinvoiceitemsservicename).replace('recipient_name', invoice.contactperson).replace('{recipient_name}', invoice.contactperson).replace('{invoice_no}', invoice.uniqueno).replace('{amount}', invoice.totalamount).replace('{invoice_amount}', invoice.totalamount).replace('{your_name}', userData.name).replaceAll('{firm_name}', activeOrg.name).replace('{', '').replace('}', '')\n\n      const temp = EditorState.createWithContent(\n        ContentState.createFromBlockArray(\n          convertFromHTML(test)\n        )\n      )\n      setData(temp)\n      setThankyouNote(test)\n\n    }).catch(() => { })\n  }\n\n  const handleChange = (editorState) => {\n    setData(editorState)\n    setThankyouNote(draftToHtml(convertToRaw(editorState.getCurrentContent())))\n  }\n\n\n  useEffect(() => {\n    if (invoice.clientid !== undefined) {\n      getCoatctInfo(invoice.clientid)\n    }\n    if (invoice.contactid !== undefined) {\n      getCoatctInfo(invoice.contactid)\n    }\n    if (Object.keys(invoice).length > 0) {\n      getOrganizationUsers()\n      getThankyouNotes()\n    }\n  }, [invoice])\n\n  const sendMail = () => {\n    setBlock(true)\n    const subject = `${invoice.uniqueno} Invoices Acknowledgement Mail`\n    axios.post('/google/sendGmail', { content: thankyouNote, subject, toEmail, ccEmail, taskinvoiceId: invoice.id, clientName: invoice.contactname })\n      .then(() => {\n        toggleSidebar(false)\n        setBlock(false)\n        toast.success('Email send Successfully', { position: 'bottom-right' })\n      })\n    console.log(() => { })\n  }\n\n\n  // ** States\n  const [ccOpen, setCCOpen] = useState(false)\n\n  const SelectComponent = ({ data, ...props }) => {\n    return (\n      <components.Option {...props}>\n        <div className='d-flex flex-wrap align-items-center'>\n          <Avatar className='my-0 me-50' size='sm' initials content={data.name?.charAt(0)} />\n          {data.name} - {data.email}\n        </div>\n      </components.Option>\n    )\n  }\n\n  // ** CC Toggle Function\n  const toggleCC = e => {\n    e.preventDefault()\n    setCCOpen(!ccOpen)\n  }\n\n  // ** Toggles Compose POPUP\n  const togglePopUp = e => {\n    e.preventDefault()\n    toggleSidebar()\n  }\n\n  return (\n\n    <div className='email-application'>\n      <div className='content-area-wrapper'>\n        <div className='col-md-12'>\n          <div className='content-body'>\n            <Modal\n              scrollable\n              fade={false}\n              keyboard={false}\n              backdrop={false}\n              id='compose-mail'\n              container='.content-body'\n              className='modal-lg'\n              isOpen={open}\n              contentClassName='p-0'\n              toggle={toggleSidebar}\n              modalClassName='modal-sticky'\n            >\n              <UILoader blocking={block} loader={<Loader />}>\n                <div className='modal-header'>\n                  <h5 className='modal-title'>Compose Mail</h5>\n                  <div className='modal-actions'>\n                    {/* <a href='/' className='text-body me-75' onClick={togglePopUp}>\n                      <Minus size={14} />\n                    </a>\n                    <a href='/' className='text-body me-75' onClick={e => e.preventDefault()}>\n                      <Maximize2 size={14} />\n                    </a> */}\n                    <a href='/' className='text-body' onClick={togglePopUp}>\n                      <X size={14} />\n                    </a>\n                  </div>\n                </div>\n                <ModalBody className='flex-grow-1 p-0'>\n                  <Form className='compose-form' onSubmit={e => e.preventDefault()}>\n                    <div className='compose-mail-form-field'>\n                      <Label for='email-to' className='form-label'>\n                        To:\n                      </Label>\n                      <div className='flex-grow-1'>\n                        <CreatableSelect\n                          isMulti\n                          id='email-to'\n                          isClearable={false}\n                          theme={selectThemeColors}\n                          options={clientOptions}\n                          className='react-select select-borderless'\n                          classNamePrefix='select'\n                          components={{ Option: SelectComponent }}\n                          styles={colourStyles}\n                          onChange={(e) => { setToEmail(e.map(i => i.email)) }}\n                          getOptionLabel={(option) => `${option.name} - ${option.email}`}\n                          getOptionValue={(option) => option.id}\n                        />\n                      </div>\n                      <div>\n                        <a href='/' className='toggle-cc text-body me-1' onClick={toggleCC}>\n                          Cc\n                        </a>\n                      </div>\n                    </div>\n                    {ccOpen === true ? (\n                      <div className='compose-mail-form-field cc-wrapper'>\n                        <Label for='email-cc' className='form-label'>\n                          Cc:\n                        </Label>\n                        <div className='flex-grow-1'>\n                          <Select\n                            isMulti\n                            id='email-cc'\n                            onChange={(e) => { setCCEmail(e.map(i => i.email)) }}\n                            isClearable={false}\n                            theme={selectThemeColors}\n                            options={userOptions}\n                            className='react-select select-borderless'\n                            classNamePrefix='select'\n                            components={{ Option: SelectComponent }}\n                            styles={colourStyles}\n                            getOptionLabel={(option) => `${option.name} - ${option.email}`}\n                            getOptionValue={(option) => option.id}\n                          />\n                        </div>\n                        <div>\n                          <a href='/' className='toggle-cc text-body' onClick={toggleCC}>\n                            <X size={14} />\n                          </a>\n                        </div>\n                      </div>\n                    ) : null}\n                    <div className='compose-mail-form-field'>\n                      <Label for='email-subject' className='form-label'>\n                        Subject:\n                      </Label>\n                      <Input id='email-subject' placeholder='Subject' />\n                    </div>\n                    <div id='message-editor'>\n                      <Editor\n                        placeholder='Message'\n                        toolbarClassName='rounded-0'\n                        wrapperClassName='toolbar-bottom'\n                        editorState={data}\n                        onEditorStateChange={handleChange}\n                        editorClassName='rounded-0 border-0'\n                        toolbar={{\n                          options: ['inline', 'textAlign'],\n                          inline: {\n                            inDropdown: false,\n                            options: ['bold', 'italic', 'underline', 'strikethrough']\n                          }\n                        }}\n                      />\n                    </div>\n                    <div className='compose-footer-wrapper'>\n                      <div className='btn-wrapper d-flex align-items-center'>\n                        <Button outline color='primary' onClick={() => { sendMail() }}>Send</Button>\n                        <div className='email-attachement rounded border p-50 ms-50'>\n                          {invoice.uniqueno}.pdf\n                        </div>\n                      </div>\n                      <div className='footer-action d-flex align-items-center'>\n                        <Trash className='cursor-pointer' size={18} onClick={toggleSidebar} />\n                      </div>\n                    </div>\n                  </Form>\n                </ModalBody>\n              </UILoader>\n            </Modal>\n          </div></div></div>\n    </div>\n\n  )\n}\n\nexport default SidebarSendInvoice\n"],"sourceRoot":""}