(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[57],{1334:function(e,t,c){"use strict";c.r(t);var a=c(8),n=c(3),r=c(5),s=c(25),i=c(10),l=c(13),o=c(21),j=c(24),d=c(7),b=c.n(d),u=c(708),m=c(704),f=c(709),O=c(107),h=c(111),x=c(16),p=c(701),v=c(702),g=(c(714),c(0)),y=c(6),N=c(183),C=c(2),k=function(e){var t=e.length,c=void 0===t?6:t,a=e.counter,n=e.otpfn,r=Object(g.useState)(Array(c).fill("")),l=Object(i.a)(r,2),o=l[0],j=l[1],d=Object(g.useRef)([]),b=Object(g.useState)(59),u=Object(i.a)(b,2),m=u[0],f=u[1],O=Object(g.useState)(-1),h=Object(i.a)(O,2),x=h[0],p=h[1];Object(g.useEffect)((function(){var e=setInterval((function(){m>0&&(f(m-1),a(m-1)),0===m&&clearInterval(e)}),1e3);return function(){clearInterval(e)}}));return Object(g.useEffect)((function(){var e;null===(e=d.current[x])||void 0===e||e.focus()}),[x]),Object(C.jsx)(g.Fragment,{children:Object(C.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:o.map((function(e,t){return Object(C.jsx)("input",{type:"text",maxLength:"1",value:o[t],onChange:function(e){return function(e,t){var a=e.target.value;if(a.match(/^\d$/)){var r=Object(s.a)(o);r[t]=a,j(r),n(r),t<c-1&&(p(t+1),d.current[t+1].focus())}if(""===a){var i=Object(s.a)(o);i[t]="",j(i),n(i)}""===a&&t>0&&(p(t-1),d.current[t-1].focus())}(e,t)},onKeyDown:function(e){return function(e,t){"Backspace"===e.key&&""===o[t]&&t>0&&(p(t-1),d.current[t-1].focus())}(e,t)},ref:function(e){return d.current[t]=e},className:"width-15-per mx-50 text-center form-control"},t)}))})})};t.default=function(){var e,t,c,s,d=Object(g.useState)(!1),w=Object(i.a)(d,2),E=w[0],S=w[1],F=Object(g.useState)(1),P=Object(i.a)(F,2),L=P[0],T=P[1],I=Object(g.useState)(!1),B=Object(i.a)(I,2),A=B[0],G=B[1],K=function(){return Object(C.jsx)(g.Fragment,{children:Object(C.jsx)(v.a,{})})},R=Object(x.b)(),U=Object(x.c)((function(e){return e.register})),D=u.d().shape({email:u.f().required("Email required"),emailCode:u.f().required("Please Enter Verify Code").matches(/^[0-9\- ]{4,4}$/,{message:"Please Enter Valid verify Code",excludeEmptyString:!0}),acceptTermsAndCondition:u.b().oneOf([!0],"Please Accept terms and Condition")}),J=Object(o.f)(),V=Object(g.useState)(""),q=Object(i.a)(V,2),z=q[0],M=q[1],W=Object(o.e)().search,Z=new URLSearchParams(W),$=Object(m.f)({defaultValues:{emailCode:"",acceptTermsAndCondition:!0},resolver:Object(f.a)(D)}),H=$.control,Q=$.handleSubmit,X=$.formState.errors,Y=$.setError,_=$.setValue,ee=function(){var e=Object(r.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={email:z},e.next=3,R(Object(O.e)(t));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type=L,!(t.emailCode&&t.emailCode.length>0)){e.next=6;break}return S(!0),e.next=5,R(Object(O.i)(t));case 5:S(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(g.useEffect)(Object(r.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==U.verifyError&&(S(!1),Object.keys(U.verifyError).map((function(e){Y(e,{type:"custom",message:U.verifyError[e][0]})})));case 1:case"end":return e.stop()}}),e)}))),[U.verifyError]),Object(g.useEffect)(Object(r.a)(Object(n.a)().mark((function e(){var t,c,a,r,s;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U.accessToken){e.next=12;break}return(a={}).users=U.loginUser,a.token=U.accessToken,e.next=6,R(Object(h.b)(a));case 6:return e.next=8,R(Object(O.g)({userId:null===(t=U.loginUser)||void 0===t?void 0:t.id,type:null===(c=U.loginUser)||void 0===c?void 0:c.usertype}));case 8:r=e.sent,s=r.payload.organizations[0],localStorage.setItem("activeOrganization",JSON.stringify(s)),null!==s&&void 0!==s&&s.clientid?(localStorage.setItem("clientId",null===s||void 0===s?void 0:s.clientid),J("/master")):J("/clients/list");case 12:case"end":return e.stop()}}),e)}))),[U.accessToken]);var ce=function(e){z&&(S(!0),y.a.post("/users/sendcode",{email:null!==e&&void 0!==e?e:z,type:L}).then((function(e){G(!0),S(!1),N.b.success(e.data.users,{position:"bottom-right"})})).catch((function(e){S(!1),N.b.error(e.response.data.errors,{position:"bottom-right"})})))};Object(g.useEffect)((function(){Z.get("email")?(M(Z.get("email")),ce(Z.get("email")),_("email",Z.get("email"))):J("/login")}),[]),Object(g.useEffect)(Object(r.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.parse(localStorage.getItem("userData")),localStorage.getItem("accessToken")&&t&&J("/clients/list");case 3:case"end":return e.stop()}}),e)}))),[]);var ae=Object(g.useState)(0),ne=Object(i.a)(ae,2),re=ne[0],se=ne[1];return Object(C.jsx)("div",{className:"auth-wrapper auth-basic px-2",children:Object(C.jsx)("div",{className:"auth-inner my-2",children:Object(C.jsx)(l.l,{className:"mb-0",children:Object(C.jsxs)(l.m,{children:[Object(C.jsxs)(j.b,{className:"brand-logo",to:"/",onClick:function(e){return e.preventDefault()},children:[Object(C.jsxs)("svg",{viewBox:"0 0 139 95",version:"1.1",height:"28",children:[Object(C.jsxs)("defs",{children:[Object(C.jsxs)("linearGradient",{x1:"100%",y1:"10.5120544%",x2:"50%",y2:"89.4879456%",id:"linearGradient-1",children:[Object(C.jsx)("stop",{stopColor:"#000000",offset:"0%"}),Object(C.jsx)("stop",{stopColor:"#FFFFFF",offset:"100%"})]}),Object(C.jsxs)("linearGradient",{x1:"64.0437835%",y1:"46.3276743%",x2:"37.373316%",y2:"100%",id:"linearGradient-2",children:[Object(C.jsx)("stop",{stopColor:"#EEEEEE",stopOpacity:"0",offset:"0%"}),Object(C.jsx)("stop",{stopColor:"#FFFFFF",offset:"100%"})]})]}),Object(C.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(C.jsx)("g",{id:"Artboard",transform:"translate(-400.000000, -178.000000)",children:Object(C.jsxs)("g",{id:"Group",transform:"translate(400.000000, 178.000000)",children:[Object(C.jsx)("path",{d:"M-5.68434189e-14,2.84217094e-14 L39.1816085,2.84217094e-14 L69.3453773,32.2519224 L101.428699,2.84217094e-14 L138.784583,2.84217094e-14 L138.784199,29.8015838 C137.958931,37.3510206 135.784352,42.5567762 132.260463,45.4188507 C128.736573,48.2809251 112.33867,64.5239941 83.0667527,94.1480575 L56.2750821,94.1480575 L6.71554594,44.4188507 C2.46876683,39.9813776 0.345377275,35.1089553 0.345377275,29.8015838 C0.345377275,24.4942122 0.230251516,14.560351 -5.68434189e-14,2.84217094e-14 Z",id:"Path",className:"text-primary",style:{fill:"currentColor"}}),Object(C.jsx)("path",{d:"M69.3453773,32.2519224 L101.428699,1.42108547e-14 L138.784583,1.42108547e-14 L138.784199,29.8015838 C137.958931,37.3510206 135.784352,42.5567762 132.260463,45.4188507 C128.736573,48.2809251 112.33867,64.5239941 83.0667527,94.1480575 L56.2750821,94.1480575 L32.8435758,70.5039241 L69.3453773,32.2519224 Z",id:"Path",fill:"url(#linearGradient-1)",opacity:"0.2"}),Object(C.jsx)("polygon",{id:"Path-2",fill:"#000000",opacity:"0.049999997",points:"69.3922914 32.4202615 32.8435758 70.5039241 54.0490008 16.1851325"}),Object(C.jsx)("polygon",{id:"Path-2",fill:"#000000",opacity:"0.099999994",points:"69.3922914 32.4202615 32.8435758 70.5039241 58.3683556 20.7402338"}),Object(C.jsx)("polygon",{id:"Path-3",fill:"url(#linearGradient-2)",opacity:"0.099999994",points:"101.428699 0 83.0667527 94.1480575 130.378721 47.0740288"})]})})})]}),Object(C.jsx)("h2",{className:"brand-text text-primary ms-1",children:"Turia"})]}),Object(C.jsx)(l.v,{tag:"h4",className:"mb-1",children:"Welcome Turia Books \ud83d\ude80"}),Object(C.jsx)(l.H,{className:"auth-register-form mt-2",onSubmit:Q(te),children:Object(C.jsxs)(p.a,{blocking:E,loader:Object(C.jsx)(K,{}),children:[Object(C.jsx)("p",{children:"Please check mail inbox and spam folder for verification code"}),Object.keys(X).map((function(e,t){var c;return Object(C.jsxs)(l.I,{children:[" ",null===(c=X[e])||void 0===c?void 0:c.message]},t)})),Object(C.jsxs)(l.ib,{className:"gx-2 mb-1",children:[!A&&Object(C.jsxs)(g.Fragment,{children:[Object(C.jsx)(l.B,{sm:12,className:"mb-1",children:Object(C.jsxs)(l.K,{type:"select",id:"rows-per-page",className:"w-100 mb-1",value:L,onChange:function(e){return T(e.target.value)},style:{width:"5rem"},children:[Object(C.jsx)("option",{value:"1",children:"Auditor"}),Object(C.jsx)("option",{value:"2",children:"Client"})]})}),Object(C.jsxs)(l.B,{sm:12,className:"mb-1",children:[Object(C.jsx)(l.N,{className:"form-label",for:"email",children:"Email"}),Object(C.jsx)(m.a,{name:"email",control:H,render:function(e){var t=e.field;return Object(C.jsx)(l.K,Object(a.a)(Object(a.a)({},t),{},{type:"email",id:"email",placeholder:"jhon@email.com",onChange:function(e){M(e.target.value),_("email",e.target.value)},className:b()("form-control",{"is-invalid":X.email})}))}}),Object(C.jsx)(l.B,{children:X.email&&Object(C.jsxs)(l.I,{children:[null===(e=X.email)||void 0===e?void 0:e.message," "]})}),Object(C.jsxs)("div",{className:"form-check mb-1 mt-1",children:[Object(C.jsx)(l.K,{type:"checkbox",id:"terms"}),Object(C.jsx)(l.N,{className:"form-check-label",for:"terms",children:"Remember me"})]}),Object(C.jsx)(l.i,{disabled:!z,className:"mt-1",color:"primary",block:!0,onClick:function(){ce()},children:"Send OTP"})]})]}),A&&Object(C.jsxs)(g.Fragment,{children:[Object(C.jsx)("span",{className:"font-small-3 text-primary",children:z}),Object(C.jsxs)(l.B,{sm:12,className:"mb-1",children:[Object(C.jsx)(k,{length:4,counter:function(e){se(e)},otpfn:function(e){_("emailCode",e.join(""))}}),Object(C.jsxs)(l.ib,{className:"d-flex justify-content-between",children:[Object(C.jsx)(l.B,{children:X.emailCode&&Object(C.jsxs)(l.I,{children:[null===(t=X.emailCode)||void 0===t?void 0:t.message," "]})}),Object(C.jsx)(l.B,{className:"d-flex justify-content-end mt-50",children:Object(C.jsxs)("span",{"aria-disabled":re>0,className:"text-primary cursor-pointer",onClick:function(){ee()},children:["Resend",re>0&&Object(C.jsxs)("span",{children:[" (",re,")"]})]})})]})]}),X.action&&Object(C.jsx)("p",{className:"text-danger",children:null===(c=X.action)||void 0===c?void 0:c.message}),X.emailCode&&Object(C.jsx)("p",{className:"text-danger",children:null===(s=X.emailCode)||void 0===s?void 0:s.message}),Object(C.jsx)(l.B,{sm:12,className:"mb-1 ",children:Object(C.jsxs)("div",{className:"form-check form-check-inline",children:[Object(C.jsx)(m.a,{name:"acceptTermsAndCondition",control:H,render:function(e){var t=e.field;return Object(C.jsx)(l.K,Object(a.a)(Object(a.a)({},t),{},{type:"checkbox",defaultChecked:!0,name:"acceptTermsAndCondition",id:"acceptTermsAndCondition"}))}}),Object(C.jsx)(l.N,{className:b()("form-label",{"text-danger":X.emailCode}),children:Object(C.jsxs)("p",{children:["By choosing ",Object(C.jsx)("b",{children:"Submit"})," you agree to ",Object(C.jsxs)("b",{children:["Turia's ",Object(C.jsx)("a",{href:"https://www.turia.in/terms",children:"Terms of Use"}),", ",Object(C.jsx)("a",{href:"https://www.turia.in/privacy",children:"Privacy"})," and ",Object(C.jsx)("a",{href:"https://www.turia.in/privacy",children:"Data Protection Policies"}),"."]})]})})]})})]})]}),A&&Object(C.jsx)("div",{className:"d-flex justify-content-between mt-2",children:Object(C.jsx)(l.i,{type:"submit",color:"primary",className:"btn-next",children:Object(C.jsx)("span",{className:"align-middle d-sm-inline-block d-none",children:"Submit"})})})]})})]})})})})}},701:function(e,t,c){"use strict";var a=c(8),n=c(23),r=c(0),s=c(7),i=c.n(s),l=c(13),o=(c(703),c(2)),j=function(e){var t,c=e.children,s=e.blocking,l=e.loader,j=e.className,d=e.tag,b=e.overlayColor,u=d;return Object(o.jsxs)(u,{className:i()("ui-loader",(t={},Object(n.a)(t,j,j),Object(n.a)(t,"show",s),t)),children:[c,s?Object(o.jsxs)(r.Fragment,{children:[Object(o.jsx)("div",Object(a.a)({className:"overlay"},s&&b?{style:{backgroundColor:b}}:{})),Object(o.jsx)("div",{className:"loader",children:l})]}):null]})};t.a=j,j.defaultProps={tag:"div",blocking:!1,loader:Object(o.jsx)(l.jb,{color:"primary"})}},702:function(e,t,c){"use strict";var a=c(2);t.a=function(){return Object(a.jsx)("div",{className:"fallback-spinner",children:Object(a.jsxs)("div",{className:"loading",children:[Object(a.jsx)("div",{className:"effect-1 effects"}),Object(a.jsx)("div",{className:"effect-2 effects"}),Object(a.jsx)("div",{className:"effect-3 effects"})]})})}},703:function(e,t,c){},714:function(e,t,c){}}]);
//# sourceMappingURL=57.ed98d9eb.chunk.js.map